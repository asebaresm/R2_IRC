\hypertarget{xchat2_8c}{}\section{src/xchat2.c File Reference}
\label{xchat2_8c}\index{src/xchat2.\+c@{src/xchat2.\+c}}


Fichero con principalmente la implementación de los callbacks de xchat2.  


{\ttfamily \#include \char`\"{}../includes/xchat2.\+h\char`\"{}}\\*
Include dependency graph for xchat2.\+c\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\+\_\+query} (char $\ast$message)
\begin{DoxyCompactList}\small\item\em Parsea los mensajes y respuestas que recibe del servidor. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glue\+And\+Query} (char $\ast$command, char $\ast$\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\+\_\+command})
\item 
void \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe} (char $\ast$message, int M\+A\+X\+D\+A\+T\+A\+\_\+flag)
\begin{DoxyCompactList}\small\item\em Funcion para dividir en comandos la cadena \char`\"{}message\char`\"{}. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}{receive\+\_\+messages} (void $\ast$no\+\_\+arg)
\begin{DoxyCompactList}\small\item\em Funcion ejecutada por un hilo, que recibe mensajes del servidor y los procesa segun el tipo de respuesta. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8c_a33f80a29a744e4182b29e23f13c1f05c}{I\+R\+C\+Interface\+\_\+\+Activate\+Channel\+Key} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a5892a9181e6a332f84d27aecd41dcd12}{key})
\item 
void \hyperlink{xchat2_8c_a7a439929c246e342ae525139b2c39f5d}{I\+R\+C\+Interface\+\_\+\+Activate\+External\+Messages} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_ac72762ab1e3575b421b967241db23f9c}{I\+R\+C\+Interface\+\_\+\+Activate\+Invite} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_af83498f4058311f4562c43a9b70566b2}{I\+R\+C\+Interface\+\_\+\+Activate\+Moderated} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_ab5694cc413472173bfcaa969c7d9800e}{I\+R\+C\+Interface\+\_\+\+Activate\+Nicks\+Limit} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, int limit)
\item 
void \hyperlink{xchat2_8c_ab1f09c737c7c109a97e22de6072d731d}{I\+R\+C\+Interface\+\_\+\+Activate\+Private} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_ac45f12d4dcacf3b5485eec6fdc51df93}{I\+R\+C\+Interface\+\_\+\+Activate\+Protect\+Topic} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_aa9e9155115b834d85a4d10cb27f99093}{I\+R\+C\+Interface\+\_\+\+Activate\+Secret} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_a42773b5a840f9d0455f148d285e1e595}{I\+R\+C\+Interface\+\_\+\+Ban\+Nick} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
long \hyperlink{xchat2_8c_aed072f4ce0d6e90697d4d6eb0278a2ad}{I\+R\+C\+Interface\+\_\+\+Connect} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a14871705f45ccdc5bb9f4549efd8e119}{user}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a980ab011cd3d327b370c042833f1dc08}{realname}, char $\ast$password, char $\ast$server, int port, boolean ssl)
\item 
void \hyperlink{xchat2_8c_a3e67ee0cd384b524d57fda14593dce8e}{I\+R\+C\+Interface\+\_\+\+Deactivate\+Channel\+Key} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_a638b1535f4ecbc9a6affb2df2a6a946e}{I\+R\+C\+Interface\+\_\+\+Deactivate\+External\+Messages} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_a9ba4e98a3729737aa63ebec54ba4e894}{I\+R\+C\+Interface\+\_\+\+Deactivate\+Invite} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_ab760e8144b38f6c14bd809d157cee5d4}{I\+R\+C\+Interface\+\_\+\+Deactivate\+Moderated} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_a92c8cfbe2e14e19277e1c97d11719e80}{I\+R\+C\+Interface\+\_\+\+Deactivate\+Nicks\+Limit} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_a8a6141803691ba327f11ba763ad075d4}{I\+R\+C\+Interface\+\_\+\+Deactivate\+Private} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_a5a57541a950f8c2c40b4b44c32b28ed9}{I\+R\+C\+Interface\+\_\+\+Deactivate\+Protect\+Topic} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
void \hyperlink{xchat2_8c_a4956427664cabc7d5b2bd1589a207324}{I\+R\+C\+Interface\+\_\+\+Deactivate\+Secret} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel})
\item 
boolean \hyperlink{xchat2_8c_a8bf0424ef7f845be79a056e9aed56fe2}{I\+R\+C\+Interface\+\_\+\+Disconnect\+Server} (char $\ast$server, int port)
\item 
boolean \hyperlink{xchat2_8c_ab431412191716f751461f94d613ffdab}{I\+R\+C\+Interface\+\_\+\+Exit\+Audio\+Chat} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
void \hyperlink{xchat2_8c_ae075029bb55e8b995f22beb0810674f4}{I\+R\+C\+Interface\+\_\+\+Give\+Op} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
void \hyperlink{xchat2_8c_ae9effb4bdaf4a2cdf2dd9edbeb90b430}{I\+R\+C\+Interface\+\_\+\+Give\+Voice} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
void \hyperlink{xchat2_8c_a7adfea400a96160585f86179bafb055f}{I\+R\+C\+Interface\+\_\+\+Kick\+Nick} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
void \hyperlink{xchat2_8c_a214e10b19c8be028fb35d2a7abf3f798}{I\+R\+C\+Interface\+\_\+\+New\+Command\+Text} (char $\ast$command)
\item 
void \hyperlink{xchat2_8c_a080cf34ff506481737f6d08af60ca92b}{I\+R\+C\+Interface\+\_\+\+New\+Topic\+Enter} (char $\ast$topicdata)
\item 
boolean \hyperlink{xchat2_8c_a100f1c87bb3b399a7284e62dd2e6172a}{I\+R\+C\+Interface\+\_\+\+Send\+File} (char $\ast$filename, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, char $\ast$data, long unsigned int length)
\item 
boolean \hyperlink{xchat2_8c_a5dc7a44587e609b416a783cd420a12e3}{I\+R\+C\+Interface\+\_\+\+Start\+Audio\+Chat} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
boolean \hyperlink{xchat2_8c_a754a3d3dd311194637c07cc701e7d507}{I\+R\+C\+Interface\+\_\+\+Stop\+Audio\+Chat} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
void \hyperlink{xchat2_8c_a4e2a1ea75e59306142030a91a054b7e6}{I\+R\+C\+Interface\+\_\+\+Take\+Op} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
void \hyperlink{xchat2_8c_a2ff2e10ed1cb1a399293b6f76ac1e5ae}{I\+R\+C\+Interface\+\_\+\+Take\+Voice} (char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, char $\ast$\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick})
\item 
int \hyperlink{xchat2_8c_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
pthread\+\_\+mutex\+\_\+t \hyperlink{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{loglock}
\begin{DoxyCompactList}\small\item\em Declaracion del Mutex para el descriptor de fichero del log. Siempre tiene que ser definida en el source princpal. \end{DoxyCompactList}\item 
pthread\+\_\+t \hyperlink{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{recv\+\_\+tid}
\item 
pthread\+\_\+t \hyperlink{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}{sendf\+\_\+tid}
\item 
int \hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\+\_\+user} = -\/1
\item 
char \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\+\_\+user} \mbox{[}\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{M\+A\+X\+D\+A\+TA}\mbox{]} = \{0\}
\item 
char $\ast$ \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname}
\item 
char $\ast$ \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\+\_\+channel} = N\+U\+LL
\item 
char $\ast$ \hyperlink{xchat2_8c_a98d1a6f1c3b6a02b439ca0b9e8434420}{stream}
\item 
char \hyperlink{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{host\+\_\+name} \mbox{[}128\mbox{]}
\item 
char \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\+\_\+command} \mbox{[}256\mbox{]} = \char`\"{}\char`\"{}
\item 
int \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\+\_\+next\+\_\+unpipe} = 0
\item 
int \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\+\_\+test} = \hyperlink{types_8h_aba51915c87d64af47fb1cc59348961c9}{OK}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Fichero con principalmente la implementación de los callbacks de xchat2. 

\begin{DoxyAuthor}{Author}
Alfonso Sebares 

Beatriz de Pablo 

Celia Mateos 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
20/03/17 
\end{DoxyDate}


\subsection{Function Documentation}
\index{xchat2.\+c@{xchat2.\+c}!command\+\_\+query@{command\+\_\+query}}
\index{command\+\_\+query@{command\+\_\+query}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{command\+\_\+query(char $\ast$message)}{command_query(char *message)}}]{\setlength{\rightskip}{0pt plus 5cm}int command\+\_\+query (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{message}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a41f93f364aea303a0c93177289733f92}{}\label{xchat2_8c_a41f93f364aea303a0c93177289733f92}


Parsea los mensajes y respuestas que recibe del servidor. 


\begin{DoxyParams}{Parameters}
{\em massage} & mensaje recibido para procesar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK si todo fue correcto y E\+RR si ocurrio un error 
\end{DoxyReturn}
$<$ delimitador para separar mensajes 
\begin{DoxyCode}
40                                 \{
41 
42         \textcolor{keywordtype}{long} ret = -1;
43         \textcolor{keywordtype}{int} retorno = -1;
44         \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_ad2849cf781a4db22cc1b31eaaee50a4f}{prefix} = NULL;
45         \textcolor{keywordtype}{int} n = -1;
46         \textcolor{keywordtype}{int} counter = 1;
47     \textcolor{keywordtype}{char} mensaje[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
48     \textcolor{keywordtype}{char} mensajeLargo[10*\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
49     \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_a32d2f5216cddb59c7cc8fb2806a7e727}{msg} = NULL;
50     \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick} = NULL;
51     \textcolor{keywordtype}{char} *nick2 = NULL;
52     \textcolor{comment}{//002}
53     \textcolor{keywordtype}{char} *servername = NULL;
54         \textcolor{keywordtype}{char} *versionname = NULL;
55         \textcolor{comment}{//003}
56         \textcolor{keywordtype}{char} *timedate = NULL;
57         \textcolor{comment}{//004}
58         \textcolor{keywordtype}{char}* version = NULL;
59         \textcolor{keywordtype}{char}* availableusermodes = NULL;
60         \textcolor{keywordtype}{char}* availablechannelmodes = NULL;
61         \textcolor{keywordtype}{char}* addedg = NULL;    
62         \textcolor{comment}{//251}
63         \textcolor{keywordtype}{int} nusers = 0;
64         \textcolor{keywordtype}{int} ninvisibles = 0;
65         \textcolor{keywordtype}{int} nservers = 0;
66         \textcolor{keywordtype}{char} *type = NULL;
67         \textcolor{comment}{//char **parameters = NULL;}
68         \textcolor{comment}{//int numparameters = 0;}
69 
70         \textcolor{comment}{//265}
71         \textcolor{keywordtype}{char} *substring = NULL;
72         \textcolor{comment}{//322}
73         \textcolor{keywordtype}{char} *visible = NULL;
74         \textcolor{comment}{//332}
75         \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_affecb48e716753e10b44feac31f12529}{topic} = NULL;
76         \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel} = NULL;
77 
78         \textcolor{comment}{//353}
79         \textcolor{comment}{//char* show\_nick;}
80 
81         \textcolor{comment}{//JOIN}
82         \textcolor{keywordtype}{char}* \hyperlink{_g-2361-06-_p1-_server_8c_a5892a9181e6a332f84d27aecd41dcd12}{key} = NULL;    
83         \textcolor{keywordtype}{char} command[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
84 
85         \textcolor{comment}{//PRIVMSG}
86         \textcolor{keywordtype}{char}* \hyperlink{_g-2361-06-_p1-_server_8c_a968dcc7e43caeca7959f3c069dcccc6a}{msgtarget} = NULL;
87         \textcolor{keywordtype}{char}* origin\_nick = NULL;
88         \textcolor{keywordtype}{char} nick\_privmsg[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
89         \textcolor{keywordtype}{char} *filename = NULL, *hostname\_destino = NULL;
90         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} length, port;
91 
92         \textcolor{comment}{//PART}
93         \textcolor{keywordtype}{char}* nick\_part;
94         \textcolor{keywordtype}{char}* username\_part;
95         \textcolor{keywordtype}{char}* host\_part;
96         \textcolor{keywordtype}{char}* server\_part;
97 
98         \textcolor{comment}{//PING}
99         \textcolor{keywordtype}{char}* server, *\hyperlink{_g-2361-06-_p1-_server_8c_a70dd311bef3d0b4160a7ce0706f8f4cc}{server2};
100         \textcolor{keywordtype}{char}* command\_pong;
101 
102         \textcolor{comment}{//Strtok}
103         \textcolor{keyword}{const} \textcolor{keywordtype}{char} s[2] = \textcolor{stringliteral}{":"}; 
104         \textcolor{keywordtype}{char} *token = NULL;
105 
106         \textcolor{comment}{//472}
107         \textcolor{keywordtype}{char} *modechar = NULL;
108 
109         \textcolor{comment}{//MODE}
110         \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_a55a7bd8f3229706c5917445aba995c5b}{channeluser} = NULL;
111         \textcolor{keywordtype}{char} *mode = NULL;
112         \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_a14871705f45ccdc5bb9f4549efd8e119}{user} = NULL;
113 
114         \textcolor{comment}{//KICK}
115         \textcolor{keywordtype}{char} *comment = NULL;
116 
117         \textcolor{comment}{//QUIT}
118         \textcolor{keywordtype}{char} **channelsQuit;
119         \textcolor{keywordtype}{int} numChannelsQuit;
120         \textcolor{keywordtype}{int} i;
121         \textcolor{comment}{//char* realname, *host;}
122 
123         \textcolor{comment}{//GENERAL}
124         \textcolor{keywordtype}{char} **params;
125         \textcolor{keywordtype}{int} n\_params;
126         \textcolor{keywordtype}{int} unknw\_type;
127         \textcolor{keyword}{const} \textcolor{keywordtype}{char} space\_delim[2] = \textcolor{stringliteral}{" "};
128         \textcolor{keywordtype}{char} *message\_cp = NULL;
129 
130         \textcolor{comment}{//g\_print("Mesaje recibido en command\_query: %s", message);}
131 
132         \textcolor{comment}{/*}
133 \textcolor{comment}{        if(message == NULL) \{}
134 \textcolor{comment}{                g\_print(RED "ERROR - In command\_query: message == NULL al principio\(\backslash\)n\(\backslash\)n" RESET);}
135 \textcolor{comment}{                return ERR;}
136 \textcolor{comment}{        \}}
137 \textcolor{comment}{        */}
138 
139         IRCInterface\_PlaneRegisterInMessage(message);
140 
141         \textcolor{keywordflow}{switch}(IRC\_CommandQuery(message))\{
142                 \textcolor{keywordflow}{case} RPL\_WELCOME: \textcolor{comment}{//001}
143                         ret = IRCParse\_RplWelcome(message, &prefix, &nick2, &msg);
144                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
145                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_WELCOME -
       IRCParse\_RplWelcome != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
146                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
147                         \}
148                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplWelcome: \(\backslash\)n"});
149                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
150                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
151                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
152                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
153                         \textcolor{comment}{//obtenemos el hostname, util para el envio de ficheros}
154                         \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(msg, \textcolor{stringliteral}{" "});
155                         \textcolor{keywordflow}{while} (((\hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(NULL, \textcolor{stringliteral}{" "})) != NULL) && (counter < 5))\{
156                                 counter++;
157                         \}
158                         \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(NULL, \textcolor{stringliteral}{" "});
159                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t hostname: %s \(\backslash\)n\(\backslash\)n"}, \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname});
160                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"}, msg
      );
161                         \textcolor{keywordflow}{break};
162 
163                 \textcolor{keywordflow}{case} RPL\_YOURHOST:      \textcolor{comment}{//002}
164                         \textcolor{comment}{//long IRCParse\_RplYourHost (char *strin, char **prefix, char **nick, char **msg,
       char **servername, char **versionname)}
165                         ret = IRCParse\_RplYourHost(message, &prefix, &nick2, &msg, &servername, &
      versionname);
166                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
167                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_YOURHOST -
       IRCParse\_RplYourHost != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
168                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
169                         \}
170                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplYourHost: \(\backslash\)n"});
171                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
172                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
173                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
174                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t servername: %s \(\backslash\)n"},servername);
175                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t versionname: %s \(\backslash\)n"},versionname);           
176                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
177                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
178                         \textcolor{keywordflow}{break};
179 
180                 \textcolor{keywordflow}{case} RPL\_CREATED:\textcolor{comment}{//003                  }
181                         \textcolor{comment}{//long IRCParse\_RplCreated (char *strin, char **prefix, char **nick,char
       **timedate, char **msg)}
182                         ret = IRCParse\_RplCreated(message, &prefix, &nick2, &timedate, &msg);
183                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
184                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_CREATED -
       IRCParse\_RplCreated != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
185                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
186                         \}
187                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplCreated: \(\backslash\)n"});
188                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
189                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
190                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
191                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t timedate: %s \(\backslash\)n"},timedate); 
192                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
193                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
194                         \textcolor{keywordflow}{break};
195 
196                 \textcolor{keywordflow}{case} RPL\_MYINFO: \textcolor{comment}{//004}
197                         \textcolor{comment}{//long IRCParse\_RplMyInfo (char *strin, char **prefix, char **nick, char
       **servername, char **version, char **availableusermodes, char **availablechannelmodes, char **addedg)}
198                         ret = IRCParse\_RplMyInfo(message, &prefix, &nick2, &servername, &version, &
      availableusermodes, &availablechannelmodes, &addedg);
199                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
200                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_MYINFO -
       IRCParse\_RplMyInfo != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
201                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
202                         \}
203                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplMyInfo: \(\backslash\)n"});
204                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
205                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
206                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
207                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t servername: %s \(\backslash\)n"},servername);
208                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t version: %s \(\backslash\)n"},version);
209                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t availableusermodes: %s \(\backslash\)n"},availableusermodes);     
210                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t availablechannelmodes: %s \(\backslash\)n"},availablechannelmodes);
211                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t addedg: %s \(\backslash\)n\(\backslash\)n"},addedg);
212                         n = snprintf(mensaje, \textcolor{keyword}{sizeof} mensaje,\textcolor{stringliteral}{"%s %s %s %s %s "},servername,version,
      availableusermodes,availablechannelmodes,addedg);
213 
214                         \textcolor{keywordflow}{if} ( n < 0 || n >= \textcolor{keyword}{sizeof} mensaje )\{
215                                 g\_print(\textcolor{stringliteral}{"Error en sprintf \(\backslash\)n"});
216                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};    \textcolor{comment}{// or other error handling}
217                         \}
218                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);            
219                         \textcolor{keywordflow}{break};
220 
221                 \textcolor{keywordflow}{case} RPL\_BOUNCE: \textcolor{comment}{//005}
222                         \textcolor{comment}{//   long IRCParse\_RplISupport (char *strin, char **prefix, char **nick, char
       **msg)                                                }
223                         ret = IRCParse\_RplISupport(message, &prefix, &nick2, &msg);
224                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
225                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_BOUNCE
       -IRCParse\_RplISupport != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
226                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
227                         \}
228                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplISupport: \(\backslash\)n"});
229                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
230                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
231                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
232                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
233                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;                
234                         \textcolor{keywordflow}{break};
235 
236                 \textcolor{keywordflow}{case} RPL\_LUSERCLIENT: \textcolor{comment}{//251}
237                         \textcolor{comment}{//long IRCParse\_RplLuserClient (char *strin, char **prefix, char **nick, char
       **msg, int *nusers, int *ninvisibles, int *nservers)}
238                         
239                         ret = IRCParse\_RplLuserClient(message, &prefix, &nick2, &msg, &nusers, &ninvisibles
      , &nservers);
240                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
241                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_LUSERCLIENT
       -IRCParse\_RplLuserClient != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
242                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
243                         \}
244                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
245                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
246                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
247                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg);
248                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nusers: %d \(\backslash\)n"},nusers);
249                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t ninvisibles: %d \(\backslash\)n"},ninvisibles);
250                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nservers: %d \(\backslash\)n\(\backslash\)n"},nservers); 
251 
252                         \textcolor{comment}{/*ret\_strstr = strstr(mensaje,"nicknick");}
253 \textcolor{comment}{                        IRCInterface\_WriteSystem("*",ret\_strstr);*/} 
254 
255                         sprintf(mensaje,\textcolor{stringliteral}{"There are %d users and %d invisibles on %d servers "},nusers,
      ninvisibles,nservers);
256                         \textcolor{comment}{//sprintf(mensaje,"There are 13 users and 0 services on 1 servers");}
257 
258                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);                                                                                                    
259                         \textcolor{keywordflow}{break};
260                         
261                 \textcolor{keywordflow}{case} RPL\_LUSERCHANNELS: \textcolor{comment}{//254}
262                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
263                         \textcolor{comment}{/*Coger el primer token*/}
264                         token = strtok(message,s);
265                         \textcolor{comment}{/*Ir por el resto*/}
266                         \textcolor{keywordflow}{if}(token != NULL)\{
267                                 token = strtok(NULL,s); 
268                         \}
269                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
270 
271                         token = NULL;
272                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
273                         \textcolor{keywordflow}{break};
274 
275                 \textcolor{keywordflow}{case} RPL\_LUSERME : \textcolor{comment}{//255}
276                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
277                         \textcolor{comment}{/*Coger el primer token*/}
278                         token = strtok(message,s);
279                         \textcolor{comment}{/*Ir por el resto*/}
280                         \textcolor{keywordflow}{if}(token != NULL)\{
281                                 token = strtok(NULL,s); 
282                         \}
283                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
284 
285                         token = NULL;
286                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
287                         \textcolor{keywordflow}{break};
288 
289                 \textcolor{keywordflow}{case} RPL\_LOCALUSERS: \textcolor{comment}{//265}
290                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
291                         \textcolor{keywordflow}{if} (substring)\{
292                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
293                         \}
294                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      substring);
295 
296                         substring = NULL;
297                         \textcolor{keywordflow}{break};
298 
299                 \textcolor{keywordflow}{case} RPL\_GLOBALUSERS: \textcolor{comment}{//266}
300                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_GLOBALUSERS - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
301                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
302                         \textcolor{keywordflow}{if} (substring)\{
303                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
304                         \}
305                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      substring);
306 
307                         substring = NULL;               
308                         \textcolor{keywordflow}{break};
309 
310                 \textcolor{keywordflow}{case} RPL\_LISTSTART: \textcolor{comment}{//321}
311                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LISTSTART - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
312                         token = strtok(message,s);
313                         \textcolor{keywordflow}{if}(token != NULL)\{
314                                 token = strtok(NULL,s); 
315                         \}
316                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
317 
318                         \textcolor{keywordflow}{break};
319 
320                 \textcolor{keywordflow}{case} RPL\_LIST: \textcolor{comment}{//322}
321                         \textcolor{comment}{//   long IRCParse\_RplList (char *strin, char **prefix, char **nick, char
       **channel, char **visible, char **topic)}
322                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LIST - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
323                         ret = IRCParse\_RplList(message, &prefix, &nick2, &channel, &visible, &topic);
324                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
325                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_LIST -
       IRCParse\_RplList != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
326                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
327                         \}
328                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplList: \(\backslash\)n"});
329                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
330                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
331                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
332                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
333                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t visible: %s \(\backslash\)n"},visible);
334                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
335 
336                         sprintf(mensajeLargo,\textcolor{stringliteral}{"%s \(\backslash\)t %s \(\backslash\)t %s"},channel,visible,topic);
337                         g\_print(\textcolor{stringliteral}{"Mensaje creado: %s \(\backslash\)n\(\backslash\)n"},mensajeLargo);
338 
339                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensajeLargo);
340                         \hyperlink{aux__functions_8h_a2480cc4793bf25a16cc731dc9d033582}{mfree}(5,prefix,nick2,channel,visible,topic);       
341                         \textcolor{keywordflow}{break};
342 
343                 \textcolor{keywordflow}{case} RPL\_LISTEND: \textcolor{comment}{//323}
344                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LISTEND - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
345                         \textcolor{comment}{/*Coger el primer token*/}
346                         token = strtok(message,s);
347                         \textcolor{comment}{/*Ir por el resto*/}
348                         \textcolor{keywordflow}{if}(token != NULL)\{
349                                 token = strtok(NULL,s); 
350                         \}
351                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
352 
353                         token = NULL;
354                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                        }
355                         \textcolor{keywordflow}{break};
356 
357                 \textcolor{keywordflow}{case} RPL\_WHOREPLY: \textcolor{comment}{//352}
358                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_WHOREPLY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
359                         \textcolor{keywordflow}{break};
360 
361                 \textcolor{keywordflow}{case} RPL\_MOTDSTART: \textcolor{comment}{//375}
362                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
363                         \textcolor{comment}{/*Coger el primer token*/}
364                         token = strtok(message,s);
365                         \textcolor{comment}{/*Ir por el resto*/}
366                         \textcolor{keywordflow}{if}(token != NULL)\{
367                                 token = strtok(NULL,s); 
368                         \}
369                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
370 
371                         token = NULL;
372                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                        }
373                         \textcolor{keywordflow}{break};
374 
375                 \textcolor{keywordflow}{case} RPL\_MOTD: \textcolor{comment}{//372}
376                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
377                         \textcolor{comment}{/*Coger el primer token*/}
378                         token = strtok(message,s);
379                         \textcolor{comment}{/*Ir por el resto*/}
380                         \textcolor{keywordflow}{if}(token != NULL)\{
381                                 token = strtok(NULL,s); 
382                         \}
383                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
384 
385                         token = NULL;
386                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                }
387                         \textcolor{keywordflow}{break};
388 
389                 \textcolor{keywordflow}{case} RPL\_ENDOFMOTD: \textcolor{comment}{//376}
390                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
391                         \textcolor{comment}{/*Coger el primer token*/}
392                         token = strtok(message,s);
393                         \textcolor{comment}{/*Ir por el resto*/}
394                         \textcolor{keywordflow}{if}(token != NULL)\{
395                                 token = strtok(NULL,s); 
396                         \}
397                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
398 
399                         token = NULL;
400                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
401                         \textcolor{keywordflow}{return} 19;\textcolor{comment}{//cambiar por un define}
402                         \textcolor{keywordflow}{break};
403 
404                 \textcolor{keywordflow}{case} RPL\_TOPIC: \textcolor{comment}{//332}
405                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_TOPIC - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
406                         \textcolor{comment}{//g\_print("\(\backslash\)n=======CASE RPL\_TOPIC=======\(\backslash\)n");}
407                         \textcolor{comment}{//IRCParse\_RplTopic (char *strin, char **prefix, char **nick, char **nick2, char
       **channel, char **msg)}
408                         ret = IRCParse\_RplTopic(message, &prefix, &nick, &channel, &topic);
409                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
410                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_TOPIC -
       IRCParse\_RplTopic devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
411                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
412                         \}
413                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
414                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
415                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
416                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
417                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
418                         sprintf(mensaje,\textcolor{stringliteral}{"El topic para %s es %s "},channel,topic);
419                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
420                         g\_print(\textcolor{stringliteral}{"Existe canal: %d \(\backslash\)n"}, IRCInterface\_QueryChannelExistThread(channel));
421 
422                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);  
423                         \textcolor{keywordflow}{break};
424 
425                 \textcolor{keywordflow}{case} RPL\_AWAY: \textcolor{comment}{//306}
426                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_AWAY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
427                         \textcolor{comment}{//>> :irc.eps.net 306 gomupo :You have been marked as being away}
428                         IRCParse\_RplAway (message, &prefix, &nick, &nick2, &msg);
429                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
430                         \textcolor{keywordflow}{break};
431 
432                 \textcolor{keywordflow}{case} TOPIC: \textcolor{comment}{//332}
433                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] TOPIC - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
434                         \textcolor{comment}{//   long IRCParse\_Topic (char *strin, char **prefix, char **channel, char **topic)}
435                         ret = IRCParse\_Topic (message, &prefix, &channel, &topic);
436                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
437                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case TOPIC - IRCParse\_Topic
       devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
438                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
439                         \}
440 
441                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
442                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
443                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
444                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
445                         sprintf(mensaje,\textcolor{stringliteral}{"El topic para %s es %s \(\backslash\)n"},channel,topic);
446                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
447                         g\_print(\textcolor{stringliteral}{"Existe canal: %d \(\backslash\)n"}, IRCInterface\_QueryChannelExistThread(channel));
448 
449                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
450                         \textcolor{keywordflow}{break};
451 
452                 \textcolor{keywordflow}{case} RPL\_NOTOPIC:
453                         \textcolor{keywordflow}{break};
454 
455                 \textcolor{keywordflow}{case} RPL\_TOPICWHOTIME: \textcolor{comment}{//333}
456                         \textcolor{keywordflow}{break};  
457 
458                 \textcolor{keywordflow}{case} RPL\_NAMREPLY: \textcolor{comment}{//353 - reply del servidor de de punames()}
459                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_NAMREPLY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
460                         \textcolor{comment}{//long IRCParse\_RplNamReply (char *strin, char **prefix, char **nick, char **type,
       char **channel, char **msg)}
461                         ret = IRCParse\_RplNamReply(message, &prefix, &nick, &type, &channel, &msg);
462                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
463                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_NAMREPLY -
       IRCParse\_RplNamReply devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
464                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
465                         \}
466                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
467                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
468                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
469                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t type: %s \(\backslash\)n"},type);                                                         
470                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
471                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
472 
473                         \textcolor{comment}{//Ojo, que pasa si es names?? sin join}
474                         \textcolor{comment}{//Añadir los nicks a la ventana de lad erecha. Pillarlos del WHO que se envía }
475                         \textcolor{comment}{//despues del join.}
476                         \textcolor{comment}{//OJO es una prueba del funcionamineto de IRCInterface\_AddNickChannel,}
477                         \textcolor{comment}{//los nicks deberían de ser partidos mediante uso strtok o algo parecido}
478                         \textcolor{comment}{//IRCInterface\_AddNickChannel (channel, msg, msg, msg, msg, VOICE);}
479                         \textcolor{comment}{//sprintf(mensaje,"Usuarios en %s: %s",channel,msg);}
480                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(channel,"*",mensaje);}
481                         \hyperlink{aux__functions_8h_a09c2fcb81e148a2f23080a1671869f96}{interface\_mostrar\_nicks}(channel,msg);    
482                         \textcolor{keywordflow}{break};
483 
484                 \textcolor{keywordflow}{case} RPL\_ENDOFNAMES: \textcolor{comment}{//366}
485                         g\_print(\textcolor{stringliteral}{"Mensaje recibido en RPL\_ENDOFNAMES: \(\backslash\)n"});
486                         \textcolor{comment}{//long IRCParse\_RplEndOfNames (char *strin, char **prefix, char **nick, char
       **channel, char **msg)}
487                         ret = IRCParse\_RplEndOfNames(message, &prefix, &nick2, &channel, &msg);
488                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
489                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_ENDOFNAMES -
       IRCParse\_RplEndOfNames devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
490                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
491                         \}
492                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
493                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
494                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);                                                 
495                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
496                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
497 
498                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(channel,"*",msg);}
499                         \textcolor{keywordflow}{break};
500 
501                 \textcolor{keywordflow}{case} JOIN:
502                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] JOIN - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
503                         g\_print(\hyperlink{types_8h_af54a5a977c0c499323d656315f008ee0}{MAG} \textcolor{stringliteral}{"\(\backslash\)nJOIN es %ld con IRC\_CommandQuery\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, IRC\_CommandQuery(message));
504                         g\_print(\hyperlink{types_8h_af54a5a977c0c499323d656315f008ee0}{MAG} \textcolor{stringliteral}{"\(\backslash\)nJOIN es %ld con IRCUser\_CommandQuery\(\backslash\)n"} RESET, 
      IRCUser\_CommandQuery(message));
505 
506                         ret = IRCParse\_Join (message, &prefix, &channel, &key, &msg);
507                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
508                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: JOIN - IRCParse\_Join devolvio
       error\(\backslash\)n"} RESET);
509                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
510                         \}
511                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_Join: \(\backslash\)n"});
512                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
513                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
514                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
515                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t key: %s \(\backslash\)n"},key);
516                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
517 
518                         IRCInterface\_AddNewChannelThread(msg, 0);
519                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
520                         sprintf(mensaje, \textcolor{stringliteral}{"%s (%s) se ha unido al canal"}, nick\_part, prefix);
521                         \textcolor{keywordflow}{if}(!strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, nick\_part))\{
522                                 IRCInterface\_WriteChannelThread(msg,\textcolor{stringliteral}{"*"}, \textcolor{stringliteral}{"Bienvenido al canal"});
523                         \} \textcolor{keywordflow}{else} \{
524                                 IRCInterface\_WriteChannelThread(msg,\textcolor{stringliteral}{"*"}, mensaje);
525                         \}
526                         \textcolor{comment}{//Actualizar al lista de usuarios}
527                         sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},msg);
528                         retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
529                         \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
530                                 g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
531                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
532                         \}
533                         \textcolor{keywordflow}{break};
534 
535                 \textcolor{keywordflow}{case} NAMES:
536                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NAMES - message = %s\(\backslash\)n"} RESET, message);
537                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)nNo hay nada aquí, revisar (?)"} RESET);
538                         \textcolor{keywordflow}{break};
539 
540                 \textcolor{keywordflow}{case} PRIVMSG:
541                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PRIVMSG - message = %s\(\backslash\)n"} RESET, message);
542                         ret = IRCParse\_Privmsg(message, &prefix, &msgtarget, &msg);
543                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
544                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: IRCParse\_Privmsg devolvio !=
       IRC\_OK"} RESET);
545                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
546                         \}
547                         \textcolor{comment}{//>> :gomupo!~gonzalo@119.181.218.87.dynamic.jazztel.es PRIVMSG gon :hola}
548                         \textcolor{keywordflow}{if} ((origin\_nick = strtok(prefix, \textcolor{stringliteral}{"!"})) != NULL)\{
549                                 strcpy(nick\_privmsg, origin\_nick);
550                         \}
551                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick\_privmsg: %s \(\backslash\)n"},nick\_privmsg);
552                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
553                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msgtarget: %s \(\backslash\)n"},msgtarget);
554                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
555 
556                         \textcolor{keywordflow}{if}(msg[0] == 1 || (msg[0] == \textcolor{charliteral}{':'} || msg[1] == 1)) \{ \textcolor{comment}{//envio de ficheros}
557                                 g\_print(\textcolor{stringliteral}{"alguien quiere enviarme un fichero\(\backslash\)n"});
558                                 \textcolor{comment}{//char *msg = "\(\backslash\)001FSEND gato.jpg ~cgs@cliente168.wlan.uam.es 1234 24422";}
559                                 
560                                 filename = strtok(msg, \textcolor{stringliteral}{" "});
561                                 filename = strtok(NULL, \textcolor{stringliteral}{" "});
562                                 hostname\_destino = strtok(NULL, \textcolor{stringliteral}{" "});
563                                 port = (\textcolor{keywordtype}{unsigned} long) atol(strtok(NULL, \textcolor{stringliteral}{" "}));
564                                 length = (\textcolor{keywordtype}{unsigned} long) atol(strtok(NULL, \textcolor{stringliteral}{" "}));
565                                 g\_print(\textcolor{stringliteral}{"filename: %s \(\backslash\)n"},filename);
566                                 g\_print(\textcolor{stringliteral}{"hostname\_destino: %s \(\backslash\)n"},hostname\_destino);
567                                 g\_print(\textcolor{stringliteral}{"length: %ld \(\backslash\)n"},length);
568                                 g\_print(\textcolor{stringliteral}{"port: %ld \(\backslash\)n"},port);
569 
570                                 \textcolor{keywordflow}{if}(IRCInterface\_ReceiveDialogThread(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, filename) == TRUE)\{
571                                         g\_print(\textcolor{stringliteral}{"Lanzamos el hilo que guarda el archivo\(\backslash\)n"});
572                                         \textcolor{comment}{//pthread\_t tid;}
573 
574                                         \hyperlink{struct_file__args}{File\_args} args;
575                                         args.\hyperlink{struct_file__args_a9aa177aea3a099397a09131a92f30115}{hostname} = hostname\_destino;
576                                         args.\hyperlink{struct_file__args_ad24dfcb255f29ee677793a0051c7336b}{filename} = filename;
577                                         args.\hyperlink{struct_file__args_a83e78eb2ebacdc7e63eca61d1340fa61}{port} = port;
578                                         args.\hyperlink{struct_file__args_a3168e8734e7ad263d88a6da49b4aff20}{length} = length;
579 
580                                         \textcolor{keywordflow}{if}(pthread\_create( &\hyperlink{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}{sendf\_tid}, NULL, (\textcolor{keywordtype}{void}*) 
      \hyperlink{aux__functions_8h_a9a7f9a514711f5954007dc83533d9362}{save\_file}, (\textcolor{keywordtype}{void}*) &args) < 0)\{
581                                         g\_print(\textcolor{stringliteral}{"Error en la llamada a save\_file\(\backslash\)n"});
582                                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
583                                         \}
584                                         \textcolor{keywordflow}{break};
585                                 \}
586                                 \textcolor{comment}{/*}
587 \textcolor{comment}{                                if (sscanf(msg, "\(\backslash\)001AUDIOCHAT %ms %li", &hostname\_destino, &port) > 0) \{}
588 \textcolor{comment}{                                        g\_print("host=%s, port=%li\(\backslash\)n", hostname\_destino, port);}
589 \textcolor{comment}{                                \} else\{}
590 \textcolor{comment}{                                        g\_print("Formato incorrecto en envio de fichero\(\backslash\)n");}
591 \textcolor{comment}{                                \}*/}
592                                 ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command, strlen(
      command));
593                                 \textcolor{keywordflow}{if}(ret < 0)\{
594                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case PRIVMSG -
       enviarDatos() devolvio error (ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} RESET);
595                                         exit(1);
596                                 \}
597                                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout }
598                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case PRIVMSG -
       enviarDatos() mandó 0 Bytes(ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)t(Timeout de conexión probablemente)\(\backslash\)n"} RESET);
599                                         exit(1);
600                                 \}
601                         \}
602 
603                         \textcolor{keywordflow}{if}(msgtarget[0] != \textcolor{charliteral}{'#'})\{\textcolor{comment}{//no grupo}
604                                 IRCInterface\_AddNewChannelThread(nick\_privmsg, 0);                              
605                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (nick\_privmsg, nick\_privmsg, msg);
606                                 \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
607                         \}
608 
609                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(msgtarget, nick\_privmsg, msg);}
610                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      msgtarget, nick\_privmsg, msg);
611                         \textcolor{keywordflow}{break};
612 
613                 \textcolor{keywordflow}{case} PART:
614                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PART - message = %s\(\backslash\)n"} RESET, message);
615                         ret = IRCParse\_Part (message, &prefix, &channel, &msg);
616                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
617                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case PART - IRCParse\_Part
       devolvio != IRC\_OK"} RESET);
618                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
619                         \}
620                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_PART: \(\backslash\)n"});
621                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
622                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
623                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
624                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
625 
626                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
627                         IRCInterface\_DeleteNickChannelThread(channel, nick\_part);
628                         sprintf(mensaje, \textcolor{stringliteral}{"El usuario %s ha salido del grupo (%s)"},nick\_part, msg);
629                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
630                         \textcolor{keywordflow}{if}(strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, nick\_part) == 0)\{
631                                 IRCInterface\_RemoveChannelThread(channel);
632                         \} \textcolor{keywordflow}{else} \{
633                                 sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channel);
634                                 retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
635                                 \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
636                                         g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
637                                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
638                                 \}
639                         \}
640 
641                         \textcolor{keywordflow}{break};
642 
643                 \textcolor{keywordflow}{case} NOTICE:
644                         \textcolor{comment}{//g\_print("\(\backslash\)n=======CASE NOTICE=======\(\backslash\)n");}
645                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NOTICE - message = %s\(\backslash\)n"} RESET, message);
646 
647                         IRCParse\_Notice(message, &prefix, &msgtarget, &msg);
648 
649                         g\_print(\textcolor{stringliteral}{"prefix = %s\(\backslash\)n"}, prefix);
650                         g\_print(\textcolor{stringliteral}{"msgtarget = %s\(\backslash\)n"}, msgtarget);
651                         g\_print(\textcolor{stringliteral}{"msg = %s\(\backslash\)n"}, msg);
652 
653                         \textcolor{comment}{//comentado de momento, se asume que es 'NOTICE AUTH'}
654                         \textcolor{comment}{/*}
655 \textcolor{comment}{                        if((!strcmp(msgtarget, nick\_user)) && (strcmp(prefix,"irc.eps.net") != 0)) \{}
656 \textcolor{comment}{                                IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part,
       &server\_part);                         }
657 \textcolor{comment}{                                sprintf(mensaje, ">%s<", nick\_part);}
658 \textcolor{comment}{                                IRCInterface\_AddNewChannelThread(nick\_part, 0);}
659 \textcolor{comment}{                                IRCInterface\_WriteChannelThread (nick\_part,mensaje,msg);}
660 \textcolor{comment}{                        \} else if(msgtarget[0] == '#')\{}
661 \textcolor{comment}{                                IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part,
       &server\_part);}
662 \textcolor{comment}{                                sprintf(mensaje, ">%s/%s<", nick\_part, msgtarget);}
663 \textcolor{comment}{                                IRCInterface\_AddNewChannelThread(msgtarget, 0);}
664 \textcolor{comment}{                                IRCInterface\_WriteChannelThread (msgtarget,mensaje,msg);}
665 \textcolor{comment}{                        \} else \{//AUTH                  }
666 \textcolor{comment}{                                IRCInterface\_WriteSystemThread ("*",msg);}
667 \textcolor{comment}{                        \}}
668 \textcolor{comment}{                        */}
669                         \textcolor{comment}{//IRCInterface\_WriteSystemThread("*",msg);}
670                         \textcolor{keywordflow}{break};
671 
672                 \textcolor{keywordflow}{case} PING:
673                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PING - message = %s\(\backslash\)n"} RESET, message);
674                         \textcolor{comment}{//:irc.eps.net PONG irc.eps.net :LAG1460877705692323}
675                         IRCParse\_Ping (message, &prefix, &server, &server2, &msg);
676                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
677                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server: %s \(\backslash\)n"},server);
678                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server2: %s \(\backslash\)n"},server2);
679                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
680                         IRCMsg\_Pong(&command\_pong, prefix?prefix:\hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname}, server?server:\textcolor{stringliteral}{""}, 
      server2?server2:\textcolor{stringliteral}{""}, msg?msg:\textcolor{stringliteral}{""});
681                         \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command\_pong, strlen(command\_pong));
682                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Pong enviado\(\backslash\)n"} RESET);
683                         IRCInterface\_PlaneRegisterOutMessageThread(command\_pong);
684                         \textcolor{keywordflow}{break};
685 
686                 \textcolor{keywordflow}{case} KICK:
687                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] KICK - message = %s\(\backslash\)n"} RESET, message);
688                         \textcolor{comment}{//long IRCParse\_Kick (char *strin, char **prefix, char **channel, char **user, char
       **comment)}
689 
690                         ret = IRCParse\_Kick(message, &prefix, &channel, &user, &comment);
691                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
692                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case KICK - IRCParse\_Kick
       devolvio != IRC\_OK"} RESET);
693                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
694                         \}
695                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
696                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
697                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
698                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n"},user);
699                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t comment: %s \(\backslash\)n\(\backslash\)n"},comment);
700 
701                         sprintf(mensaje,\textcolor{stringliteral}{"%s Ha sido echado de %s con mensaje/motivo(%s)"},user, channel, 
      comment);
702                         
703                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
704                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
705 
706                         \textcolor{comment}{//Actualizar al lista de usuarios}
707                         IRCInterface\_DeleteNickChannelThread (channel, user);
708                         \textcolor{keywordflow}{if}(!strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},user))\{
709                                 IRCInterface\_RemoveChannelThread(channel);
710                         \}
711                         \textcolor{comment}{/*memset(mensaje,0,MAXDATA);}
712 \textcolor{comment}{                        sprintf(mensaje,"/names %s",channel);}
713 \textcolor{comment}{                        retorno = punames(mensaje);}
714 \textcolor{comment}{                        if(retorno == ERR)\{}
715 \textcolor{comment}{                                g\_print("ERROR - MODE - punames");}
716 \textcolor{comment}{                                return ERR;                             }
717 \textcolor{comment}{                        \} */}
718                         \textcolor{keywordflow}{break};
719 
720                 \textcolor{keywordflow}{case} ERR\_UNKNOWNMODE: \textcolor{comment}{//472}
721                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_UNKNOWNMODE - message = %s\(\backslash\)n"} RESET, 
      message);
722                         \textcolor{comment}{//      long IRCParse\_ErrUnknownMode (char *strin, char **prefix, char **nick, char
       **modechar, char **channel, char **msg)}
723                         ret = IRCParse\_ErrUnknownMode(message, &prefix, &nick, &modechar, &channel, &msg);
724                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
725                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case ERR\_UNKNOWNMODE -
       IRCParse\_ErrUnknownMode != IRC\_OK"} RESET);
726                                 \textcolor{comment}{//return -1;}
727                         \}
728                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_ErrUnknownMode: \(\backslash\)n"});
729                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
730                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
731                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
732                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t modechar: %s \(\backslash\)n"},nick);                                             
733                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
734                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);         
735 
736                         sprintf(mensaje,\textcolor{stringliteral}{"%s %s\(\backslash\)n"},channel,msg);
737                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
738                         \textcolor{keywordflow}{break};
739 
740                 \textcolor{keywordflow}{case} MODE: \textcolor{comment}{//}
741                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] MODE - message = %s\(\backslash\)n"} RESET, message);
742                         \textcolor{comment}{//    long IRCParse\_Mode (char *strin, char **prefix, char **channeluser, char
       **mode, char **user)}
743                         ret = IRCParse\_Mode(message, &prefix, &channeluser, &mode, &user);
744                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
745                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case MODE - IRCParse\_Mode !=
       IRC\_OK"} RESET);
746                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
747                         \}
748                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
749                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
750                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channeluser: %s \(\backslash\)n"},channeluser);
751                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t mode: %s \(\backslash\)n"},mode);
752                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n\(\backslash\)n"},user);
753 
754                         nick = strtok(prefix,\textcolor{stringliteral}{"!"}); \textcolor{comment}{//Coger el usuario que ha mandando el mode}
755                         \textcolor{keywordflow}{if}(user != NULL)\{ \textcolor{comment}{//Modo usuario}
756                                 \textcolor{comment}{//Comprobar si es k o l }
757                                 \textcolor{keywordflow}{if}(strcasecmp(mode,\textcolor{stringliteral}{"+k"}) == 0)\{
758                                         sprintf(mensaje,\textcolor{stringliteral}{"%s establece contraseña del canal %s como: %s "},
      nick, channeluser, user);
759                                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
760                                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
761                                         \textcolor{keywordflow}{break};          
762                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcasecmp(mode,\textcolor{stringliteral}{"+l"}) == 0)\{
763                                         sprintf(mensaje,\textcolor{stringliteral}{"%s establece límite del canal %s a %s usuarios"},
      nick, channeluser, user);
764                                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
765                                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
766                                         \textcolor{keywordflow}{break};                                          
767                                 \}
768 
769                                 sprintf(mensaje,\textcolor{stringliteral}{"%s establece el modo %s al usuario %s en el canal %s "},
      nick, mode, user, channeluser);
770                                 g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
771                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
772 
773                                 \textcolor{comment}{/* No funciona IRCInterface\_ChangeNickStateChannel :(}
774 \textcolor{comment}{                                if(strcasecmp(mode,"+o") == 0)\{}
775 \textcolor{comment}{                                        g\_print("modo op\(\backslash\)n");}
776 \textcolor{comment}{                                        IRCInterface\_ChangeNickStateChannel (channeluser, nick, OPERATOR);}
777 \textcolor{comment}{                                \}else if(strcasecmp(mode,"+v") == 0)\{}
778 \textcolor{comment}{                                        g\_print("modo voice\(\backslash\)n");}
779 \textcolor{comment}{                                        IRCInterface\_ChangeNickStateChannel (channeluser, nick, VOICE);}
780 \textcolor{comment}{                                \}else\{}
781 \textcolor{comment}{                                        g\_print("else otro modo\(\backslash\)n");*/}
782                                         \textcolor{comment}{//Actualizar al lista de usuarios}
783                                         
784                                         memset(mensaje,0,\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA});
785                                         sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channeluser);
786                                         retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
787                                         \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
788                                                 g\_print(\textcolor{stringliteral}{"ERROR - MODE - punames"});
789                                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
790                                         \}                                       
791                                 \textcolor{comment}{//\}                             }
792                         \}\textcolor{keywordflow}{else}\{
793                                 sprintf(mensaje,\textcolor{stringliteral}{"%s establece modo %s %s "}, nick, channeluser, mode);
794                                 g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
795                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
796                         \}                       
797                         \textcolor{keywordflow}{break};
798 
799                 \textcolor{keywordflow}{case} INVITE:                    
800                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] INVITE - message = %s\(\backslash\)n"} RESET, message);
801                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      message);
802                         \textcolor{keywordflow}{break};
803 
804                 \textcolor{keywordflow}{case} NICK:
805                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NICK - message = %s\(\backslash\)n"} RESET, message);
806                         \textcolor{comment}{//<< NICK gomupo2}
807                         \textcolor{comment}{//>> :gomupo!~gonzalo@cliente020.wlan.uam.es NICK :gomupo2}
808                         IRCParse\_Nick (message, &prefix, &nick, &msg);
809                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
810                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
811                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
812                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick); \textcolor{comment}{//esta a null}
813                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg); \textcolor{comment}{//el nick viene aqui}
814                         IRCInterface\_ChangeNickThread(nick\_part, msg);
815                         sprintf(mensaje, \textcolor{stringliteral}{"%s ahora es conocido como %s"}, nick\_part, msg);
816                         \textcolor{keywordflow}{if}(!strcmp(nick\_part, \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}))\{
817                                 strcpy(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},msg);                 
818                         \}
819                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);    
820                         g\_print(\textcolor{stringliteral}{"new nick: %s\(\backslash\)n"}, msg);
821 
822                         \textcolor{keywordflow}{break};
823 
824                 \textcolor{keywordflow}{case} QUIT:
825                         \textcolor{comment}{/*}
826 \textcolor{comment}{                        * Enfoque 1: Cuando alguien sale (QUIT del servidor)}
827 \textcolor{comment}{                        *       Obtener la lista de canales abiertos -> '/names' en cada canal -> Capturar
       reply del servidor:}
828 \textcolor{comment}{                        *       353 -> interface\_mostrar\_nicks(channel,msg); (se actualizan todas las
       listas de chats abiertos)}
829 \textcolor{comment}{                        *}
830 \textcolor{comment}{                        */}
831                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] QUIT - message = %s\(\backslash\)n"} RESET, message);
832                         
833                         IRCParse\_Quit (message, &prefix, &msg);
834                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
835                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
836                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
837                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg);
838                         sprintf(mensaje, \textcolor{stringliteral}{"%s se ha desconectado (%s)"}, nick\_part, msg);
839                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},mensaje);
840 
841                         IRCInterface\_ListAllChannelsThread(&channelsQuit, &numChannelsQuit);
842 
843                         \textcolor{keywordflow}{for}(i=0; i<numChannelsQuit; i++)\{
844                                 sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channelsQuit[i]);
845                                 retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
846                                 \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
847                                         g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
848                                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
849                                 \}
850                         \}
851                         \textcolor{keywordflow}{break};
852 
853                 \textcolor{keywordflow}{case} RPL\_CHANNELMODEIS: \textcolor{comment}{//324   }
854                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_CHANNELMODEIS - message = %s\(\backslash\)n"} RESET, 
      message);
855                         \textcolor{comment}{//long IRCParse\_RplChannelModeIs(char *strin, char **prefix, char **nick, char
       **channel, char **modetxt)}
856                         \textcolor{comment}{/*ret = IRCParse\_RplChannelModeIs(message, &prefix, &channeluser, &mode, &user);}
857 \textcolor{comment}{                        if(ret != IRC\_OK)\{}
858 \textcolor{comment}{                                g\_print("ERROR: IRCInterface\_Connect - IRCParse\_RplTopic\(\backslash\)n");}
859 \textcolor{comment}{                                return ERR;}
860 \textcolor{comment}{                        \}}
861 \textcolor{comment}{                        g\_print("\(\backslash\)t message: %s \(\backslash\)n",message);}
862 \textcolor{comment}{                        g\_print("\(\backslash\)t prefix: %s \(\backslash\)n",prefix);}
863 \textcolor{comment}{                        g\_print("\(\backslash\)t channeluser: %s \(\backslash\)n",channeluser);}
864 \textcolor{comment}{                        g\_print("\(\backslash\)t mode: %s \(\backslash\)n",mode);}
865 \textcolor{comment}{                        g\_print("\(\backslash\)t user: %s \(\backslash\)n\(\backslash\)n",user);}
866 \textcolor{comment}{}
867 \textcolor{comment}{                        sprintf(mensaje,"%s establece modo %s %s ", user, channeluser, mode);}
868 \textcolor{comment}{                        }
869 \textcolor{comment}{                        g\_print("Mensaje: %s \(\backslash\)n",mensaje);}
870 \textcolor{comment}{                        IRCInterface\_WriteChannelThread(channeluser,"*",mensaje);*/}
871 
872                         \textcolor{comment}{//Actualizar al lista de usuarios}
873                         \textcolor{keywordflow}{break};  
874 
875                 \textcolor{keywordflow}{case} ERR\_CHANOPRIVSNEEDED: \textcolor{comment}{//482}
876                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_CHANOPRIVSNEEDED - message = %s\(\backslash\)n"} RESET,
       message);
877                         \textcolor{comment}{//   long IRCParse\_ErrChanOPrivsNeeded (char *strin, char **prefix, char **nick,
       char **channel, char **msg)}
878                         ret = IRCParse\_ErrChanOPrivsNeeded(message, &prefix, &nick, &channel, &msg);
879                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
880                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case ERR\_CHANOPRIVSNEEDED -
       IRCParse\_ErrChanOPrivsNeeded != IRC\_OK"} RESET);
881                                 \textcolor{comment}{//return ERR;}
882                         \}
883                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_ErrChanOPrivsNeeded: \(\backslash\)n"});
884                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
885                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
886                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);                 
887                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
888                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);         
889 
890                         sprintf(mensaje,\textcolor{stringliteral}{"%s %s\(\backslash\)n"},channel,msg);
891                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
892                         \textcolor{keywordflow}{break};
893 
894                 \textcolor{comment}{/*TRATAMIENTO DE ERRORES*/}
895                 \textcolor{keywordflow}{case} IRCERR\_NOCOMMAND:
896                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: Mensaje de error recibido en switch():
      \(\backslash\)n\(\backslash\)tIRCERR\_NOCOMMAND -  no hay ningún comando en la cadena de caracteres\(\backslash\)n"} RESET);
897                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
898                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
899 
900                 \textcolor{keywordflow}{case} IRCERR\_NOPARAMS:
901                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: Mensaje de error recibido en switch():
      \(\backslash\)n\(\backslash\)tIRCERR\_NOPARAMS -  se ha introducido una cadena de caracteres nula\(\backslash\)n"} RESET);
902                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
903                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
904 
905                 \textcolor{keywordflow}{case} IRCERR\_UNKNOWNCOMMAND:
906                         \textcolor{comment}{//g\_print(MAG"\(\backslash\)n>>>>>>>>>>>>>>>>>>>>>>>>>>\(\backslash\)n"RESET);}
907                         \textcolor{comment}{//ret =  IRCParse\_GeneralCommand (message, &prefix, &type, &params, &n\_params,
       &msg);}
908                         \textcolor{comment}{/*Intenta hacer un parseo apra un type no soportado por IRC\_CommandQuery()*/}
909                         unknw\_type = \hyperlink{aux__functions_8h_a90798d5fe15fdd743f8802b0f154b854}{parse\_type}(message);
910                         \textcolor{keywordflow}{if}(unknw\_type != \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
911                                 \textcolor{keywordflow}{switch}(unknw\_type)\{ \textcolor{comment}{//Intentar tratar un mensaje no reconocido por
       IRC\_CommandQuery() }
912                                         \textcolor{keywordflow}{case} 250:
913                                                 g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] unknw\_type = 250 -
       message = %s\(\backslash\)n"} RESET, message);
914                                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
915                                                 \textcolor{keywordflow}{if} (substring)\{
916                                                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
917                                                 \}
918                                                 
      \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},substring);
919 
920                                                 substring = NULL;
921                                         \textcolor{keywordflow}{break};
922 
923                                         \textcolor{keywordflow}{default}:
924                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: case
       IRCERR\_UNKNOWNCOMMAND:\(\backslash\)n\(\backslash\)tNo se ha definido un tratamiento para un mensaje desconocido con type = %d\(\backslash\)n"} RESET, unknw\_type);
925                                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
926                                         \textcolor{keywordflow}{break};
927                                 \}
928                                 \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
929                         \}
930 
931                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: Mensaje de error recibido en switch():\(\backslash\)n\(\backslash\)t
      IRCERR\_UNKNOWNCOMMAND -  l comando que contiene no es reconocido por esta función.\(\backslash\)n"} RESET);
932                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
933                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
934 
935                 \textcolor{keywordflow}{default}:
936                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: Alcanzado default del switch()(TO\_DO):\(\backslash\)n\(\backslash\)t
       %s\(\backslash\)n"} RESET, message);
937                         \textcolor{comment}{//sprintf(aux,"[%s] %s",gmtime(time(NULL)), nick)}
938                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
939                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
940         \}
941 
942         \textcolor{comment}{//Liberamos memoria}
943         \textcolor{comment}{//
      mfree(33,msg,nick,nick2,servername,versionname,timedate,version,availableusermodes,availablechannelmodes,addedg,type,visible,topic,channel,key,}
944         \textcolor{comment}{//
      msgtarget,origin\_nick,filename,hostname\_destino,nick\_part,username\_part,host\_part,server\_part,server,server2,command\_pong,token,modechar,channeluser,}
945         \textcolor{comment}{//mode,user,comment,realname,host);}
946         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
947 
948 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 1


\index{xchat2.\+c@{xchat2.\+c}!glue\+And\+Query@{glue\+And\+Query}}
\index{glue\+And\+Query@{glue\+And\+Query}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{glue\+And\+Query(char $\ast$command, char $\ast$last\+\_\+command)}{glueAndQuery(char *command, char *last_command)}}]{\setlength{\rightskip}{0pt plus 5cm}void glue\+And\+Query (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command, }
\item[{char $\ast$}]{last\+\_\+command}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{}\label{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}

\begin{DoxyCode}
950                                                     \{
951         \textcolor{keywordtype}{char}* glued\_command = (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
952         
953         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
954         strcat(glued\_command, command);
955 
956         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
957         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
958 
959         free(command);
960         free(glued\_command);
961 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 2


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+Channel\+Key@{I\+R\+C\+Interface\+\_\+\+Activate\+Channel\+Key}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+Channel\+Key@{I\+R\+C\+Interface\+\_\+\+Activate\+Channel\+Key}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+Channel\+Key(char $\ast$channel, char $\ast$key)}{IRCInterface_ActivateChannelKey(char *channel, char *key)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+Channel\+Key (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{key}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a33f80a29a744e4182b29e23f13c1f05c}{}\label{xchat2_8c_a33f80a29a744e4182b29e23f13c1f05c}

\begin{DoxyCode}
1169 \{
1170         \textcolor{keywordtype}{char} \hyperlink{_g-2361-06-_p1-_server_8c_a7451f0d59207b53af6178219fcf62677}{modo}[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
1171 
1172         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateChannelKey(char *channel, char *key) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1173 
1174         sprintf(modo,\textcolor{stringliteral}{"+k %s"},\hyperlink{_g-2361-06-_p1-_server_8c_a5892a9181e6a332f84d27aecd41dcd12}{key});
1175         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, modo) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1176                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateChannelKey: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1177 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 3


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+External\+Messages@{I\+R\+C\+Interface\+\_\+\+Activate\+External\+Messages}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+External\+Messages@{I\+R\+C\+Interface\+\_\+\+Activate\+External\+Messages}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+External\+Messages(char $\ast$channel)}{IRCInterface_ActivateExternalMessages(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+External\+Messages (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a7a439929c246e342ae525139b2c39f5d}{}\label{xchat2_8c_a7a439929c246e342ae525139b2c39f5d}

\begin{DoxyCode}
1210 \{
1211         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateExternalMessages(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1212         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"+n"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1213                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateExternalMessages: Error en changeMode,
       devolvió ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1214 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 4


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+Invite@{I\+R\+C\+Interface\+\_\+\+Activate\+Invite}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+Invite@{I\+R\+C\+Interface\+\_\+\+Activate\+Invite}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+Invite(char $\ast$channel)}{IRCInterface_ActivateInvite(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+Invite (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ac72762ab1e3575b421b967241db23f9c}{}\label{xchat2_8c_ac72762ab1e3575b421b967241db23f9c}

\begin{DoxyCode}
1247 \{
1248         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateInvite(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1249         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"+i"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1250                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateInvite: Error en changeMode, devolvió ERR\(\backslash\)n
      "} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1251 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 5


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+Moderated@{I\+R\+C\+Interface\+\_\+\+Activate\+Moderated}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+Moderated@{I\+R\+C\+Interface\+\_\+\+Activate\+Moderated}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+Moderated(char $\ast$channel)}{IRCInterface_ActivateModerated(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+Moderated (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_af83498f4058311f4562c43a9b70566b2}{}\label{xchat2_8c_af83498f4058311f4562c43a9b70566b2}

\begin{DoxyCode}
1284 \{
1285         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateModerated(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1286 
1287         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"+m"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1288                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateModerated: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1289 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 6


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+Nicks\+Limit@{I\+R\+C\+Interface\+\_\+\+Activate\+Nicks\+Limit}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+Nicks\+Limit@{I\+R\+C\+Interface\+\_\+\+Activate\+Nicks\+Limit}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+Nicks\+Limit(char $\ast$channel, int limit)}{IRCInterface_ActivateNicksLimit(char *channel, int limit)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+Nicks\+Limit (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{int}]{limit}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ab5694cc413472173bfcaa969c7d9800e}{}\label{xchat2_8c_ab5694cc413472173bfcaa969c7d9800e}

\begin{DoxyCode}
1325 \{
1326         \textcolor{keywordtype}{char} mode[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
1327 
1328         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateNicksLimit(char *channel, int limit) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1329 
1330         sprintf(mode,\textcolor{stringliteral}{"+l %d"},limit);
1331         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, mode) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1332                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateNicksLimit: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1333 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 7


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+Private@{I\+R\+C\+Interface\+\_\+\+Activate\+Private}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+Private@{I\+R\+C\+Interface\+\_\+\+Activate\+Private}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+Private(char $\ast$channel)}{IRCInterface_ActivatePrivate(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+Private (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ab1f09c737c7c109a97e22de6072d731d}{}\label{xchat2_8c_ab1f09c737c7c109a97e22de6072d731d}

\begin{DoxyCode}
1366 \{
1367         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivatePrivate(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1368         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"+p"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1369                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivatePrivate: Error en changeMode, devolvió ERR
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1370 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 8


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+Protect\+Topic@{I\+R\+C\+Interface\+\_\+\+Activate\+Protect\+Topic}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+Protect\+Topic@{I\+R\+C\+Interface\+\_\+\+Activate\+Protect\+Topic}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+Protect\+Topic(char $\ast$channel)}{IRCInterface_ActivateProtectTopic(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+Protect\+Topic (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ac45f12d4dcacf3b5485eec6fdc51df93}{}\label{xchat2_8c_ac45f12d4dcacf3b5485eec6fdc51df93}

\begin{DoxyCode}
1403 \{
1404         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateProtectTopic(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1405         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"+t"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1406                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateProtectTopic: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1407 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 9


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Activate\+Secret@{I\+R\+C\+Interface\+\_\+\+Activate\+Secret}}
\index{I\+R\+C\+Interface\+\_\+\+Activate\+Secret@{I\+R\+C\+Interface\+\_\+\+Activate\+Secret}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Activate\+Secret(char $\ast$channel)}{IRCInterface_ActivateSecret(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Activate\+Secret (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_aa9e9155115b834d85a4d10cb27f99093}{}\label{xchat2_8c_aa9e9155115b834d85a4d10cb27f99093}

\begin{DoxyCode}
1440 \{
1441         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateSecret(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1442 
1443         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"+s"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1444                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateSecret: Error en changeMode, devolvió ERR\(\backslash\)n
      "} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1445 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 10


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Ban\+Nick@{I\+R\+C\+Interface\+\_\+\+Ban\+Nick}}
\index{I\+R\+C\+Interface\+\_\+\+Ban\+Nick@{I\+R\+C\+Interface\+\_\+\+Ban\+Nick}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Ban\+Nick(char $\ast$channel, char $\ast$nick)}{IRCInterface_BanNick(char *channel, char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Ban\+Nick (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a42773b5a840f9d0455f148d285e1e595}{}\label{xchat2_8c_a42773b5a840f9d0455f148d285e1e595}

\begin{DoxyCode}
1480 \{
1481         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_BanNick(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1482 
1483         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, \hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, \textcolor{stringliteral}{"+b"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1484                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_BanNick: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1485 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 11


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Connect@{I\+R\+C\+Interface\+\_\+\+Connect}}
\index{I\+R\+C\+Interface\+\_\+\+Connect@{I\+R\+C\+Interface\+\_\+\+Connect}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Connect(char $\ast$nick, char $\ast$user, char $\ast$realname, char $\ast$password, char $\ast$server, int port, boolean ssl)}{IRCInterface_Connect(char *nick, char *user, char *realname, char *password, char *server, int port, boolean ssl)}}]{\setlength{\rightskip}{0pt plus 5cm}long I\+R\+C\+Interface\+\_\+\+Connect (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick, }
\item[{char $\ast$}]{user, }
\item[{char $\ast$}]{realname, }
\item[{char $\ast$}]{password, }
\item[{char $\ast$}]{server, }
\item[{int}]{port, }
\item[{boolean}]{ssl}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_aed072f4ce0d6e90697d4d6eb0278a2ad}{}\label{xchat2_8c_aed072f4ce0d6e90697d4d6eb0278a2ad}

\begin{DoxyCode}
1532 \{
1533         \textcolor{keywordtype}{int} optval = 1;
1534         \textcolor{keywordtype}{long} ret = -1;
1535         \textcolor{keywordtype}{int} retorno = -1;
1536         \textcolor{keywordtype}{char} *command = NULL;
1537         \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_ad2849cf781a4db22cc1b31eaaee50a4f}{prefix} = NULL;
1538         \textcolor{keywordtype}{int} sockfd = -1;
1539 
1540         \textcolor{keyword}{struct }hostent *he;
1541     \textcolor{keyword}{struct }in\_addr **addr\_list;
1542     \textcolor{keywordtype}{int} i=0;
1543     \textcolor{keywordtype}{char} ip\_addr[INET\_ADDRSTRLEN] = \{0\};
1544 
1545     \textcolor{keywordtype}{char} *msgNick = NULL;
1546     \textcolor{keywordtype}{char} mode[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
1547 
1548         g\_print(\textcolor{stringliteral}{"IRCInterface\_Connect - Datos introducidos por el usuario \(\backslash\)n"});
1549         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick});
1550         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n"},\hyperlink{_g-2361-06-_p1-_server_8c_a14871705f45ccdc5bb9f4549efd8e119}{user});
1551         g\_print(\textcolor{stringliteral}{"\(\backslash\)t realname: %s \(\backslash\)n"},\hyperlink{_g-2361-06-_p1-_server_8c_a980ab011cd3d327b370c042833f1dc08}{realname});
1552         g\_print(\textcolor{stringliteral}{"\(\backslash\)t password: %s \(\backslash\)n"},password);
1553         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server: %s \(\backslash\)n"},server);
1554         g\_print(\textcolor{stringliteral}{"\(\backslash\)t port: %d \(\backslash\)n"},port);
1555         g\_print(\textcolor{stringliteral}{"\(\backslash\)t ssl: %d \(\backslash\)n"},ssl);
1556 
1557     \textcolor{keywordflow}{if} ((he = gethostbyname(server)) == NULL) \{  \textcolor{comment}{// get the host info}
1558         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: gethostbyname() devol NULL\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1559         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1560     \}
1561 
1562     \textcolor{comment}{// print information about this host:}
1563     g\_print(\textcolor{stringliteral}{"Official name is: %s\(\backslash\)n"}, he->h\_name);
1564     g\_print(\textcolor{stringliteral}{"    IP addresses: "});
1565 
1566     addr\_list = (\textcolor{keyword}{struct }in\_addr **)he->h\_addr\_list;
1567     \textcolor{keywordflow}{for}(i = 0; addr\_list[i] != NULL; i++) \{
1568         strcat(ip\_addr,inet\_ntoa(*addr\_list[i]));
1569         g\_print(\textcolor{stringliteral}{"%s "}, inet\_ntoa(*addr\_list[i]));
1570     \}
1571     g\_print(\textcolor{stringliteral}{"\(\backslash\)n"});
1572     g\_print(\textcolor{stringliteral}{"ip\_addr: %s \(\backslash\)n"},ip\_addr);
1573 
1574     \textcolor{keyword}{struct }sockaddr\_in server\_struct;
1575 
1576     \textcolor{comment}{/*Socket*/}
1577     sockfd = socket(AF\_INET,SOCK\_STREAM,0\textcolor{comment}{/*TCP*/});
1578     \textcolor{keywordflow}{if} (sockfd == -1)\{
1579         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: Error creando socket, devolvió < 0\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1580         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1581     \}
1582 
1583     optval = 1;
1584     setsockopt(sockfd, SOL\_SOCKET, SO\_REUSEADDR, (\textcolor{keyword}{const} \textcolor{keywordtype}{void} *)&optval , \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})); \textcolor{comment}{//reutilizar socket
       sucesivas ejecuciones}
1585 
1586     memset(&server\_struct, \textcolor{charliteral}{'0'}, \textcolor{keyword}{sizeof}(server\_struct)); 
1587     server\_struct.sin\_family = AF\_INET;
1588     server\_struct.sin\_port = htons(port); 
1589     memset(&(server\_struct.sin\_zero), \textcolor{charliteral}{'\(\backslash\)0'}, 8);
1590     server\_struct.sin\_addr = **addr\_list; 
1591 
1592     \textcolor{comment}{/*Connect*/}
1593     \textcolor{keywordflow}{if} (connect(sockfd, (\textcolor{keyword}{struct} sockaddr*)&server\_struct, \textcolor{keyword}{sizeof}(server\_struct)) < 0)\{
1594         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: Error en connect(), devolivó < 0\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1595         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1596     \}
1597 
1598         \textcolor{comment}{//Conectarse al socket}
1599         \textcolor{comment}{//sockfd = clienteConexionTCP(ip\_addr,port);}
1600         \textcolor{keywordflow}{if}(sockfd == -1)\{
1601                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: sockfd == -1\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1602                 \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1603         \}\textcolor{keywordflow}{else}\{
1604                 g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Conexión establecida con host: %s y puerto: %d \(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, server, port);
1605         \}
1606 
1607         \textcolor{comment}{//Copiar los parametros a las variables globales}
1608         strcpy(\hyperlink{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{host\_name}, he->h\_name);
1609     strcpy(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},\hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick});
1610     \hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user} = sockfd;
1611 
1612         \textcolor{keywordflow}{if}(ssl == FALSE)\{
1613                 g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Lanzamos el hilo que recibe mensajes\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1614                 \textcolor{keywordflow}{if}((ret = pthread\_create( &\hyperlink{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{recv\_tid}, NULL, (\textcolor{keywordtype}{void}*) 
      \hyperlink{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}{receive\_messages}, (\textcolor{keywordtype}{void}*) \textcolor{stringliteral}{"no\_arg"})) != 0)\{
1615                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: pthread\_create() devolvio != 0, error = %d
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, (\textcolor{keywordtype}{int})ret);
1616                 \textcolor{comment}{//logERR("pthread\_detach() devolvio error");}
1617                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
1618                 \}
1619 
1620                 \textcolor{keywordflow}{if} (pthread\_detach(\hyperlink{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{recv\_tid}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
1621                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: pthread\_detach() devolvio error\(\backslash\)n"}
       \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1622                          \textcolor{comment}{//logERR("pthread\_detach() devolvio error");}
1623                          \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
1624                 \}
1625                 \textcolor{comment}{//sleep(5);}
1626                 \textcolor{comment}{//Prueba CAP}
1627                 \textcolor{comment}{/*}
1628 \textcolor{comment}{                retorno = enviarDatos(sockfd, "CAP LS 302", strlen("CAP LS 302")+1);}
1629 \textcolor{comment}{                if(retorno <= 0)\{}
1630 \textcolor{comment}{                        g\_print(RED "ERROR - In IRCInterface\_Connect: enviarDatos() envió %d Bytes -
       NICK\(\backslash\)n" RESET, retorno);}
1631 \textcolor{comment}{                        return IRCERR\_NOCONNECT;}
1632 \textcolor{comment}{                \}}
1633 \textcolor{comment}{                IRCInterface\_PlaneRegisterOutMessage(command);}
1634 \textcolor{comment}{                */}
1635 
1636                 \textcolor{comment}{//Enviar pass si existe}
1637                 \textcolor{keywordflow}{if}((password != NULL) && (strlen(password) > 0))\{ \textcolor{comment}{//Comprobar si hay password}
1638                         \textcolor{comment}{//Enviar mensaje al servidor con la pass}
1639                         ret = IRCMsg\_Pass (&command, prefix, password);
1640                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
1641                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: IRCMsg\_Pass devolvio
       IRCERR\_NOPASSWORD: No se ha introducido una clave.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1642                                 \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1643                         \}
1644                         g\_print(\textcolor{stringliteral}{"IRCMsg\_Pass: %s"},command);
1645                         retorno = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(sockfd, command, strlen(command));
1646                         \textcolor{keywordflow}{if}(retorno <= 0)\{
1647                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: enviarDatos() envió %d
       Bytes - PASS\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, retorno);
1648                                 \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1649                         \}
1650                         IRCInterface\_PlaneRegisterOutMessage(command); \textcolor{comment}{//Mandar a registro plano}
1651                         free(command);          
1652 
1653                 \}
1654 
1655                 \textcolor{comment}{//Enviar mensaje con el nick}
1656                 command = NULL;
1657                 ret = IRCMsg\_Nick (&command, prefix, \hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, msgNick);
1658                 
1659                 \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
1660                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: IRCMsg\_Nick() devolvio codigo de
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1661                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1662                 \}
1663                 g\_print(\textcolor{stringliteral}{"IRCMsg\_Nick: %s"},command);
1664 
1665                 retorno = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(sockfd, command, strlen(command));
1666                 \textcolor{comment}{//retorno = enviarDatos(sockfd, "NICK test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0", strlen("NICK test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0")+1);}
1667                 \textcolor{keywordflow}{if}(retorno <= 0)\{
1668                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: enviarDatos() envió %d Bytes -
       NICK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, retorno);
1669                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1670                 \}
1671                 IRCInterface\_PlaneRegisterOutMessage(command);
1672                 free(command);
1673                 
1674                 \textcolor{comment}{//mode}
1675                 \textcolor{comment}{//Enviar mensaje con el user}
1676                 strcpy(mode,\textcolor{stringliteral}{"0"});
1677                 command = NULL;
1678 
1679                 ret = IRCMsg\_User (&command, prefix, \hyperlink{_g-2361-06-_p1-_server_8c_a14871705f45ccdc5bb9f4549efd8e119}{user}, mode , \hyperlink{_g-2361-06-_p1-_server_8c_a980ab011cd3d327b370c042833f1dc08}{realname});
1680                 \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
1681                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: IRCMsg\_User() devolvio codigo de
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1682                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1683                 \}
1684                 g\_print(\textcolor{stringliteral}{"IRCMsg\_User: %s"},command);
1685 
1686                 retorno = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(sockfd, command, strlen(command));
1687                 \textcolor{comment}{//retorno = enviarDatos(sockfd, "USER test\_ 0 * :test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0", strlen("USER test\_ 0 *
       :test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0")+1);}
1688                 \textcolor{keywordflow}{if}(retorno <= 0)\{
1689                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: enviarDatos() envió %d Bytes -
       USER\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, retorno);
1690                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1691                 \}
1692                 IRCInterface\_PlaneRegisterOutMessage(command);
1693                 free(command);
1694                 
1695         \}\textcolor{keywordflow}{else}\{ \textcolor{comment}{//Fin del if de ssl = false}
1696                 \textcolor{keywordflow}{return} IRCERR\_NOSSL;
1697         \}
1698 
1699         \textcolor{keywordflow}{return} IRC\_OK;
1700 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 12


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+Channel\+Key@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Channel\+Key}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+Channel\+Key@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Channel\+Key}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+Channel\+Key(char $\ast$channel)}{IRCInterface_DeactivateChannelKey(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+Channel\+Key (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a3e67ee0cd384b524d57fda14593dce8e}{}\label{xchat2_8c_a3e67ee0cd384b524d57fda14593dce8e}

\begin{DoxyCode}
1734 \{
1735         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateChannelKey(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1736 
1737         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-k"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1738                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateChannelKey: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1739 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 13


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+External\+Messages@{I\+R\+C\+Interface\+\_\+\+Deactivate\+External\+Messages}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+External\+Messages@{I\+R\+C\+Interface\+\_\+\+Deactivate\+External\+Messages}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+External\+Messages(char $\ast$channel)}{IRCInterface_DeactivateExternalMessages(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+External\+Messages (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a638b1535f4ecbc9a6affb2df2a6a946e}{}\label{xchat2_8c_a638b1535f4ecbc9a6affb2df2a6a946e}

\begin{DoxyCode}
1772 \{
1773         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateExternalMessages(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1774 
1775         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-n"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1776                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateExternalMessages: Error en changeMode,
       devolvió ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1777 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 14


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+Invite@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Invite}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+Invite@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Invite}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+Invite(char $\ast$channel)}{IRCInterface_DeactivateInvite(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+Invite (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a9ba4e98a3729737aa63ebec54ba4e894}{}\label{xchat2_8c_a9ba4e98a3729737aa63ebec54ba4e894}

\begin{DoxyCode}
1810 \{
1811         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateInvite(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1812 
1813         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-i"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1814                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateInvite: Error en changeMode, devolvió ERR
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1815 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 15


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+Moderated@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Moderated}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+Moderated@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Moderated}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+Moderated(char $\ast$channel)}{IRCInterface_DeactivateModerated(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+Moderated (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ab760e8144b38f6c14bd809d157cee5d4}{}\label{xchat2_8c_ab760e8144b38f6c14bd809d157cee5d4}

\begin{DoxyCode}
1848 \{
1849         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateModerated(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1850 
1851         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-m"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1852                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateModerated: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1853 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 16


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+Nicks\+Limit@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Nicks\+Limit}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+Nicks\+Limit@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Nicks\+Limit}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+Nicks\+Limit(char $\ast$channel)}{IRCInterface_DeactivateNicksLimit(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+Nicks\+Limit (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a92c8cfbe2e14e19277e1c97d11719e80}{}\label{xchat2_8c_a92c8cfbe2e14e19277e1c97d11719e80}

\begin{DoxyCode}
1886 \{
1887         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateNicksLimit(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1888 
1889         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-l"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1890                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateNicksLimit: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1891 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 17


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+Private@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Private}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+Private@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Private}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+Private(char $\ast$channel)}{IRCInterface_DeactivatePrivate(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+Private (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a8a6141803691ba327f11ba763ad075d4}{}\label{xchat2_8c_a8a6141803691ba327f11ba763ad075d4}

\begin{DoxyCode}
1926 \{
1927         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivatePrivate(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1928 
1929         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-p"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1930                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivatePrivate: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1931 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 18


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+Protect\+Topic@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Protect\+Topic}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+Protect\+Topic@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Protect\+Topic}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+Protect\+Topic(char $\ast$channel)}{IRCInterface_DeactivateProtectTopic(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+Protect\+Topic (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a5a57541a950f8c2c40b4b44c32b28ed9}{}\label{xchat2_8c_a5a57541a950f8c2c40b4b44c32b28ed9}

\begin{DoxyCode}
1964 \{
1965         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateProtectTopic(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1966 
1967         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-t"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1968                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateProtectTopic: Error en changeMode,
       devolvió ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1969 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 19


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Deactivate\+Secret@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Secret}}
\index{I\+R\+C\+Interface\+\_\+\+Deactivate\+Secret@{I\+R\+C\+Interface\+\_\+\+Deactivate\+Secret}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Deactivate\+Secret(char $\ast$channel)}{IRCInterface_DeactivateSecret(char *channel)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Deactivate\+Secret (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a4956427664cabc7d5b2bd1589a207324}{}\label{xchat2_8c_a4956427664cabc7d5b2bd1589a207324}

\begin{DoxyCode}
2002 \{
2003         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateSecret(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2004 
2005         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, NULL, \textcolor{stringliteral}{"-s"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2006                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateSecret: Error en changeMode, devolvió ERR
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2007 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 20


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Disconnect\+Server@{I\+R\+C\+Interface\+\_\+\+Disconnect\+Server}}
\index{I\+R\+C\+Interface\+\_\+\+Disconnect\+Server@{I\+R\+C\+Interface\+\_\+\+Disconnect\+Server}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Disconnect\+Server(char $\ast$server, int port)}{IRCInterface_DisconnectServer(char *server, int port)}}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\+R\+C\+Interface\+\_\+\+Disconnect\+Server (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{server, }
\item[{int}]{port}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a8bf0424ef7f845be79a056e9aed56fe2}{}\label{xchat2_8c_a8bf0424ef7f845be79a056e9aed56fe2}

\begin{DoxyCode}
2044 \{
2045         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DisconnectServer(char *server, int port) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2046 
2047         \hyperlink{user__commands_8h_ad738a7d361fe18d7774bab370a4454a8}{puquit}(NULL);
2048 
2049         \textcolor{keywordflow}{return} TRUE;
2050 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 21


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Exit\+Audio\+Chat@{I\+R\+C\+Interface\+\_\+\+Exit\+Audio\+Chat}}
\index{I\+R\+C\+Interface\+\_\+\+Exit\+Audio\+Chat@{I\+R\+C\+Interface\+\_\+\+Exit\+Audio\+Chat}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Exit\+Audio\+Chat(char $\ast$nick)}{IRCInterface_ExitAudioChat(char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\+R\+C\+Interface\+\_\+\+Exit\+Audio\+Chat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ab431412191716f751461f94d613ffdab}{}\label{xchat2_8c_ab431412191716f751461f94d613ffdab}

\begin{DoxyCode}
2088 \{
2089         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ExitAudioChat(char *nick) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2090         \textcolor{keywordflow}{return} TRUE;
2091 \}
\end{DoxyCode}
\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Give\+Op@{I\+R\+C\+Interface\+\_\+\+Give\+Op}}
\index{I\+R\+C\+Interface\+\_\+\+Give\+Op@{I\+R\+C\+Interface\+\_\+\+Give\+Op}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Give\+Op(char $\ast$channel, char $\ast$nick)}{IRCInterface_GiveOp(char *channel, char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Give\+Op (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ae075029bb55e8b995f22beb0810674f4}{}\label{xchat2_8c_ae075029bb55e8b995f22beb0810674f4}

\begin{DoxyCode}
2126 \{
2127         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_GiveOp(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2128 
2129         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, \hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, \textcolor{stringliteral}{"+o"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2130                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_GiveOp: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2131 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 22


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Give\+Voice@{I\+R\+C\+Interface\+\_\+\+Give\+Voice}}
\index{I\+R\+C\+Interface\+\_\+\+Give\+Voice@{I\+R\+C\+Interface\+\_\+\+Give\+Voice}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Give\+Voice(char $\ast$channel, char $\ast$nick)}{IRCInterface_GiveVoice(char *channel, char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Give\+Voice (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_ae9effb4bdaf4a2cdf2dd9edbeb90b430}{}\label{xchat2_8c_ae9effb4bdaf4a2cdf2dd9edbeb90b430}

\begin{DoxyCode}
2166 \{
2167         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_GiveVoice(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2168 
2169         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, \hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, \textcolor{stringliteral}{"+v"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2170                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_GiveOp: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2171 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 23


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Kick\+Nick@{I\+R\+C\+Interface\+\_\+\+Kick\+Nick}}
\index{I\+R\+C\+Interface\+\_\+\+Kick\+Nick@{I\+R\+C\+Interface\+\_\+\+Kick\+Nick}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Kick\+Nick(char $\ast$channel, char $\ast$nick)}{IRCInterface_KickNick(char *channel, char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Kick\+Nick (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a7adfea400a96160585f86179bafb055f}{}\label{xchat2_8c_a7adfea400a96160585f86179bafb055f}

\begin{DoxyCode}
2206 \{
2207         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_KickNick(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2208 
2209         \textcolor{keywordtype}{int} ret = -1;
2210         \textcolor{keywordtype}{char} *command=NULL;
2211 
2212         \textcolor{comment}{//long IRCMsg\_Kick (char **command, char *prefix, char * channel, char *user, char *comment)}
2213         ret = IRCMsg\_Kick (&command, NULL, \hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, \hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, \textcolor{stringliteral}{"Has sido kickeado del servidor"});
2214         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
2215                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_KickNick : Error en IRCMsg\_Kick, no devolvio IRC\_OK
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2216                 \textcolor{keywordflow}{return};
2217         \}
2218         ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command, strlen(command));
2219         \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
2220                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_KickNick: enviarDatos devolvio ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2221                 \textcolor{keywordflow}{return};
2222         \}
2223         IRCInterface\_PlaneRegisterOutMessage(command);
2224         free(command);  
2225 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 24


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+New\+Command\+Text@{I\+R\+C\+Interface\+\_\+\+New\+Command\+Text}}
\index{I\+R\+C\+Interface\+\_\+\+New\+Command\+Text@{I\+R\+C\+Interface\+\_\+\+New\+Command\+Text}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+New\+Command\+Text(char $\ast$command)}{IRCInterface_NewCommandText(char *command)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+New\+Command\+Text (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a214e10b19c8be028fb35d2a7abf3f798}{}\label{xchat2_8c_a214e10b19c8be028fb35d2a7abf3f798}

\begin{DoxyCode}
2260 \{
2261         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)n[callback] IRCInterface\_NewCommandText(char *command) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2262 
2263         \textcolor{keywordtype}{int} num\_comando = -1, ret;
2264         \textcolor{keywordtype}{char} *comando = NULL;
2265         \textcolor{keywordtype}{char} *\hyperlink{_g-2361-06-_p1-_server_8c_ad2849cf781a4db22cc1b31eaaee50a4f}{prefix} = NULL;
2266         \textcolor{comment}{//pthread\_t tid;}
2267         \textcolor{comment}{//IRCInterface\_PlaneRegisterInMessage(command);}
2268         \textcolor{comment}{//IRCInterface\_WriteSystem(nick\_user, command);}
2269 
2270         \textcolor{keywordflow}{if}(command[0] != \textcolor{charliteral}{'/'})\{\textcolor{comment}{//mensaje a grupo o nick directamente}
2271                 \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel} = IRCInterface\_ActiveChannelName();
2272                 g\_print(\textcolor{stringliteral}{"Active\_channel: %s\(\backslash\)n"}, \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel});
2273 
2274                 \textcolor{comment}{//   long IRCMsg\_Privmsg (char **command, char *prefix, char * msgtarget, char *msg)}
2275                 ret = IRCMsg\_Privmsg (&comando, prefix, \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel}, command);
2276                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
2277                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: IRCMsg\_Privmsg devolvio
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2278                         \textcolor{keywordflow}{return};
2279                 \}
2280                 g\_print(\textcolor{stringliteral}{"\(\backslash\)t Mensaje a enviar IRCMsg\_Privmsg: %s \(\backslash\)n"},comando);
2281 
2282                 ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user},comando, strlen(comando));
2283                 \textcolor{keywordflow}{if}(ret < 0)\{
2284                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: enviarDatos() devolvio
       error (ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2285                         exit(1);
2286                 \}
2287                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout }
2288                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: enviarDatos() mandó 0
       Bytes(ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)t(Timeout de conexión probablemente)\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2289                         exit(1);
2290                 \}
2291                 IRCInterface\_PlaneRegisterOutMessage(comando);
2292                 \textcolor{comment}{//No recibimos nada en este comando, los mensajes de otros usuarios los recibimos por otro
       hilo}
2293                 IRCInterface\_WriteChannel(\hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel}, 
      \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, command);
2294                 \textcolor{keywordflow}{return};
2295         \}
2296 
2297         num\_comando = IRCUser\_CommandQuery (command);   
2298         \textcolor{comment}{//g\_print(BLU "\(\backslash\)n>>>>>>>>>>num\_comando: %d \(\backslash\)n" RESET,num\_comando);}
2299         \textcolor{keywordflow}{if} (\hyperlink{xchat2_8h_afe699fe3416e9bf2d3553e35d7a1dea2}{p\_array\_funciones}[num\_comando](command) == -1)\{
2300                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: Error en p\_array\_funciones num: %d 
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET},num\_comando);
2301         \}
2302 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 25


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+New\+Topic\+Enter@{I\+R\+C\+Interface\+\_\+\+New\+Topic\+Enter}}
\index{I\+R\+C\+Interface\+\_\+\+New\+Topic\+Enter@{I\+R\+C\+Interface\+\_\+\+New\+Topic\+Enter}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+New\+Topic\+Enter(char $\ast$topicdata)}{IRCInterface_NewTopicEnter(char *topicdata)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+New\+Topic\+Enter (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{topicdata}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a080cf34ff506481737f6d08af60ca92b}{}\label{xchat2_8c_a080cf34ff506481737f6d08af60ca92b}

\begin{DoxyCode}
2336 \{
2337         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_NewTopicEnter(char *topicdata) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2338 
2339         \textcolor{keywordtype}{int} ret = -1;
2340         \textcolor{keywordtype}{char} *command=NULL;
2341 
2342         \textcolor{comment}{//long IRCMsg\_Topic (char **command, char *prefix, char * channel, char *topic)}
2343         \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel} = IRCInterface\_ActiveChannelName();
2344         ret = IRCMsg\_Topic (&command, NULL, \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel}, topicdata);
2345         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
2346                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewTopicEnter: IRCMsg\_Topic no devolvio IRC\_OK\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2347                 \textcolor{keywordflow}{return};
2348         \}
2349         ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command, strlen(command));
2350         \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
2351                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewTopicEnter: enviarDatos devolvio ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2352                 \textcolor{keywordflow}{return};
2353         \}
2354         IRCInterface\_PlaneRegisterOutMessage(command);
2355         free(command);  
2356 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 26


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Send\+File@{I\+R\+C\+Interface\+\_\+\+Send\+File}}
\index{I\+R\+C\+Interface\+\_\+\+Send\+File@{I\+R\+C\+Interface\+\_\+\+Send\+File}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Send\+File(char $\ast$filename, char $\ast$nick, char $\ast$data, long unsigned int length)}{IRCInterface_SendFile(char *filename, char *nick, char *data, long unsigned int length)}}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\+R\+C\+Interface\+\_\+\+Send\+File (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{char $\ast$}]{nick, }
\item[{char $\ast$}]{data, }
\item[{long unsigned int}]{length}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a100f1c87bb3b399a7284e62dd2e6172a}{}\label{xchat2_8c_a100f1c87bb3b399a7284e62dd2e6172a}

\begin{DoxyCode}
2398 \{
2399         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_SendFile(char *filename, char *nick, char *data, long unsigned int
       length) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2400         \textcolor{keywordflow}{return} TRUE;
2401 \}
\end{DoxyCode}
\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Start\+Audio\+Chat@{I\+R\+C\+Interface\+\_\+\+Start\+Audio\+Chat}}
\index{I\+R\+C\+Interface\+\_\+\+Start\+Audio\+Chat@{I\+R\+C\+Interface\+\_\+\+Start\+Audio\+Chat}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Start\+Audio\+Chat(char $\ast$nick)}{IRCInterface_StartAudioChat(char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\+R\+C\+Interface\+\_\+\+Start\+Audio\+Chat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a5dc7a44587e609b416a783cd420a12e3}{}\label{xchat2_8c_a5dc7a44587e609b416a783cd420a12e3}

\begin{DoxyCode}
2440 \{
2441         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_StartAudioChat(char *nick) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2442         \textcolor{keywordflow}{return} TRUE;
2443 \}
\end{DoxyCode}
\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Stop\+Audio\+Chat@{I\+R\+C\+Interface\+\_\+\+Stop\+Audio\+Chat}}
\index{I\+R\+C\+Interface\+\_\+\+Stop\+Audio\+Chat@{I\+R\+C\+Interface\+\_\+\+Stop\+Audio\+Chat}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Stop\+Audio\+Chat(char $\ast$nick)}{IRCInterface_StopAudioChat(char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\+R\+C\+Interface\+\_\+\+Stop\+Audio\+Chat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a754a3d3dd311194637c07cc701e7d507}{}\label{xchat2_8c_a754a3d3dd311194637c07cc701e7d507}

\begin{DoxyCode}
2481 \{
2482         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_StopAudioChat(char *nick) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2483         \textcolor{keywordflow}{return} TRUE;
2484 \}
\end{DoxyCode}
\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Take\+Op@{I\+R\+C\+Interface\+\_\+\+Take\+Op}}
\index{I\+R\+C\+Interface\+\_\+\+Take\+Op@{I\+R\+C\+Interface\+\_\+\+Take\+Op}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Take\+Op(char $\ast$channel, char $\ast$nick)}{IRCInterface_TakeOp(char *channel, char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Take\+Op (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a4e2a1ea75e59306142030a91a054b7e6}{}\label{xchat2_8c_a4e2a1ea75e59306142030a91a054b7e6}

\begin{DoxyCode}
2519 \{
2520         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_TakeOp(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2521 
2522         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, \hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, \textcolor{stringliteral}{"-o"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2523                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_TakeOp: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2524 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 27


\index{xchat2.\+c@{xchat2.\+c}!I\+R\+C\+Interface\+\_\+\+Take\+Voice@{I\+R\+C\+Interface\+\_\+\+Take\+Voice}}
\index{I\+R\+C\+Interface\+\_\+\+Take\+Voice@{I\+R\+C\+Interface\+\_\+\+Take\+Voice}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{I\+R\+C\+Interface\+\_\+\+Take\+Voice(char $\ast$channel, char $\ast$nick)}{IRCInterface_TakeVoice(char *channel, char *nick)}}]{\setlength{\rightskip}{0pt plus 5cm}void I\+R\+C\+Interface\+\_\+\+Take\+Voice (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a2ff2e10ed1cb1a399293b6f76ac1e5ae}{}\label{xchat2_8c_a2ff2e10ed1cb1a399293b6f76ac1e5ae}

\begin{DoxyCode}
2559 \{
2560         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_TakeVoice(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2561 
2562         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(\hyperlink{_g-2361-06-_p1-_server_8c_a842ca2f026578e5c479c095ff3335969}{channel}, \hyperlink{_g-2361-06-_p1-_server_8c_a89f27568c92a418413e6b37b41f07e21}{nick}, \textcolor{stringliteral}{"-v"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2563                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_TakeVoice: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});    
2564 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 28


\index{xchat2.\+c@{xchat2.\+c}!main@{main}}
\index{main@{main}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$argv[])}{main(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a0ddf1224851353fc92bfbff6f499fa97}{}\label{xchat2_8c_a0ddf1224851353fc92bfbff6f499fa97}
M\+M\+M\+M\+M\+M\+M\+M\+MM M\+M\+M\+MM A\+A\+A\+A\+A\+AA I\+I\+I\+I\+I\+II N\+N\+N\+N\+N\+N\+N\+N\+NN N\+N\+N\+N\+NN M\+M\+M\+M\+M\+M\+M\+M\+MM M\+M\+M\+MM A\+A\+A\+A\+A\+A\+AA I\+I\+I\+II N\+N\+N\+N\+N\+N\+N\+N\+NN N\+N\+NN M\+M\+M\+MM M\+M\+MM MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM M\+M\+MM MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM M\+M\+MM MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM M\+M\+MM MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM M\+M\+MM MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM M\+M\+MM MM MM A\+A\+A\+A\+A\+A\+A\+A\+A\+A\+A\+A\+AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM M\+M\+M\+MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM M\+MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+MM MM A\+A\+A\+AA AA I\+II N\+N\+N\+NN N\+N\+NN NN M\+M\+M\+M\+M\+MM M\+M\+MM A\+A\+A\+A\+AA A\+A\+AA I\+I\+I\+II N\+N\+N\+N\+NN N\+N\+N\+N\+N\+NN M\+M\+M\+M\+M\+M\+M\+MM M\+M\+M\+M\+MM A\+A\+A\+A\+A\+A\+AA A\+A\+A\+A\+AA I\+I\+I\+I\+I\+II N\+N\+N\+N\+N\+NN N\+N\+N\+N\+N\+NN 
\begin{DoxyCode}
2589 \{
2590         FILE* log\_fp = NULL;
2591 
2592         \textcolor{comment}{//init de las funciones de log}
2593         log\_fp = \hyperlink{logger_8h_a1fa2e9d39664def63d53e3d576dc923f}{initLog}();
2594         \textcolor{keywordflow}{if} (log\_fp == NULL)\{
2595                 perror(\textcolor{stringliteral}{"error en initLog()"});
2596                 \textcolor{keywordflow}{return} EXIT\_FAILURE;
2597         \}
2598 
2599         \textcolor{keywordflow}{if} (pthread\_mutex\_init(&\hyperlink{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{loglock}, NULL) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
2600                 perror(\textcolor{stringliteral}{"\(\backslash\)n mutex init ha devuelto error\(\backslash\)n"});
2601                 \textcolor{keywordflow}{return} EXIT\_FAILURE;
2602         \}
2603 
2604         \textcolor{comment}{/* La función IRCInterface\_Run debe ser llamada al final      */}
2605         \textcolor{comment}{/* del main y es la que activa el interfaz gráfico quedándose */}
2606         \textcolor{comment}{/* en esta función hasta que se pulsa alguna salida del       */}
2607         \textcolor{comment}{/* interfaz gráfico.                                          */}
2608         IRCInterface\_Run(argc, argv);
2609 
2610         pthread\_mutex\_destroy(&\hyperlink{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{loglock});
2611 
2612         \textcolor{keywordflow}{return} 0;
2613 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 29


\index{xchat2.\+c@{xchat2.\+c}!receive\+\_\+messages@{receive\+\_\+messages}}
\index{receive\+\_\+messages@{receive\+\_\+messages}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{receive\+\_\+messages(void $\ast$no\+\_\+arg)}{receive_messages(void *no_arg)}}]{\setlength{\rightskip}{0pt plus 5cm}void receive\+\_\+messages (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{no\+\_\+arg}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}{}\label{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}


Funcion ejecutada por un hilo, que recibe mensajes del servidor y los procesa segun el tipo de respuesta. 


\begin{DoxyParams}{Parameters}
{\em no\+\_\+arg} & estructura de parametros (vacia) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK si todo es correcto, E\+RR si se produce un error 
\end{DoxyReturn}

\begin{DoxyCode}
1081                                    \{
1082 
1083         \textcolor{keywordtype}{char} message[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
1084         \textcolor{keywordtype}{int} ret;
1085         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Hilo Preparado para recibir mensajes\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1086 
1087         \textcolor{keywordtype}{int} oldtype;
1088         \textcolor{comment}{/*No es necesario el pthread\_cancel asíncrono aparentemente}
1089 \textcolor{comment}{        * +INFO: https://www.securecoding.cert.org/confluence/display/c/
      POS44-C.+Do+not+use+signals+to+terminate+threads}
1090 \textcolor{comment}{        *                https://www.securecoding.cert.org/confluence/display/c/
      POS47-C.+Do+not+use+threads+that+can+be+canceled+asynchronously}
1091 \textcolor{comment}{        */}
1092         \textcolor{comment}{//pthread\_setcanceltype(PTHREAD\_CANCEL\_ASYNCHRONOUS, &oldtype);}
1093         
1094         \textcolor{keywordflow}{while}(1)\{
1095                 \textcolor{comment}{//printf(BLU "\(\backslash\)nwhile en receive\_messages\(\backslash\)n" RESET);}
1096                 \textcolor{comment}{//sem\_wait(&recepcionTCP);}
1097                 memset(message, 0, \textcolor{keyword}{sizeof}(message));
1098                 ret = \hyperlink{conexion__tcp_8h_a2ec2b47883bdb05804bec657bfc42516}{recvDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, message, 
      \hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}, \hyperlink{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{host\_name});
1099                 \textcolor{comment}{//sem\_post(&recepcionTCP);}
1100                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1101                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In receive\_messages: recvDatos() devolvio error (ver .log)
      \(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1102                         exit(1);
1103                 \}
1104                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout seguramente}
1105                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In receive\_messages: recvDatos() leyó 0 Bytes(ver .log)\(\backslash\)n\(\backslash\)t
      \(\backslash\)t(Timeout)El cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1106                         exit(1);
1107                 \}
1108                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA})
1109                         \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe}(message, 1);
1110                 \textcolor{keywordflow}{else}
1111                         \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe}(message, 0);
1112         \}
1113 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 30


\index{xchat2.\+c@{xchat2.\+c}!unpipe@{unpipe}}
\index{unpipe@{unpipe}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{unpipe(char $\ast$message, int M\+A\+X\+D\+A\+T\+A\+\_\+flag)}{unpipe(char *message, int MAXDATA_flag)}}]{\setlength{\rightskip}{0pt plus 5cm}void unpipe (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{message, }
\item[{int}]{M\+A\+X\+D\+A\+T\+A\+\_\+flag}
\end{DoxyParamCaption}
)}\hypertarget{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{}\label{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}


Funcion para dividir en comandos la cadena \char`\"{}message\char`\"{}. 


\begin{DoxyParams}{Parameters}
{\em message} & cadena recibida, puede incluir mas de un comando \\
\hline
{\em M\+A\+X\+D\+A\+T\+A\+\_\+flag} & flag que marca que se ha leído el maximo del buffer y han podido cortarse comandos \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
969                                             \{
970 
971         \textcolor{keywordtype}{char} *q = message, *command;
972         \textcolor{keywordtype}{char} *glued\_command = NULL;
973         \textcolor{keywordtype}{int} i = 0, test = 0;
974 
975         \textcolor{keywordflow}{while} (q != NULL)\{
976                 q = IRC\_UnPipelineCommands(q, &command);
977                 test = \hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(command);
978 
979                 \textcolor{keywordflow}{if}(MAXDATA\_flag == 1)\{  \textcolor{comment}{//caso 1.)riesgo: se ha llamado a unpipe() con un bloque de tam
       MAXDATA}
980                         \textcolor{keywordflow}{if}((i == 0) && (\hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} == 1))\{      \textcolor{comment}{//caso 2.1)primera
       iter unpipe, no MAXDATA PERO 'check...' activado}
981                                 \textcolor{keywordflow}{if}(test == \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                       \textcolor{comment}{//
      caso 2.1.1)además no da error}
982                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
983                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{  \textcolor{comment}{//caso 2.1.2)o bien es la segunda mitad del comando o bien}
984                                                                                                                         \textcolor{comment}{
      //           da la casualidad de que es un comando mal formado independiente}
985                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
986                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{        \textcolor{comment}{//caso 2.1.3)ambos test petan. Concatenar y rezar}
987                                         glued\_command =  (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
988                                         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
989                                         strcat(glued\_command, command);
990 
991                                         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
992                                         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(glued\_command) == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
993                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
994                                                 free(glued\_command);
995                                         \}\textcolor{keywordflow}{else}\{
996                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
997                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
998                                         \}
999 
1000                                         free(command);
1001                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 2.1.4)ambos comandos están bien formados}
1002                                         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1003                                         free(command);
1004                                 \}
1005                                 \textcolor{comment}{//resetear flags:}
1006                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 0;
1007                                 strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, \textcolor{stringliteral}{"0"});
1008 
1009                         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(q == NULL)\{ \textcolor{comment}{//q es 'resto', comprobar que sea el último comando parseado
       del bloque}
1010                                 \textcolor{keywordflow}{if} (test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                                                    \textcolor{comment}{//
      caso 1.1)error en test con MAXDATA\_f}
1011                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"\(\backslash\)nWARN - In unpipe: testIRC\_CommandQuery(command)
       devolvio ERR con MAXDATA\_flag activada\(\backslash\)n\(\backslash\)tSe almacena el trozo de comando=%s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1012                                         \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} = \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
1013                                         strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, command);
1014                                         free(command);
1015                                         \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 1;
1016                                         \textcolor{keywordflow}{break}; \textcolor{comment}{//(!) en principio no tiene sentido seguir iterando, es el
       último mensaje (trozo) del bloque}
1017                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 1.2)no error en test con MAXDATA\_f, 2 posibilidades:}
1018                                                                                                                         \textcolor{comment}{
      //a)justo ha cogido el comando entero, b)ha cogido parte del comando y lo reconoce como valido}
1019                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"\(\backslash\)nWARN - In unpipe: testIRC\_CommandQuery(command)
       devolvio OK con MAXDATA\_flag activada\(\backslash\)n\(\backslash\)tSe almacena el trozo de comando=%s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1020                                         \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} = \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
1021                                         strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, command);
1022                                         free(command);
1023                                 \}
1024                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 1;
1025                         \}\textcolor{keywordflow}{else}\{          \textcolor{comment}{//si no es el último comando parseado, command\_query normal}
1026                                 \textcolor{keywordflow}{if}(\hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command) == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1027                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: command\_query() devolvio ERR
       (MAXDATA\_flag == 1 pero no es el último comando)\(\backslash\)n\(\backslash\)tcommand = %s"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1028                                         free(command);
1029                                 \}
1030                         \}
1031 
1032                 \}\textcolor{keywordflow}{else}\{                                  \textcolor{comment}{//caso 2)no se ha llamado a unpipe() con un bloque
       de tam MAXDATA}
1033                         \textcolor{keywordflow}{if}((i == 0) && (\hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} == 1))\{      \textcolor{comment}{//caso 2.1)primera
       iter unpipe, no MAXDATA PERO 'check...' activado}
1034                                 \textcolor{keywordflow}{if}(test == \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                       \textcolor{comment}{//
      caso 2.1.1)además no da error}
1035                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1036                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{  \textcolor{comment}{//caso 2.1.2)o bien es la segunda mitad del comando o bien}
1037                                                                                                                         \textcolor{comment}{
      //           da la casualidad de que es un comando mal formado independiente}
1038                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1039                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{        \textcolor{comment}{//caso 2.1.3)ambos test petan. No se puede concatenar}
1040                                         glued\_command =  (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
1041                                         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1042                                         strcat(glued\_command, command);
1043                                         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
1044 
1045                                         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(glued\_command) == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
1046                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
1047                                                 free(glued\_command);
1048                                         \}\textcolor{keywordflow}{else}\{
1049                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1050                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1051                                         \}
1052 
1053                                         free(command);
1054                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 2.1.4)ambos comandos están bien formados}
1055                                         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1056                                         free(command);
1057                                 \}
1058                                 \textcolor{comment}{//resetear flags:}
1059                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 0;
1060                                 strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, \textcolor{stringliteral}{"0"});
1061                         \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{//
      caso 2.2)no MAXDATA, no i=0: command\_query normal}
1062                                 \textcolor{keywordflow}{if}(\hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command) == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1063                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: command\_query() devolvio ERR (i
       != 0, check\_... False, MAXDATA\_flag False)\(\backslash\)n\(\backslash\)tcommand = %s"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1064                                         free(command);
1065                                 \}
1066                         \}
1067                 \}
1068                 i++;
1069         \}
1070 
1071     \textcolor{keywordflow}{if}(command == NULL)\{
1072         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: Se ha solicitado buscar un comando en una cadena vacia\(\backslash\)n\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1073     \}   
1074 \}
\end{DoxyCode}


Here is the call graph for this function\+:
% FIG 31




\subsection{Variable Documentation}
\index{xchat2.\+c@{xchat2.\+c}!active\+\_\+channel@{active\+\_\+channel}}
\index{active\+\_\+channel@{active\+\_\+channel}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{active\+\_\+channel}{active_channel}}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ active\+\_\+channel = N\+U\+LL}\hypertarget{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{}\label{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}
\index{xchat2.\+c@{xchat2.\+c}!check\+\_\+next\+\_\+unpipe@{check\+\_\+next\+\_\+unpipe}}
\index{check\+\_\+next\+\_\+unpipe@{check\+\_\+next\+\_\+unpipe}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{check\+\_\+next\+\_\+unpipe}{check_next_unpipe}}]{\setlength{\rightskip}{0pt plus 5cm}int check\+\_\+next\+\_\+unpipe = 0}\hypertarget{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{}\label{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}
\index{xchat2.\+c@{xchat2.\+c}!host\+\_\+name@{host\+\_\+name}}
\index{host\+\_\+name@{host\+\_\+name}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{host\+\_\+name}{host_name}}]{\setlength{\rightskip}{0pt plus 5cm}char host\+\_\+name\mbox{[}128\mbox{]}}\hypertarget{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{}\label{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}
\index{xchat2.\+c@{xchat2.\+c}!hostname@{hostname}}
\index{hostname@{hostname}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{hostname}{hostname}}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ hostname}\hypertarget{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{}\label{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}
\index{xchat2.\+c@{xchat2.\+c}!last\+\_\+command@{last\+\_\+command}}
\index{last\+\_\+command@{last\+\_\+command}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{last\+\_\+command}{last_command}}]{\setlength{\rightskip}{0pt plus 5cm}char last\+\_\+command\mbox{[}256\mbox{]} = \char`\"{}\char`\"{}}\hypertarget{xchat2_8c_a4e304440b657a8d3265793203cb12393}{}\label{xchat2_8c_a4e304440b657a8d3265793203cb12393}
\index{xchat2.\+c@{xchat2.\+c}!last\+\_\+test@{last\+\_\+test}}
\index{last\+\_\+test@{last\+\_\+test}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{last\+\_\+test}{last_test}}]{\setlength{\rightskip}{0pt plus 5cm}int last\+\_\+test = {\bf OK}}\hypertarget{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{}\label{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}
\index{xchat2.\+c@{xchat2.\+c}!loglock@{loglock}}
\index{loglock@{loglock}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{loglock}{loglock}}]{\setlength{\rightskip}{0pt plus 5cm}pthread\+\_\+mutex\+\_\+t loglock}\hypertarget{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{}\label{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}


Declaracion del Mutex para el descriptor de fichero del log. Siempre tiene que ser definida en el source princpal. 

Declaracion del Mutex para el descriptor de fichero del log. Siempre tiene que ser definida en el source princpal. \index{xchat2.\+c@{xchat2.\+c}!nick\+\_\+user@{nick\+\_\+user}}
\index{nick\+\_\+user@{nick\+\_\+user}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{nick\+\_\+user}{nick_user}}]{\setlength{\rightskip}{0pt plus 5cm}char nick\+\_\+user\mbox{[}{\bf M\+A\+X\+D\+A\+TA}\mbox{]} = \{0\}}\hypertarget{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{}\label{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}
\index{xchat2.\+c@{xchat2.\+c}!recv\+\_\+tid@{recv\+\_\+tid}}
\index{recv\+\_\+tid@{recv\+\_\+tid}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{recv\+\_\+tid}{recv_tid}}]{\setlength{\rightskip}{0pt plus 5cm}pthread\+\_\+t recv\+\_\+tid}\hypertarget{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{}\label{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}
Globales útiles sobre la conexión del cliente con el servidor \index{xchat2.\+c@{xchat2.\+c}!sendf\+\_\+tid@{sendf\+\_\+tid}}
\index{sendf\+\_\+tid@{sendf\+\_\+tid}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{sendf\+\_\+tid}{sendf_tid}}]{\setlength{\rightskip}{0pt plus 5cm}pthread\+\_\+t sendf\+\_\+tid}\hypertarget{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}{}\label{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}
\index{xchat2.\+c@{xchat2.\+c}!sockfd\+\_\+user@{sockfd\+\_\+user}}
\index{sockfd\+\_\+user@{sockfd\+\_\+user}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{sockfd\+\_\+user}{sockfd_user}}]{\setlength{\rightskip}{0pt plus 5cm}int sockfd\+\_\+user = -\/1}\hypertarget{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{}\label{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}
\index{xchat2.\+c@{xchat2.\+c}!stream@{stream}}
\index{stream@{stream}!xchat2.\+c@{xchat2.\+c}}
\subsubsection[{\texorpdfstring{stream}{stream}}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ stream}\hypertarget{xchat2_8c_a98d1a6f1c3b6a02b439ca0b9e8434420}{}\label{xchat2_8c_a98d1a6f1c3b6a02b439ca0b9e8434420}
