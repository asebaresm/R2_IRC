\hypertarget{xchat2_8c}{\section{src/xchat2.c File Reference}
\label{xchat2_8c}\index{src/xchat2.\-c@{src/xchat2.\-c}}
}


Fichero con principalmente la implementación de los callbacks de xchat2.  


{\ttfamily \#include \char`\"{}../includes/xchat2.\-h\char`\"{}}\\*
Include dependency graph for xchat2.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\-\_\-query} (char $\ast$message)
\begin{DoxyCompactList}\small\item\em Parsea los mensajes y respuestas que recibe del servidor. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glue\-And\-Query} (char $\ast$command, char $\ast$\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\-\_\-command})
\item 
void \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe} (char $\ast$message, int M\-A\-X\-D\-A\-T\-A\-\_\-flag)
\begin{DoxyCompactList}\small\item\em Funcion para dividir en comandos la cadena \char`\"{}message\char`\"{}. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}{receive\-\_\-messages} (void $\ast$no\-\_\-arg)
\begin{DoxyCompactList}\small\item\em Funcion ejecutada por un hilo, que recibe mensajes del servidor y los procesa segun el tipo de respuesta. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8c_a33f80a29a744e4182b29e23f13c1f05c}{I\-R\-C\-Interface\-\_\-\-Activate\-Channel\-Key} (char $\ast$channel, char $\ast$key)
\item 
void \hyperlink{xchat2_8c_a7a439929c246e342ae525139b2c39f5d}{I\-R\-C\-Interface\-\_\-\-Activate\-External\-Messages} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_ac72762ab1e3575b421b967241db23f9c}{I\-R\-C\-Interface\-\_\-\-Activate\-Invite} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_af83498f4058311f4562c43a9b70566b2}{I\-R\-C\-Interface\-\_\-\-Activate\-Moderated} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_ab5694cc413472173bfcaa969c7d9800e}{I\-R\-C\-Interface\-\_\-\-Activate\-Nicks\-Limit} (char $\ast$channel, int limit)
\item 
void \hyperlink{xchat2_8c_ab1f09c737c7c109a97e22de6072d731d}{I\-R\-C\-Interface\-\_\-\-Activate\-Private} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_ac45f12d4dcacf3b5485eec6fdc51df93}{I\-R\-C\-Interface\-\_\-\-Activate\-Protect\-Topic} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_aa9e9155115b834d85a4d10cb27f99093}{I\-R\-C\-Interface\-\_\-\-Activate\-Secret} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_a42773b5a840f9d0455f148d285e1e595}{I\-R\-C\-Interface\-\_\-\-Ban\-Nick} (char $\ast$channel, char $\ast$nick)
\item 
long \hyperlink{xchat2_8c_aed072f4ce0d6e90697d4d6eb0278a2ad}{I\-R\-C\-Interface\-\_\-\-Connect} (char $\ast$nick, char $\ast$user, char $\ast$realname, char $\ast$password, char $\ast$server, int port, boolean ssl)
\item 
void \hyperlink{xchat2_8c_a3e67ee0cd384b524d57fda14593dce8e}{I\-R\-C\-Interface\-\_\-\-Deactivate\-Channel\-Key} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_a638b1535f4ecbc9a6affb2df2a6a946e}{I\-R\-C\-Interface\-\_\-\-Deactivate\-External\-Messages} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_a9ba4e98a3729737aa63ebec54ba4e894}{I\-R\-C\-Interface\-\_\-\-Deactivate\-Invite} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_ab760e8144b38f6c14bd809d157cee5d4}{I\-R\-C\-Interface\-\_\-\-Deactivate\-Moderated} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_a92c8cfbe2e14e19277e1c97d11719e80}{I\-R\-C\-Interface\-\_\-\-Deactivate\-Nicks\-Limit} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_a8a6141803691ba327f11ba763ad075d4}{I\-R\-C\-Interface\-\_\-\-Deactivate\-Private} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_a5a57541a950f8c2c40b4b44c32b28ed9}{I\-R\-C\-Interface\-\_\-\-Deactivate\-Protect\-Topic} (char $\ast$channel)
\item 
void \hyperlink{xchat2_8c_a4956427664cabc7d5b2bd1589a207324}{I\-R\-C\-Interface\-\_\-\-Deactivate\-Secret} (char $\ast$channel)
\item 
boolean \hyperlink{xchat2_8c_a8bf0424ef7f845be79a056e9aed56fe2}{I\-R\-C\-Interface\-\_\-\-Disconnect\-Server} (char $\ast$server, int port)
\item 
boolean \hyperlink{xchat2_8c_ab431412191716f751461f94d613ffdab}{I\-R\-C\-Interface\-\_\-\-Exit\-Audio\-Chat} (char $\ast$nick)
\item 
void \hyperlink{xchat2_8c_ae075029bb55e8b995f22beb0810674f4}{I\-R\-C\-Interface\-\_\-\-Give\-Op} (char $\ast$channel, char $\ast$nick)
\item 
void \hyperlink{xchat2_8c_ae9effb4bdaf4a2cdf2dd9edbeb90b430}{I\-R\-C\-Interface\-\_\-\-Give\-Voice} (char $\ast$channel, char $\ast$nick)
\item 
void \hyperlink{xchat2_8c_a7adfea400a96160585f86179bafb055f}{I\-R\-C\-Interface\-\_\-\-Kick\-Nick} (char $\ast$channel, char $\ast$nick)
\item 
void \hyperlink{xchat2_8c_a214e10b19c8be028fb35d2a7abf3f798}{I\-R\-C\-Interface\-\_\-\-New\-Command\-Text} (char $\ast$command)
\item 
void \hyperlink{xchat2_8c_a080cf34ff506481737f6d08af60ca92b}{I\-R\-C\-Interface\-\_\-\-New\-Topic\-Enter} (char $\ast$topicdata)
\item 
boolean \hyperlink{xchat2_8c_a100f1c87bb3b399a7284e62dd2e6172a}{I\-R\-C\-Interface\-\_\-\-Send\-File} (char $\ast$filename, char $\ast$nick, char $\ast$data, long unsigned int length)
\item 
boolean \hyperlink{xchat2_8c_a5dc7a44587e609b416a783cd420a12e3}{I\-R\-C\-Interface\-\_\-\-Start\-Audio\-Chat} (char $\ast$nick)
\item 
boolean \hyperlink{xchat2_8c_a754a3d3dd311194637c07cc701e7d507}{I\-R\-C\-Interface\-\_\-\-Stop\-Audio\-Chat} (char $\ast$nick)
\item 
void \hyperlink{xchat2_8c_a4e2a1ea75e59306142030a91a054b7e6}{I\-R\-C\-Interface\-\_\-\-Take\-Op} (char $\ast$channel, char $\ast$nick)
\item 
void \hyperlink{xchat2_8c_a2ff2e10ed1cb1a399293b6f76ac1e5ae}{I\-R\-C\-Interface\-\_\-\-Take\-Voice} (char $\ast$channel, char $\ast$nick)
\item 
int \hyperlink{xchat2_8c_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{loglock}
\begin{DoxyCompactList}\small\item\em Declaracion del Mutex para el descriptor de fichero del log. Siempre tiene que ser definida en el source princpal. \end{DoxyCompactList}\item 
pthread\-\_\-t \hyperlink{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{recv\-\_\-tid}
\item 
pthread\-\_\-t \hyperlink{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}{sendf\-\_\-tid}
\item 
int \hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\-\_\-user} = -\/1
\item 
char \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\-\_\-user} \mbox{[}\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{M\-A\-X\-D\-A\-T\-A}\mbox{]} = \{0\}
\item 
char $\ast$ \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname}
\item 
char $\ast$ \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\-\_\-channel} = N\-U\-L\-L
\item 
char $\ast$ \hyperlink{xchat2_8c_a98d1a6f1c3b6a02b439ca0b9e8434420}{stream}
\item 
char \hyperlink{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{host\-\_\-name} \mbox{[}128\mbox{]}
\item 
char \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\-\_\-command} \mbox{[}256\mbox{]} = \char`\"{}\char`\"{}
\item 
int \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\-\_\-next\-\_\-unpipe} = 0
\item 
int \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\-\_\-test} = \hyperlink{types_8h_aba51915c87d64af47fb1cc59348961c9}{O\-K}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Fichero con principalmente la implementación de los callbacks de xchat2. \begin{DoxyAuthor}{Author}
Alfonso Sebares 

Beatriz de Pablo 

Celia Mateos 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
20/03/17 
\end{DoxyDate}


\subsection{Function Documentation}
\hypertarget{xchat2_8c_a41f93f364aea303a0c93177289733f92}{\index{xchat2.\-c@{xchat2.\-c}!command\-\_\-query@{command\-\_\-query}}
\index{command\-\_\-query@{command\-\_\-query}!xchat2.c@{xchat2.\-c}}
\subsubsection[{command\-\_\-query}]{\setlength{\rightskip}{0pt plus 5cm}int command\-\_\-query (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{message}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a41f93f364aea303a0c93177289733f92}


Parsea los mensajes y respuestas que recibe del servidor. 


\begin{DoxyParams}{Parameters}
{\em massage} & mensaje recibido para procesar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
O\-K si todo fue correcto y E\-R\-R si ocurrio un error 
\end{DoxyReturn}
$<$ delimitador para separar mensajes 
\begin{DoxyCode}
40                                 \{
41 
42         \textcolor{keywordtype}{long} ret = -1;
43         \textcolor{keywordtype}{int} retorno = -1;
44         \textcolor{keywordtype}{char} *prefix = NULL;
45         \textcolor{keywordtype}{int} n = -1;
46         \textcolor{keywordtype}{int} counter = 1;
47     \textcolor{keywordtype}{char} mensaje[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
48     \textcolor{keywordtype}{char} mensajeLargo[10*\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
49     \textcolor{keywordtype}{char} *msg = NULL;
50     \textcolor{keywordtype}{char} *nick = NULL;
51     \textcolor{keywordtype}{char} *nick2 = NULL;
52     \textcolor{comment}{//002}
53     \textcolor{keywordtype}{char} *servername = NULL;
54         \textcolor{keywordtype}{char} *versionname = NULL;
55         \textcolor{comment}{//003}
56         \textcolor{keywordtype}{char} *timedate = NULL;
57         \textcolor{comment}{//004}
58         \textcolor{keywordtype}{char}* version = NULL;
59         \textcolor{keywordtype}{char}* availableusermodes = NULL;
60         \textcolor{keywordtype}{char}* availablechannelmodes = NULL;
61         \textcolor{keywordtype}{char}* addedg = NULL;    
62         \textcolor{comment}{//251}
63         \textcolor{keywordtype}{int} nusers = 0;
64         \textcolor{keywordtype}{int} ninvisibles = 0;
65         \textcolor{keywordtype}{int} nservers = 0;
66         \textcolor{keywordtype}{char} *type = NULL;
67         \textcolor{comment}{//char **parameters = NULL;}
68         \textcolor{comment}{//int numparameters = 0;}
69 
70         \textcolor{comment}{//265}
71         \textcolor{keywordtype}{char} *substring = NULL;
72         \textcolor{comment}{//322}
73         \textcolor{keywordtype}{char} *visible = NULL;
74         \textcolor{comment}{//332}
75         \textcolor{keywordtype}{char} *topic = NULL;
76         \textcolor{keywordtype}{char} *channel = NULL;
77 
78         \textcolor{keywordtype}{char} inv[200];
79 
80         \textcolor{comment}{//353}
81         \textcolor{comment}{//char* show\_nick;}
82 
83         \textcolor{comment}{//JOIN}
84         \textcolor{keywordtype}{char}* key = NULL;       
85         \textcolor{keywordtype}{char} command[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
86 
87         \textcolor{comment}{//PRIVMSG}
88         \textcolor{keywordtype}{char}* msgtarget = NULL;
89         \textcolor{keywordtype}{char}* origin\_nick = NULL;
90         \textcolor{keywordtype}{char} nick\_privmsg[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
91         \textcolor{keywordtype}{char} *filename = NULL, *hostname\_destino = NULL;
92         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} length, port;
93 
94         \textcolor{comment}{//PART}
95         \textcolor{keywordtype}{char}* nick\_part;
96         \textcolor{keywordtype}{char}* username\_part;
97         \textcolor{keywordtype}{char}* host\_part;
98         \textcolor{keywordtype}{char}* server\_part;
99 
100         \textcolor{comment}{//PING}
101         \textcolor{keywordtype}{char}* server, *server2;
102         \textcolor{keywordtype}{char}* command\_pong;
103 
104         \textcolor{comment}{//Strtok}
105         \textcolor{keyword}{const} \textcolor{keywordtype}{char} s[2] = \textcolor{stringliteral}{":"}; 
106         \textcolor{keywordtype}{char} *token = NULL;
107 
108         \textcolor{comment}{//472}
109         \textcolor{keywordtype}{char} *modechar = NULL;
110 
111         \textcolor{comment}{//MODE}
112         \textcolor{keywordtype}{char} *channeluser = NULL;
113         \textcolor{keywordtype}{char} *mode = NULL;
114         \textcolor{keywordtype}{char} *user = NULL;
115 
116         \textcolor{comment}{//KICK}
117         \textcolor{keywordtype}{char} *comment = NULL;
118 
119         \textcolor{comment}{//QUIT}
120         \textcolor{keywordtype}{char} **channelsQuit;
121         \textcolor{keywordtype}{int} numChannelsQuit;
122         \textcolor{keywordtype}{int} i;
123         \textcolor{comment}{//char* realname, *host;}
124 
125         \textcolor{comment}{//GENERAL}
126         \textcolor{keywordtype}{char} **params;
127         \textcolor{keywordtype}{int} n\_params;
128         \textcolor{keywordtype}{int} unknw\_type;
129         \textcolor{keyword}{const} \textcolor{keywordtype}{char} space\_delim[2] = \textcolor{stringliteral}{" "};
130         \textcolor{keywordtype}{char} *message\_cp = NULL;
131 
132         \textcolor{comment}{//g\_print("Mesaje recibido en command\_query: %s", message);}
133 
134         \textcolor{comment}{/*}
135 \textcolor{comment}{        if(message == NULL) \{}
136 \textcolor{comment}{                g\_print(RED "ERROR - In command\_query: message == NULL al principio\(\backslash\)n\(\backslash\)n" RESET);}
137 \textcolor{comment}{                return ERR;}
138 \textcolor{comment}{        \}}
139 \textcolor{comment}{        */}
140 
141         IRCInterface\_PlaneRegisterInMessage(message);
142 
143         \textcolor{keywordflow}{switch}(IRC\_CommandQuery(message))\{
144                 \textcolor{keywordflow}{case} RPL\_WELCOME: \textcolor{comment}{//001}
145                         ret = IRCParse\_RplWelcome(message, &prefix, &nick2, &msg);
146                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
147                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_WELCOME -
       IRCParse\_RplWelcome != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
148                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
149                         \}
150                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplWelcome: \(\backslash\)n"});
151                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
152                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
153                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
154                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
155                         \textcolor{comment}{//obtenemos el hostname, util para el envio de ficheros}
156                         \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(msg, \textcolor{stringliteral}{" "});
157                         \textcolor{keywordflow}{while} (((\hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(NULL, \textcolor{stringliteral}{" "})) != NULL) && (counter < 5))\{
158                                 counter++;
159                         \}
160                         \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(NULL, \textcolor{stringliteral}{" "});
161                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t hostname: %s \(\backslash\)n\(\backslash\)n"}, \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname});
162                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"}, msg
      );
163                         \textcolor{keywordflow}{break};
164 
165                 \textcolor{keywordflow}{case} RPL\_YOURHOST:      \textcolor{comment}{//002}
166                         \textcolor{comment}{//long IRCParse\_RplYourHost (char *strin, char **prefix, char **nick, char **msg,
       char **servername, char **versionname)}
167                         ret = IRCParse\_RplYourHost(message, &prefix, &nick2, &msg, &servername, &
      versionname);
168                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
169                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_YOURHOST -
       IRCParse\_RplYourHost != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
170                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
171                         \}
172                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplYourHost: \(\backslash\)n"});
173                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
174                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
175                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
176                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t servername: %s \(\backslash\)n"},servername);
177                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t versionname: %s \(\backslash\)n"},versionname);           
178                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
179                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
180                         \textcolor{keywordflow}{break};
181 
182                 \textcolor{keywordflow}{case} RPL\_CREATED:\textcolor{comment}{//003                  }
183                         \textcolor{comment}{//long IRCParse\_RplCreated (char *strin, char **prefix, char **nick,char
       **timedate, char **msg)}
184                         ret = IRCParse\_RplCreated(message, &prefix, &nick2, &timedate, &msg);
185                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
186                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_CREATED -
       IRCParse\_RplCreated != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
187                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
188                         \}
189                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplCreated: \(\backslash\)n"});
190                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
191                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
192                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
193                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t timedate: %s \(\backslash\)n"},timedate); 
194                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
195                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
196                         \textcolor{keywordflow}{break};
197 
198                 \textcolor{keywordflow}{case} RPL\_MYINFO: \textcolor{comment}{//004}
199                         \textcolor{comment}{//long IRCParse\_RplMyInfo (char *strin, char **prefix, char **nick, char
       **servername, char **version, char **availableusermodes, char **availablechannelmodes, char **addedg)}
200                         ret = IRCParse\_RplMyInfo(message, &prefix, &nick2, &servername, &version, &
      availableusermodes, &availablechannelmodes, &addedg);
201                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
202                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_MYINFO -
       IRCParse\_RplMyInfo != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
203                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
204                         \}
205                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplMyInfo: \(\backslash\)n"});
206                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
207                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
208                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
209                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t servername: %s \(\backslash\)n"},servername);
210                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t version: %s \(\backslash\)n"},version);
211                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t availableusermodes: %s \(\backslash\)n"},availableusermodes);     
212                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t availablechannelmodes: %s \(\backslash\)n"},availablechannelmodes);
213                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t addedg: %s \(\backslash\)n\(\backslash\)n"},addedg);
214                         n = snprintf(mensaje, \textcolor{keyword}{sizeof} mensaje,\textcolor{stringliteral}{"%s %s %s %s %s "},servername,version,
      availableusermodes,availablechannelmodes,addedg);
215 
216                         \textcolor{keywordflow}{if} ( n < 0 || n >= \textcolor{keyword}{sizeof} mensaje )\{
217                                 g\_print(\textcolor{stringliteral}{"Error en sprintf \(\backslash\)n"});
218                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};    \textcolor{comment}{// or other error handling}
219                         \}
220                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);            
221                         \textcolor{keywordflow}{break};
222 
223                 \textcolor{keywordflow}{case} RPL\_BOUNCE: \textcolor{comment}{//005}
224                         \textcolor{comment}{//   long IRCParse\_RplISupport (char *strin, char **prefix, char **nick, char
       **msg)                                                }
225                         ret = IRCParse\_RplISupport(message, &prefix, &nick2, &msg);
226                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
227                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_BOUNCE
       -IRCParse\_RplISupport != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
228                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
229                         \}
230                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplISupport: \(\backslash\)n"});
231                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
232                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
233                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
234                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
235                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;                
236                         \textcolor{keywordflow}{break};
237 
238                 \textcolor{keywordflow}{case} RPL\_LUSERCLIENT: \textcolor{comment}{//251}
239                         \textcolor{comment}{//long IRCParse\_RplLuserClient (char *strin, char **prefix, char **nick, char
       **msg, int *nusers, int *ninvisibles, int *nservers)}
240                         
241                         ret = IRCParse\_RplLuserClient(message, &prefix, &nick2, &msg, &nusers, &ninvisibles
      , &nservers);
242                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
243                                 \textcolor{comment}{//g\_print(RED "\(\backslash\)nERROR - In command\_query: case RPL\_LUSERCLIENT
       -IRCParse\_RplLuserClient != IRC\_OK" RESET);}
244                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
245                         \}
246                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
247                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
248                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
249                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg);
250                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nusers: %d \(\backslash\)n"},nusers);
251                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t ninvisibles: %d \(\backslash\)n"},ninvisibles);
252                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nservers: %d \(\backslash\)n\(\backslash\)n"},nservers); 
253 
254                         \textcolor{comment}{/*ret\_strstr = strstr(mensaje,"nicknick");}
255 \textcolor{comment}{                        IRCInterface\_WriteSystem("*",ret\_strstr);*/} 
256 
257                         sprintf(mensaje,\textcolor{stringliteral}{"There are %d users and %d invisibles on %d servers "},nusers,
      ninvisibles,nservers);
258                         \textcolor{comment}{//sprintf(mensaje,"There are 13 users and 0 services on 1 servers");}
259 
260                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);                                                                                                    
261                         \textcolor{keywordflow}{break};
262                         
263                 \textcolor{keywordflow}{case} RPL\_LUSERCHANNELS: \textcolor{comment}{//254}
264                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
265                         \textcolor{comment}{/*Coger el primer token*/}
266                         token = strtok(message,s);
267                         \textcolor{comment}{/*Ir por el resto*/}
268                         \textcolor{keywordflow}{if}(token != NULL)\{
269                                 token = strtok(NULL,s); 
270                         \}
271                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
272 
273                         token = NULL;
274                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
275                         \textcolor{keywordflow}{break};
276 
277                 \textcolor{keywordflow}{case} RPL\_LUSERME : \textcolor{comment}{//255}
278                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
279                         \textcolor{comment}{/*Coger el primer token*/}
280                         token = strtok(message,s);
281                         \textcolor{comment}{/*Ir por el resto*/}
282                         \textcolor{keywordflow}{if}(token != NULL)\{
283                                 token = strtok(NULL,s); 
284                         \}
285                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
286 
287                         token = NULL;
288                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
289                         \textcolor{keywordflow}{break};
290 
291                 \textcolor{keywordflow}{case} RPL\_LOCALUSERS: \textcolor{comment}{//265}
292                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
293                         \textcolor{keywordflow}{if} (substring)\{
294                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
295                         \}
296                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      substring);
297 
298                         substring = NULL;
299                         \textcolor{keywordflow}{break};
300 
301                 \textcolor{keywordflow}{case} RPL\_GLOBALUSERS: \textcolor{comment}{//266}
302                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_GLOBALUSERS - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
303                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
304                         \textcolor{keywordflow}{if} (substring)\{
305                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
306                         \}
307                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      substring);
308 
309                         substring = NULL;               
310                         \textcolor{keywordflow}{break};
311 
312                 \textcolor{keywordflow}{case} RPL\_LISTSTART: \textcolor{comment}{//321}
313                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LISTSTART - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
314                         token = strtok(message,s);
315                         \textcolor{keywordflow}{if}(token != NULL)\{
316                                 token = strtok(NULL,s); 
317                         \}
318                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
319 
320                         \textcolor{keywordflow}{break};
321 
322                 \textcolor{keywordflow}{case} RPL\_LIST: \textcolor{comment}{//322}
323                         \textcolor{comment}{//   long IRCParse\_RplList (char *strin, char **prefix, char **nick, char
       **channel, char **visible, char **topic)}
324                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LIST - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
325                         ret = IRCParse\_RplList(message, &prefix, &nick2, &channel, &visible, &topic);
326                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
327                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_LIST -
       IRCParse\_RplList != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
328                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
329                         \}
330                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplList: \(\backslash\)n"});
331                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
332                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
333                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
334                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
335                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t visible: %s \(\backslash\)n"},visible);
336                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
337 
338                         sprintf(mensajeLargo,\textcolor{stringliteral}{"%s \(\backslash\)t %s \(\backslash\)t %s"},channel,visible,topic);
339                         g\_print(\textcolor{stringliteral}{"Mensaje creado: %s \(\backslash\)n\(\backslash\)n"},mensajeLargo);
340 
341                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensajeLargo);
342                         \hyperlink{aux__functions_8h_a2480cc4793bf25a16cc731dc9d033582}{mfree}(5,prefix,nick2,channel,visible,topic);       
343                         \textcolor{keywordflow}{break};
344 
345                 \textcolor{keywordflow}{case} RPL\_LISTEND: \textcolor{comment}{//323}
346                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LISTEND - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
347                         \textcolor{comment}{/*Coger el primer token*/}
348                         token = strtok(message,s);
349                         \textcolor{comment}{/*Ir por el resto*/}
350                         \textcolor{keywordflow}{if}(token != NULL)\{
351                                 token = strtok(NULL,s); 
352                         \}
353                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
354 
355                         token = NULL;
356                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                        }
357                         \textcolor{keywordflow}{break};
358 
359                 \textcolor{keywordflow}{case} RPL\_INVITING:
360                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_INVITING - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
361 
362                         ret = IRCParse\_RplInviting (message, &prefix , &nick, &channel, &msg);
363                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
364                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_INVITING -
       IRCParse\_RplInviting != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
365                                 \textcolor{keywordflow}{break};
366                         \}
367                         \textcolor{comment}{//strcpy("")}
368                         \textcolor{keywordflow}{if}(strcmp(nick,\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}) == 0)\{
369                                 strcpy(inv,\textcolor{stringliteral}{"You invited "});
370                                 strcat(inv, channel);
371                                 strcat(inv, \textcolor{stringliteral}{" to join "});
372                                 strcat(inv, msg);
373                                 \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{
      "*"},inv);
374                         \}
375                         \textcolor{keywordflow}{break};
376 
377                 \textcolor{keywordflow}{case} RPL\_WHOREPLY: \textcolor{comment}{//352}
378                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_WHOREPLY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
379                         \textcolor{keywordflow}{break};
380 
381                 \textcolor{keywordflow}{case} RPL\_MOTDSTART: \textcolor{comment}{//375}
382                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
383                         \textcolor{comment}{/*Coger el primer token*/}
384                         token = strtok(message,s);
385                         \textcolor{comment}{/*Ir por el resto*/}
386                         \textcolor{keywordflow}{if}(token != NULL)\{
387                                 token = strtok(NULL,s); 
388                         \}
389                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
390 
391                         token = NULL;
392                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                        }
393                         \textcolor{keywordflow}{break};
394 
395                 \textcolor{keywordflow}{case} RPL\_MOTD: \textcolor{comment}{//372}
396                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
397                         \textcolor{comment}{/*Coger el primer token*/}
398                         token = strtok(message,s);
399                         \textcolor{comment}{/*Ir por el resto*/}
400                         \textcolor{keywordflow}{if}(token != NULL)\{
401                                 token = strtok(NULL,s); 
402                         \}
403                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
404 
405                         token = NULL;
406                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                }
407                         \textcolor{keywordflow}{break};
408 
409                 \textcolor{keywordflow}{case} RPL\_ENDOFMOTD: \textcolor{comment}{//376}
410                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
411                         \textcolor{comment}{/*Coger el primer token*/}
412                         token = strtok(message,s);
413                         \textcolor{comment}{/*Ir por el resto*/}
414                         \textcolor{keywordflow}{if}(token != NULL)\{
415                                 token = strtok(NULL,s); 
416                         \}
417                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
418 
419                         token = NULL;
420                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
421                         \textcolor{keywordflow}{return} 19;\textcolor{comment}{//cambiar por un define}
422                         \textcolor{keywordflow}{break};
423 
424                 \textcolor{keywordflow}{case} RPL\_TOPIC: \textcolor{comment}{//332}
425                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_TOPIC - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
426                         \textcolor{comment}{//g\_print("\(\backslash\)n=======CASE RPL\_TOPIC=======\(\backslash\)n");}
427                         \textcolor{comment}{//IRCParse\_RplTopic (char *strin, char **prefix, char **nick, char **nick2, char
       **channel, char **msg)}
428                         ret = IRCParse\_RplTopic(message, &prefix, &nick, &channel, &topic);
429                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
430                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_TOPIC -
       IRCParse\_RplTopic devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
431                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
432                         \}
433                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
434                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
435                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
436                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
437                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
438                         sprintf(mensaje,\textcolor{stringliteral}{"El topic para %s es %s "},channel,topic);
439                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
440                         g\_print(\textcolor{stringliteral}{"Existe canal: %d \(\backslash\)n"}, IRCInterface\_QueryChannelExistThread(channel));
441 
442                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);  
443                         \textcolor{keywordflow}{break};
444 
445                 \textcolor{keywordflow}{case} RPL\_UNAWAY: \textcolor{comment}{//305}
446                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_UNAWAY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
447                         IRCParse\_RplUnaway (message, &prefix, &nick, &msg);
448                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
449                         \textcolor{keywordflow}{break};
450 
451                 \textcolor{keywordflow}{case} RPL\_AWAY: \textcolor{comment}{//306}
452                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_AWAY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
453                         IRCParse\_RplAway (message, &prefix, &nick, &nick2, &msg);
454                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
455                         \textcolor{keywordflow}{break};
456 
457                 \textcolor{keywordflow}{case} TOPIC: \textcolor{comment}{//332}
458                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] TOPIC - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
459                         \textcolor{comment}{//   long IRCParse\_Topic (char *strin, char **prefix, char **channel, char **topic)}
460                         ret = IRCParse\_Topic (message, &prefix, &channel, &topic);
461                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
462                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case TOPIC - IRCParse\_Topic
       devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
463                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
464                         \}
465 
466                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
467                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
468                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
469                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
470                         sprintf(mensaje,\textcolor{stringliteral}{"El topic para %s es %s \(\backslash\)n"},channel,topic);
471                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
472                         g\_print(\textcolor{stringliteral}{"Existe canal: %d \(\backslash\)n"}, IRCInterface\_QueryChannelExistThread(channel));
473 
474                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
475                         \textcolor{keywordflow}{break};
476 
477                 \textcolor{keywordflow}{case} RPL\_NOTOPIC:
478                         \textcolor{keywordflow}{break};
479 
480                 \textcolor{keywordflow}{case} RPL\_TOPICWHOTIME: \textcolor{comment}{//333}
481                         \textcolor{keywordflow}{break};  
482 
483                 \textcolor{keywordflow}{case} RPL\_NAMREPLY: \textcolor{comment}{//353 - reply del servidor de de punames()}
484                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_NAMREPLY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
485                         \textcolor{comment}{//long IRCParse\_RplNamReply (char *strin, char **prefix, char **nick, char **type,
       char **channel, char **msg)}
486                         ret = IRCParse\_RplNamReply(message, &prefix, &nick, &type, &channel, &msg);
487                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
488                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_NAMREPLY -
       IRCParse\_RplNamReply devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
489                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
490                         \}
491                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
492                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
493                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
494                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t type: %s \(\backslash\)n"},type);                                                         
495                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
496                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
497 
498                         \textcolor{comment}{//Ojo, que pasa si es names?? sin join}
499                         \textcolor{comment}{//Añadir los nicks a la ventana de lad erecha. Pillarlos del WHO que se envía }
500                         \textcolor{comment}{//despues del join.}
501                         \textcolor{comment}{//OJO es una prueba del funcionamineto de IRCInterface\_AddNickChannel,}
502                         \textcolor{comment}{//los nicks deberían de ser partidos mediante uso strtok o algo parecido}
503                         \textcolor{comment}{//IRCInterface\_AddNickChannel (channel, msg, msg, msg, msg, VOICE);}
504                         \textcolor{comment}{//sprintf(mensaje,"Usuarios en %s: %s",channel,msg);}
505                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(channel,"*",mensaje);}
506                         \hyperlink{aux__functions_8h_a09c2fcb81e148a2f23080a1671869f96}{interface\_mostrar\_nicks}(channel,msg);    
507                         \textcolor{keywordflow}{break};
508 
509                 \textcolor{keywordflow}{case} RPL\_ENDOFNAMES: \textcolor{comment}{//366}
510                         g\_print(\textcolor{stringliteral}{"Mensaje recibido en RPL\_ENDOFNAMES: \(\backslash\)n"});
511                         \textcolor{comment}{//long IRCParse\_RplEndOfNames (char *strin, char **prefix, char **nick, char
       **channel, char **msg)}
512                         ret = IRCParse\_RplEndOfNames(message, &prefix, &nick2, &channel, &msg);
513                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
514                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_ENDOFNAMES -
       IRCParse\_RplEndOfNames devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
515                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
516                         \}
517                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
518                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
519                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);                                                 
520                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
521                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
522 
523                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(channel,"*",msg);}
524                         \textcolor{keywordflow}{break};
525 
526                 \textcolor{keywordflow}{case} JOIN:
527                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] JOIN - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
528                         \textcolor{comment}{//g\_print(MAG "\(\backslash\)nJOIN es %ld con IRC\_CommandQuery\(\backslash\)n" RESET,
       IRC\_CommandQuery(message));}
529                         \textcolor{comment}{//g\_print(MAG "\(\backslash\)nJOIN es %ld con IRCUser\_CommandQuery\(\backslash\)n" RESET,
       IRCUser\_CommandQuery(message));}
530 
531                         ret = IRCParse\_Join (message, &prefix, &channel, &key, &msg);
532                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
533                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: JOIN - IRCParse\_Join devolvio
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
534                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
535                         \}
536                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_Join: \(\backslash\)n"});
537                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
538                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
539                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
540                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t key: %s \(\backslash\)n"},key);
541                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
542 
543                         IRCInterface\_AddNewChannelThread(msg, 0);
544                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
545                         sprintf(mensaje, \textcolor{stringliteral}{"%s (%s) se ha unido al canal"}, nick\_part, prefix);
546                         \textcolor{keywordflow}{if}(!strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, nick\_part))\{
547                                 IRCInterface\_WriteChannelThread(msg,\textcolor{stringliteral}{"*"}, \textcolor{stringliteral}{"Bienvenido al canal"});
548                         \} \textcolor{keywordflow}{else} \{
549                                 IRCInterface\_WriteChannelThread(msg,\textcolor{stringliteral}{"*"}, mensaje);
550                         \}
551                         \textcolor{comment}{//Actualizar al lista de usuarios}
552                         sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},msg);
553                         retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
554                         \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
555                                 g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
556                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
557                         \}
558                         \textcolor{keywordflow}{break};
559 
560                 \textcolor{keywordflow}{case} NAMES:
561                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NAMES - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
562                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)nNo hay nada aquí, revisar (?)"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
563                         \textcolor{keywordflow}{break};
564 
565                 \textcolor{keywordflow}{case} PRIVMSG:
566                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PRIVMSG - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
567                         ret = IRCParse\_Privmsg(message, &prefix, &msgtarget, &msg);
568                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
569                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: IRCParse\_Privmsg devolvio !=
       IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
570                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
571                         \}
572 
573                         \textcolor{keywordflow}{if} ((origin\_nick = strtok(prefix, \textcolor{stringliteral}{"!"})) != NULL)\{
574                                 strcpy(nick\_privmsg, origin\_nick);
575                         \}
576                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick\_privmsg: %s \(\backslash\)n"},nick\_privmsg);
577                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
578                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msgtarget: %s \(\backslash\)n"},msgtarget);
579                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
580 
581                         \textcolor{keywordflow}{if}(msg[0] == 1 || (msg[0] == \textcolor{charliteral}{':'} || msg[1] == 1)) \{ \textcolor{comment}{//envio de ficheros}
582                                 g\_print(\textcolor{stringliteral}{"alguien quiere enviarme un fichero\(\backslash\)n"});
583                                 
584                                 filename = strtok(msg, \textcolor{stringliteral}{" "});
585                                 filename = strtok(NULL, \textcolor{stringliteral}{" "});
586                                 hostname\_destino = strtok(NULL, \textcolor{stringliteral}{" "});
587                                 port = (\textcolor{keywordtype}{unsigned} long) atol(strtok(NULL, \textcolor{stringliteral}{" "}));
588                                 length = (\textcolor{keywordtype}{unsigned} long) atol(strtok(NULL, \textcolor{stringliteral}{" "}));
589                                 g\_print(\textcolor{stringliteral}{"filename: %s \(\backslash\)n"},filename);
590                                 g\_print(\textcolor{stringliteral}{"hostname\_destino: %s \(\backslash\)n"},hostname\_destino);
591                                 g\_print(\textcolor{stringliteral}{"length: %ld \(\backslash\)n"},length);
592                                 g\_print(\textcolor{stringliteral}{"port: %ld \(\backslash\)n"},port);
593 
594                                 \textcolor{keywordflow}{if}(IRCInterface\_ReceiveDialogThread(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, filename) == TRUE)\{
595                                         g\_print(\textcolor{stringliteral}{"Lanzamos el hilo que guarda el archivo\(\backslash\)n"});
596                                         \textcolor{comment}{//pthread\_t tid;}
597 
598                                         \hyperlink{struct_file__args}{File\_args} args;
599                                         args.\hyperlink{struct_file__args_a9aa177aea3a099397a09131a92f30115}{hostname} = hostname\_destino;
600                                         args.\hyperlink{struct_file__args_ad24dfcb255f29ee677793a0051c7336b}{filename} = filename;
601                                         args.\hyperlink{struct_file__args_a83e78eb2ebacdc7e63eca61d1340fa61}{port} = port;
602                                         args.\hyperlink{struct_file__args_a3168e8734e7ad263d88a6da49b4aff20}{length} = length;
603 
604                                         \textcolor{keywordflow}{if}(pthread\_create( &\hyperlink{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}{sendf\_tid}, NULL, (\textcolor{keywordtype}{void}*) 
      \hyperlink{aux__functions_8h_a9a7f9a514711f5954007dc83533d9362}{save\_file}, (\textcolor{keywordtype}{void}*) &args) < 0)\{
605                                         g\_print(\textcolor{stringliteral}{"Error en la llamada a save\_file\(\backslash\)n"});
606                                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
607                                         \}
608                                         \textcolor{keywordflow}{break};
609                                 \}
610                                 \textcolor{comment}{/*}
611 \textcolor{comment}{                                if (sscanf(msg, "\(\backslash\)001AUDIOCHAT %ms %li", &hostname\_destino, &port) > 0) \{}
612 \textcolor{comment}{                                        g\_print("host=%s, port=%li\(\backslash\)n", hostname\_destino, port);}
613 \textcolor{comment}{                                \} else\{}
614 \textcolor{comment}{                                        g\_print("Formato incorrecto en envio de fichero\(\backslash\)n");}
615 \textcolor{comment}{                                \}*/}
616                                 ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command, strlen(
      command));
617                                 \textcolor{keywordflow}{if}(ret < 0)\{
618                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case PRIVMSG -
       enviarDatos() devolvio error (ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
619                                         exit(1);
620                                 \}
621                                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout }
622                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case PRIVMSG -
       enviarDatos() mandó 0 Bytes(ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)t(Timeout de conexión probablemente)\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
623                                         exit(1);
624                                 \}
625                         \}
626 
627                         \textcolor{keywordflow}{if}(msgtarget[0] != \textcolor{charliteral}{'#'})\{\textcolor{comment}{//no grupo}
628                                 IRCInterface\_AddNewChannelThread(nick\_privmsg, 0);                              
629                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (nick\_privmsg, nick\_privmsg, msg);
630                                 \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
631                         \}
632 
633                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(msgtarget, nick\_privmsg, msg);}
634                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      msgtarget, nick\_privmsg, msg);
635                         \textcolor{keywordflow}{break};
636 
637                 \textcolor{keywordflow}{case} PART:
638                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PART - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
639                         ret = IRCParse\_Part (message, &prefix, &channel, &msg);
640                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
641                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case PART - IRCParse\_Part
       devolvio != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
642                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
643                         \}
644                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_PART: \(\backslash\)n"});
645                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
646                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
647                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
648                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
649 
650                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
651                         IRCInterface\_DeleteNickChannelThread(channel, nick\_part);
652                         sprintf(mensaje, \textcolor{stringliteral}{"El usuario %s ha salido del grupo (%s)"},nick\_part, msg);
653                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
654                         \textcolor{keywordflow}{if}(strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, nick\_part) == 0)\{
655                                 IRCInterface\_RemoveChannelThread(channel);
656                         \} \textcolor{keywordflow}{else} \{
657                                 sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channel);
658                                 retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
659                                 \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
660                                         g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
661                                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
662                                 \}
663                         \}
664 
665                         \textcolor{keywordflow}{break};
666 
667                 \textcolor{keywordflow}{case} NOTICE:
668                         \textcolor{comment}{//g\_print("\(\backslash\)n=======CASE NOTICE=======\(\backslash\)n");}
669                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NOTICE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
670 
671                         IRCParse\_Notice(message, &prefix, &msgtarget, &msg);
672 
673                         g\_print(\textcolor{stringliteral}{"prefix = %s\(\backslash\)n"}, prefix);
674                         g\_print(\textcolor{stringliteral}{"msgtarget = %s\(\backslash\)n"}, msgtarget);
675                         g\_print(\textcolor{stringliteral}{"msg = %s\(\backslash\)n"}, msg);
676                         
677 
678                         \textcolor{comment}{//break;}
679                         \textcolor{comment}{//caso: NOTICE !(generado por el server) (triggeado por /HELP, p.ej.)}
680                         \textcolor{comment}{//caso: !(:irc.eps.net NOTICE testame2 :example "HELP quit" or "HELP privmsg".)}
681 
682                         \textcolor{keywordflow}{if}(msg == NULL || msgtarget == NULL || prefix == NULL)\{
683                                 \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{
      "*"},\textcolor{stringliteral}{""});
684                                 \textcolor{keywordflow}{break};
685                         \}
686 
687                         \textcolor{keywordflow}{if}((!strcmp(msgtarget, \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user})) && (strcmp(prefix,\textcolor{stringliteral}{"irc.eps.net"}) != 0))
       \{
688                                 IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &
      server\_part);                         
689                                 sprintf(mensaje, \textcolor{stringliteral}{">%s<"}, nick\_part);
690                                 IRCInterface\_AddNewChannelThread(nick\_part, 0);
691                                 IRCInterface\_WriteChannelThread (nick\_part,mensaje,msg);
692                         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(msgtarget[0] == \textcolor{charliteral}{'#'})\{
693                                 IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &
      server\_part);
694                                 sprintf(mensaje, \textcolor{stringliteral}{">%s/%s<"}, nick\_part, msgtarget);
695                                 IRCInterface\_AddNewChannelThread(msgtarget, 0);
696                                 IRCInterface\_WriteChannelThread (msgtarget,mensaje,msg);
697                         \} \textcolor{keywordflow}{else} \{\textcolor{comment}{//AUTH, /HELP}
698                                 \textcolor{comment}{//g\_print(RED "\(\backslash\)n>>>>>>>>>> NO BOI\(\backslash\)n" RESET);}
699                                 \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{
      "*"},msg);
700                         \}
701                         \textcolor{comment}{//IRCInterface\_WriteSystemThread("*",msg);}
702                         \textcolor{keywordflow}{break};
703 
704                 \textcolor{keywordflow}{case} PING:
705                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PING - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
706                         \textcolor{comment}{//:irc.eps.net PONG irc.eps.net :LAG1460877705692323}
707                         IRCParse\_Ping (message, &prefix, &server, &server2, &msg);
708                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
709                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server: %s \(\backslash\)n"},server);
710                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server2: %s \(\backslash\)n"},server2);
711                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
712                         IRCMsg\_Pong(&command\_pong, prefix?prefix:\hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname}, server?server:\textcolor{stringliteral}{""}, 
      server2?server2:\textcolor{stringliteral}{""}, msg?msg:\textcolor{stringliteral}{""});
713                         \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command\_pong, strlen(command\_pong));
714                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Pong enviado\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
715                         IRCInterface\_PlaneRegisterOutMessageThread(command\_pong);
716                         \textcolor{keywordflow}{break};
717 
718                 \textcolor{keywordflow}{case} KICK:
719                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] KICK - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
720                         \textcolor{comment}{//long IRCParse\_Kick (char *strin, char **prefix, char **channel, char **user, char
       **comment)}
721 
722                         ret = IRCParse\_Kick(message, &prefix, &channel, &user, &comment);
723                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
724                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case KICK - IRCParse\_Kick
       devolvio != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
725                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
726                         \}
727                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
728                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
729                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
730                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n"},user);
731                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t comment: %s \(\backslash\)n\(\backslash\)n"},comment);
732 
733                         sprintf(mensaje,\textcolor{stringliteral}{"%s Ha sido echado de %s con mensaje/motivo(%s)"},user, channel, 
      comment);
734                         
735                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
736                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
737 
738                         \textcolor{comment}{//Actualizar al lista de usuarios}
739                         IRCInterface\_DeleteNickChannelThread (channel, user);
740                         \textcolor{keywordflow}{if}(!strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},user))\{
741                                 IRCInterface\_RemoveChannelThread(channel);
742                         \}
743                         \textcolor{comment}{/*memset(mensaje,0,MAXDATA);}
744 \textcolor{comment}{                        sprintf(mensaje,"/names %s",channel);}
745 \textcolor{comment}{                        retorno = punames(mensaje);}
746 \textcolor{comment}{                        if(retorno == ERR)\{}
747 \textcolor{comment}{                                g\_print("ERROR - MODE - punames");}
748 \textcolor{comment}{                                return ERR;                             }
749 \textcolor{comment}{                        \} */}
750                         \textcolor{keywordflow}{break};
751 
752                 \textcolor{keywordflow}{case} ERR\_UNKNOWNMODE: \textcolor{comment}{//472}
753                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_UNKNOWNMODE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
754                         \textcolor{comment}{//      long IRCParse\_ErrUnknownMode (char *strin, char **prefix, char **nick, char
       **modechar, char **channel, char **msg)}
755                         ret = IRCParse\_ErrUnknownMode(message, &prefix, &nick, &modechar, &channel, &msg);
756                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
757                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case ERR\_UNKNOWNMODE -
       IRCParse\_ErrUnknownMode != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
758                                 \textcolor{comment}{//return -1;}
759                         \}
760                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_ErrUnknownMode: \(\backslash\)n"});
761                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
762                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
763                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
764                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t modechar: %s \(\backslash\)n"},nick);                                             
765                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
766                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);         
767 
768                         sprintf(mensaje,\textcolor{stringliteral}{"%s %s\(\backslash\)n"},channel,msg);
769                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
770                         \textcolor{keywordflow}{break};
771 
772                 \textcolor{keywordflow}{case} MODE: \textcolor{comment}{//}
773                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] MODE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
774                         \textcolor{comment}{//    long IRCParse\_Mode (char *strin, char **prefix, char **channeluser, char
       **mode, char **user)}
775                         ret = IRCParse\_Mode(message, &prefix, &channeluser, &mode, &user);
776                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
777                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case MODE - IRCParse\_Mode !=
       IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
778                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
779                         \}
780                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
781                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
782                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channeluser: %s \(\backslash\)n"},channeluser);
783                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t mode: %s \(\backslash\)n"},mode);
784                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n\(\backslash\)n"},user);
785 
786                         nick = strtok(prefix,\textcolor{stringliteral}{"!"}); \textcolor{comment}{//Coger el usuario que ha mandando el mode}
787                         \textcolor{keywordflow}{if}(user != NULL)\{ \textcolor{comment}{//Modo usuario}
788                                 \textcolor{comment}{//Comprobar si es k o l }
789                                 \textcolor{keywordflow}{if}(strcasecmp(mode,\textcolor{stringliteral}{"+k"}) == 0)\{
790                                         sprintf(mensaje,\textcolor{stringliteral}{"%s establece contraseña del canal %s como: %s "},
      nick, channeluser, user);
791                                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
792                                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
793                                         \textcolor{keywordflow}{break};          
794                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcasecmp(mode,\textcolor{stringliteral}{"+l"}) == 0)\{
795                                         sprintf(mensaje,\textcolor{stringliteral}{"%s establece límite del canal %s a %s usuarios"},
      nick, channeluser, user);
796                                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
797                                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
798                                         \textcolor{keywordflow}{break};                                          
799                                 \}
800 
801                                 sprintf(mensaje,\textcolor{stringliteral}{"%s establece el modo %s al usuario %s en el canal %s "},
      nick, mode, user, channeluser);
802                                 g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
803                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
804 
805                                 \textcolor{comment}{/* No funciona IRCInterface\_ChangeNickStateChannel :(}
806 \textcolor{comment}{                                if(strcasecmp(mode,"+o") == 0)\{}
807 \textcolor{comment}{                                        g\_print("modo op\(\backslash\)n");}
808 \textcolor{comment}{                                        IRCInterface\_ChangeNickStateChannel (channeluser, nick, OPERATOR);}
809 \textcolor{comment}{                                \}else if(strcasecmp(mode,"+v") == 0)\{}
810 \textcolor{comment}{                                        g\_print("modo voice\(\backslash\)n");}
811 \textcolor{comment}{                                        IRCInterface\_ChangeNickStateChannel (channeluser, nick, VOICE);}
812 \textcolor{comment}{                                \}else\{}
813 \textcolor{comment}{                                        g\_print("else otro modo\(\backslash\)n");*/}
814                                         \textcolor{comment}{//Actualizar al lista de usuarios}
815                                         
816                                         memset(mensaje,0,\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA});
817                                         sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channeluser);
818                                         retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
819                                         \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
820                                                 g\_print(\textcolor{stringliteral}{"ERROR - MODE - punames"});
821                                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
822                                         \}                                       
823                                 \textcolor{comment}{//\}                             }
824                         \}\textcolor{keywordflow}{else}\{
825                                 sprintf(mensaje,\textcolor{stringliteral}{"%s establece modo %s %s "}, nick, channeluser, mode);
826                                 g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
827                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
828                         \}                       
829                         \textcolor{keywordflow}{break};
830 
831                 \textcolor{keywordflow}{case} INVITE:                    
832                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] INVITE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
833                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      message);
834                         \textcolor{keywordflow}{break};
835 
836                 \textcolor{keywordflow}{case} NICK:
837                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NICK - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
838 
839                         IRCParse\_Nick (message, &prefix, &nick, &msg);
840                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
841                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
842                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
843                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick); \textcolor{comment}{//esta a null}
844                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg); \textcolor{comment}{//el nick viene aqui}
845                         IRCInterface\_ChangeNickThread(nick\_part, msg);
846                         sprintf(mensaje, \textcolor{stringliteral}{"%s ahora es conocido como %s"}, nick\_part, msg);
847                         \textcolor{keywordflow}{if}(!strcmp(nick\_part, \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}))\{
848                                 strcpy(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},msg);                 
849                         \}
850                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);    
851                         g\_print(\textcolor{stringliteral}{"new nick: %s\(\backslash\)n"}, msg);
852 
853                         \textcolor{keywordflow}{break};
854 
855                 \textcolor{keywordflow}{case} QUIT:
856                         \textcolor{comment}{/*}
857 \textcolor{comment}{                        * Enfoque 1: Cuando alguien sale (QUIT del servidor)}
858 \textcolor{comment}{                        *       Obtener la lista de canales abiertos -> '/names' en cada canal -> Capturar
       reply del servidor:}
859 \textcolor{comment}{                        *       353 -> interface\_mostrar\_nicks(channel,msg); (se actualizan todas las
       listas de chats abiertos)}
860 \textcolor{comment}{                        *}
861 \textcolor{comment}{                        */}
862                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] QUIT - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
863                         
864                         IRCParse\_Quit (message, &prefix, &msg);
865                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
866                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
867                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
868                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg);
869                         sprintf(mensaje, \textcolor{stringliteral}{"%s se ha desconectado (%s)"}, nick\_part, msg);
870                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},mensaje);
871 
872                         IRCInterface\_ListAllChannelsThread(&channelsQuit, &numChannelsQuit);
873 
874                         \textcolor{keywordflow}{for}(i=0; i<numChannelsQuit; i++)\{
875                                 sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channelsQuit[i]);
876                                 retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
877                                 \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
878                                         g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
879                                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
880                                 \}
881                         \}
882                         \textcolor{keywordflow}{break};
883 
884                 \textcolor{keywordflow}{case} RPL\_CHANNELMODEIS: \textcolor{comment}{//324   }
885                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_CHANNELMODEIS - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
886                         \textcolor{comment}{//long IRCParse\_RplChannelModeIs(char *strin, char **prefix, char **nick, char
       **channel, char **modetxt)}
887                         \textcolor{comment}{/*ret = IRCParse\_RplChannelModeIs(message, &prefix, &channeluser, &mode, &user);}
888 \textcolor{comment}{                        if(ret != IRC\_OK)\{}
889 \textcolor{comment}{                                g\_print("ERROR: IRCInterface\_Connect - IRCParse\_RplTopic\(\backslash\)n");}
890 \textcolor{comment}{                                return ERR;}
891 \textcolor{comment}{                        \}}
892 \textcolor{comment}{                        g\_print("\(\backslash\)t message: %s \(\backslash\)n",message);}
893 \textcolor{comment}{                        g\_print("\(\backslash\)t prefix: %s \(\backslash\)n",prefix);}
894 \textcolor{comment}{                        g\_print("\(\backslash\)t channeluser: %s \(\backslash\)n",channeluser);}
895 \textcolor{comment}{                        g\_print("\(\backslash\)t mode: %s \(\backslash\)n",mode);}
896 \textcolor{comment}{                        g\_print("\(\backslash\)t user: %s \(\backslash\)n\(\backslash\)n",user);}
897 \textcolor{comment}{}
898 \textcolor{comment}{                        sprintf(mensaje,"%s establece modo %s %s ", user, channeluser, mode);}
899 \textcolor{comment}{                        }
900 \textcolor{comment}{                        g\_print("Mensaje: %s \(\backslash\)n",mensaje);}
901 \textcolor{comment}{                        IRCInterface\_WriteChannelThread(channeluser,"*",mensaje);*/}
902 
903                         \textcolor{comment}{//Actualizar al lista de usuarios}
904                         \textcolor{keywordflow}{break};  
905 
906                 \textcolor{keywordflow}{case} ERR\_CHANOPRIVSNEEDED: \textcolor{comment}{//482}
907                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_CHANOPRIVSNEEDED - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
908                         \textcolor{comment}{//   long IRCParse\_ErrChanOPrivsNeeded (char *strin, char **prefix, char **nick,
       char **channel, char **msg)}
909                         ret = IRCParse\_ErrChanOPrivsNeeded(message, &prefix, &nick, &channel, &msg);
910                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
911                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case ERR\_CHANOPRIVSNEEDED -
       IRCParse\_ErrChanOPrivsNeeded != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
912                                 \textcolor{comment}{//return ERR;}
913                         \}
914                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_ErrChanOPrivsNeeded: \(\backslash\)n"});
915                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
916                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
917                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);                 
918                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
919                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);         
920 
921                         sprintf(mensaje,\textcolor{stringliteral}{"%s %s\(\backslash\)n"},channel,msg);
922                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
923                         \textcolor{keywordflow}{break};
924 
925                 \textcolor{keywordflow}{case} ERR\_NOSUCHSERVER:
926                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_NOSUCHSERVER - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
927                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      message);
928                         \textcolor{keywordflow}{break};
929 
930                 \textcolor{comment}{/*TRATAMIENTO DE ERRORES*/}
931                 \textcolor{keywordflow}{case} IRCERR\_NOCOMMAND:
932                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: Mensaje de error recibido en switch():
      \(\backslash\)n\(\backslash\)tIRCERR\_NOCOMMAND -  no hay ningún comando en la cadena de caracteres\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
933                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      message);
934                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
935 
936                 \textcolor{keywordflow}{case} IRCERR\_NOPARAMS:
937                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: Mensaje de error recibido en switch():
      \(\backslash\)n\(\backslash\)tIRCERR\_NOPARAMS -  se ha introducido una cadena de caracteres nula\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
938                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
939                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
940 
941                 \textcolor{keywordflow}{case} IRCERR\_UNKNOWNCOMMAND:
942                         \textcolor{comment}{//g\_print(MAG"\(\backslash\)n>>>>>>>>>>>>>>>>>>>>>>>>>>\(\backslash\)n"RESET);}
943                         \textcolor{comment}{//ret =  IRCParse\_GeneralCommand (message, &prefix, &type, &params, &n\_params,
       &msg);}
944                         \textcolor{comment}{/*Intenta hacer un parseo apra un type no soportado por IRC\_CommandQuery()*/}
945                         unknw\_type = \hyperlink{aux__functions_8h_a90798d5fe15fdd743f8802b0f154b854}{parse\_type}(message);
946                         \textcolor{keywordflow}{if}(unknw\_type != \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
947                                 \textcolor{keywordflow}{switch}(unknw\_type)\{ \textcolor{comment}{//Intentar tratar un mensaje no reconocido por
       IRC\_CommandQuery() }
948                                         \textcolor{keywordflow}{case} 250:
949                                                 g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] unknw\_type = 250 -
       message = %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
950                                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
951                                                 \textcolor{keywordflow}{if} (substring)\{
952                                                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
953                                                 \}
954                                                 
      \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},substring);
955 
956                                                 substring = NULL;
957                                         \textcolor{keywordflow}{break};
958 
959                                         \textcolor{keywordflow}{default}:
960                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: case
       IRCERR\_UNKNOWNCOMMAND:\(\backslash\)n\(\backslash\)tNo se ha definido un tratamiento para un mensaje desconocido con type = %d\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, unknw\_type);
961                                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
962                                         \textcolor{keywordflow}{break};
963                                 \}
964                                 \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
965                         \}
966 
967                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: Mensaje de error recibido en switch():\(\backslash\)n\(\backslash\)t
      IRCERR\_UNKNOWNCOMMAND -  l comando que contiene no es reconocido por esta función.\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
968                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
969                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
970 
971                 \textcolor{keywordflow}{default}:
972                         \textcolor{keywordflow}{switch}(\hyperlink{aux__functions_8h_a1738b19e427c47733b310cbe08431a56}{parse\_type2}(message))\{
973                                 \textcolor{keywordflow}{case} 306: \textcolor{comment}{//parche porque no devuelve 306 para AWAY}
974                                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] 306 (RPL\_AWAY) - message = %s
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
975                                         \textcolor{comment}{//IRCParse\_RplAway (message, &prefix, &nick, &nick2, &msg);}
976                                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}
      (\textcolor{stringliteral}{"*"},\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'}), \textcolor{charliteral}{':'}));
977                                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
978                                 \textcolor{keywordflow}{case} 311: \textcolor{comment}{//WHOIS}
979                                 \textcolor{keywordflow}{case} 312:
980                                 \textcolor{keywordflow}{case} 319:
981                                 \textcolor{keywordflow}{case} 317:
982                                 \textcolor{keywordflow}{case} 318:
983                                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] 311-318 (RPL\_WHOIS...) -
       message = %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
984                                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}
      (\textcolor{stringliteral}{"*"},\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'}), \textcolor{charliteral}{':'}));
985                                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
986                                 \textcolor{keywordflow}{default}:
987                                         \textcolor{keywordflow}{break};
988                         \}
989                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: Alcanzado default del switch()(TO\_DO):\(\backslash\)n\(\backslash\)t
       %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
990                         \textcolor{comment}{//sprintf(aux,"[%s] %s",gmtime(time(NULL)), nick)}
991                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
992                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
993         \}
994 
995         \textcolor{comment}{//Liberamos memoria}
996         \textcolor{comment}{//
      mfree(33,msg,nick,nick2,servername,versionname,timedate,version,availableusermodes,availablechannelmodes,addedg,type,visible,topic,channel,key,}
997         \textcolor{comment}{//
      msgtarget,origin\_nick,filename,hostname\_destino,nick\_part,username\_part,host\_part,server\_part,server,server2,command\_pong,token,modechar,channeluser,}
998         \textcolor{comment}{//mode,user,comment,realname,host);}
999         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
1000 
1001 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a41f93f364aea303a0c93177289733f92_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{\index{xchat2.\-c@{xchat2.\-c}!glue\-And\-Query@{glue\-And\-Query}}
\index{glue\-And\-Query@{glue\-And\-Query}!xchat2.c@{xchat2.\-c}}
\subsubsection[{glue\-And\-Query}]{\setlength{\rightskip}{0pt plus 5cm}void glue\-And\-Query (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command, }
\item[{char $\ast$}]{last\-\_\-command}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}

\begin{DoxyCode}
1003                                                     \{
1004         \textcolor{keywordtype}{char}* glued\_command = (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
1005         
1006         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1007         strcat(glued\_command, command);
1008 
1009         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
1010         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
1011 
1012         free(command);
1013         free(glued\_command);
1014 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a33f80a29a744e4182b29e23f13c1f05c}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-Channel\-Key@{I\-R\-C\-Interface\-\_\-\-Activate\-Channel\-Key}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-Channel\-Key@{I\-R\-C\-Interface\-\_\-\-Activate\-Channel\-Key}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-Channel\-Key}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-Channel\-Key (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a33f80a29a744e4182b29e23f13c1f05c}

\begin{DoxyCode}
1222 \{
1223         \textcolor{keywordtype}{char} modo[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
1224 
1225         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateChannelKey(char *channel, char *key) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1226 
1227         sprintf(modo,\textcolor{stringliteral}{"+k %s"},key);
1228         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, modo) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1229                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateChannelKey: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1230 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a33f80a29a744e4182b29e23f13c1f05c_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a7a439929c246e342ae525139b2c39f5d}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-External\-Messages@{I\-R\-C\-Interface\-\_\-\-Activate\-External\-Messages}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-External\-Messages@{I\-R\-C\-Interface\-\_\-\-Activate\-External\-Messages}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-External\-Messages}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-External\-Messages (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a7a439929c246e342ae525139b2c39f5d}

\begin{DoxyCode}
1263 \{
1264         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateExternalMessages(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1265         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"+n"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1266                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateExternalMessages: Error en changeMode,
       devolvió ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1267 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a7a439929c246e342ae525139b2c39f5d_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_ac72762ab1e3575b421b967241db23f9c}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-Invite@{I\-R\-C\-Interface\-\_\-\-Activate\-Invite}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-Invite@{I\-R\-C\-Interface\-\_\-\-Activate\-Invite}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-Invite}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-Invite (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ac72762ab1e3575b421b967241db23f9c}

\begin{DoxyCode}
1300 \{
1301         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateInvite(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1302         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"+i"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1303                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateInvite: Error en changeMode, devolvió ERR\(\backslash\)n
      "} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1304 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_ac72762ab1e3575b421b967241db23f9c_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_af83498f4058311f4562c43a9b70566b2}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-Moderated@{I\-R\-C\-Interface\-\_\-\-Activate\-Moderated}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-Moderated@{I\-R\-C\-Interface\-\_\-\-Activate\-Moderated}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-Moderated}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-Moderated (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_af83498f4058311f4562c43a9b70566b2}

\begin{DoxyCode}
1337 \{
1338         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateModerated(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1339 
1340         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"+m"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1341                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateModerated: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1342 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_af83498f4058311f4562c43a9b70566b2_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_ab5694cc413472173bfcaa969c7d9800e}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-Nicks\-Limit@{I\-R\-C\-Interface\-\_\-\-Activate\-Nicks\-Limit}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-Nicks\-Limit@{I\-R\-C\-Interface\-\_\-\-Activate\-Nicks\-Limit}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-Nicks\-Limit}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-Nicks\-Limit (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{int}]{limit}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ab5694cc413472173bfcaa969c7d9800e}

\begin{DoxyCode}
1378 \{
1379         \textcolor{keywordtype}{char} mode[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
1380 
1381         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateNicksLimit(char *channel, int limit) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1382 
1383         sprintf(mode,\textcolor{stringliteral}{"+l %d"},limit);
1384         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, mode) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1385                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateNicksLimit: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1386 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_ab5694cc413472173bfcaa969c7d9800e_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_ab1f09c737c7c109a97e22de6072d731d}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-Private@{I\-R\-C\-Interface\-\_\-\-Activate\-Private}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-Private@{I\-R\-C\-Interface\-\_\-\-Activate\-Private}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-Private}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-Private (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ab1f09c737c7c109a97e22de6072d731d}

\begin{DoxyCode}
1419 \{
1420         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivatePrivate(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1421         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"+p"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1422                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivatePrivate: Error en changeMode, devolvió ERR
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1423 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_ab1f09c737c7c109a97e22de6072d731d_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_ac45f12d4dcacf3b5485eec6fdc51df93}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-Protect\-Topic@{I\-R\-C\-Interface\-\_\-\-Activate\-Protect\-Topic}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-Protect\-Topic@{I\-R\-C\-Interface\-\_\-\-Activate\-Protect\-Topic}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-Protect\-Topic}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-Protect\-Topic (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ac45f12d4dcacf3b5485eec6fdc51df93}

\begin{DoxyCode}
1456 \{
1457         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateProtectTopic(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1458         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"+t"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1459                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateProtectTopic: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1460 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_ac45f12d4dcacf3b5485eec6fdc51df93_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_aa9e9155115b834d85a4d10cb27f99093}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Activate\-Secret@{I\-R\-C\-Interface\-\_\-\-Activate\-Secret}}
\index{I\-R\-C\-Interface\-\_\-\-Activate\-Secret@{I\-R\-C\-Interface\-\_\-\-Activate\-Secret}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Activate\-Secret}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Activate\-Secret (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_aa9e9155115b834d85a4d10cb27f99093}

\begin{DoxyCode}
1493 \{
1494         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ActivateSecret(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1495 
1496         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"+s"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1497                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_ActivateSecret: Error en changeMode, devolvió ERR\(\backslash\)n
      "} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1498 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_aa9e9155115b834d85a4d10cb27f99093_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a42773b5a840f9d0455f148d285e1e595}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Ban\-Nick@{I\-R\-C\-Interface\-\_\-\-Ban\-Nick}}
\index{I\-R\-C\-Interface\-\_\-\-Ban\-Nick@{I\-R\-C\-Interface\-\_\-\-Ban\-Nick}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Ban\-Nick}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Ban\-Nick (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a42773b5a840f9d0455f148d285e1e595}

\begin{DoxyCode}
1533 \{
1534         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_BanNick(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1535 
1536         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, nick, \textcolor{stringliteral}{"+b"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1537                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_BanNick: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1538 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a42773b5a840f9d0455f148d285e1e595_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_aed072f4ce0d6e90697d4d6eb0278a2ad}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Connect@{I\-R\-C\-Interface\-\_\-\-Connect}}
\index{I\-R\-C\-Interface\-\_\-\-Connect@{I\-R\-C\-Interface\-\_\-\-Connect}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Connect}]{\setlength{\rightskip}{0pt plus 5cm}long I\-R\-C\-Interface\-\_\-\-Connect (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick, }
\item[{char $\ast$}]{user, }
\item[{char $\ast$}]{realname, }
\item[{char $\ast$}]{password, }
\item[{char $\ast$}]{server, }
\item[{int}]{port, }
\item[{boolean}]{ssl}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_aed072f4ce0d6e90697d4d6eb0278a2ad}

\begin{DoxyCode}
1585 \{
1586         \textcolor{keywordtype}{int} optval = 1;
1587         \textcolor{keywordtype}{long} ret = -1;
1588         \textcolor{keywordtype}{int} retorno = -1;
1589         \textcolor{keywordtype}{char} *command = NULL;
1590         \textcolor{keywordtype}{char} *prefix = NULL;
1591         \textcolor{keywordtype}{int} sockfd = -1;
1592 
1593         \textcolor{keyword}{struct }hostent *he;
1594     \textcolor{keyword}{struct }in\_addr **addr\_list;
1595     \textcolor{keywordtype}{int} i=0;
1596     \textcolor{keywordtype}{char} ip\_addr[INET\_ADDRSTRLEN] = \{0\};
1597 
1598     \textcolor{keywordtype}{char} *msgNick = NULL;
1599     \textcolor{keywordtype}{char} mode[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
1600 
1601         g\_print(\textcolor{stringliteral}{"IRCInterface\_Connect - Datos introducidos por el usuario \(\backslash\)n"});
1602         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
1603         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n"},user);
1604         g\_print(\textcolor{stringliteral}{"\(\backslash\)t realname: %s \(\backslash\)n"},realname);
1605         g\_print(\textcolor{stringliteral}{"\(\backslash\)t password: %s \(\backslash\)n"},password);
1606         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server: %s \(\backslash\)n"},server);
1607         g\_print(\textcolor{stringliteral}{"\(\backslash\)t port: %d \(\backslash\)n"},port);
1608         g\_print(\textcolor{stringliteral}{"\(\backslash\)t ssl: %d \(\backslash\)n"},ssl);
1609 
1610     \textcolor{keywordflow}{if} ((he = gethostbyname(server)) == NULL) \{  \textcolor{comment}{// get the host info}
1611         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: gethostbyname() devol NULL\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1612         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1613     \}
1614 
1615     \textcolor{comment}{// print information about this host:}
1616     g\_print(\textcolor{stringliteral}{"Official name is: %s\(\backslash\)n"}, he->h\_name);
1617     g\_print(\textcolor{stringliteral}{"    IP addresses: "});
1618 
1619     addr\_list = (\textcolor{keyword}{struct }in\_addr **)he->h\_addr\_list;
1620     \textcolor{keywordflow}{for}(i = 0; addr\_list[i] != NULL; i++) \{
1621         strcat(ip\_addr,inet\_ntoa(*addr\_list[i]));
1622         g\_print(\textcolor{stringliteral}{"%s "}, inet\_ntoa(*addr\_list[i]));
1623     \}
1624     g\_print(\textcolor{stringliteral}{"\(\backslash\)n"});
1625     g\_print(\textcolor{stringliteral}{"ip\_addr: %s \(\backslash\)n"},ip\_addr);
1626 
1627     \textcolor{keyword}{struct }sockaddr\_in server\_struct;
1628 
1629     \textcolor{comment}{/*Socket*/}
1630     sockfd = socket(AF\_INET,SOCK\_STREAM,0\textcolor{comment}{/*TCP*/});
1631     \textcolor{keywordflow}{if} (sockfd == -1)\{
1632         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: Error creando socket, devolvió < 0\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1633         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1634     \}
1635 
1636     optval = 1;
1637     setsockopt(sockfd, SOL\_SOCKET, SO\_REUSEADDR, (\textcolor{keyword}{const} \textcolor{keywordtype}{void} *)&optval , \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})); \textcolor{comment}{//reutilizar socket
       sucesivas ejecuciones}
1638 
1639     memset(&server\_struct, \textcolor{charliteral}{'0'}, \textcolor{keyword}{sizeof}(server\_struct)); 
1640     server\_struct.sin\_family = AF\_INET;
1641     server\_struct.sin\_port = htons(port); 
1642     memset(&(server\_struct.sin\_zero), \textcolor{charliteral}{'\(\backslash\)0'}, 8);
1643     server\_struct.sin\_addr = **addr\_list; 
1644 
1645     \textcolor{comment}{/*Connect*/}
1646     \textcolor{keywordflow}{if} (connect(sockfd, (\textcolor{keyword}{struct} sockaddr*)&server\_struct, \textcolor{keyword}{sizeof}(server\_struct)) < 0)\{
1647         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: Error en connect(), devolivó < 0\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1648         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1649     \}
1650 
1651         \textcolor{comment}{//Conectarse al socket}
1652         \textcolor{comment}{//sockfd = clienteConexionTCP(ip\_addr,port);}
1653         \textcolor{keywordflow}{if}(sockfd == -1)\{
1654                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: sockfd == -1\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1655                 \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1656         \}\textcolor{keywordflow}{else}\{
1657                 g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Conexión establecida con host: %s y puerto: %d \(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, server, port);
1658         \}
1659 
1660         \textcolor{comment}{//Copiar los parametros a las variables globales}
1661         strcpy(\hyperlink{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{host\_name}, he->h\_name);
1662     strcpy(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},nick);
1663     \hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user} = sockfd;
1664 
1665         \textcolor{keywordflow}{if}(ssl == FALSE)\{
1666                 g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Lanzamos el hilo que recibe mensajes\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1667                 \textcolor{keywordflow}{if}((ret = pthread\_create( &\hyperlink{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{recv\_tid}, NULL, (\textcolor{keywordtype}{void}*) 
      \hyperlink{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}{receive\_messages}, (\textcolor{keywordtype}{void}*) \textcolor{stringliteral}{"no\_arg"})) != 0)\{
1668                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: pthread\_create() devolvio != 0, error = %d
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, (\textcolor{keywordtype}{int})ret);
1669                 \textcolor{comment}{//logERR("pthread\_detach() devolvio error");}
1670                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
1671                 \}
1672 
1673                 \textcolor{keywordflow}{if} (pthread\_detach(\hyperlink{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{recv\_tid}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
1674                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: pthread\_detach() devolvio error\(\backslash\)n"}
       \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1675                          \textcolor{comment}{//logERR("pthread\_detach() devolvio error");}
1676                          \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
1677                 \}
1678                 \textcolor{comment}{//sleep(5);}
1679                 \textcolor{comment}{//Prueba CAP}
1680                 \textcolor{comment}{/*}
1681 \textcolor{comment}{                retorno = enviarDatos(sockfd, "CAP LS 302", strlen("CAP LS 302")+1);}
1682 \textcolor{comment}{                if(retorno <= 0)\{}
1683 \textcolor{comment}{                        g\_print(RED "ERROR - In IRCInterface\_Connect: enviarDatos() envió %d Bytes -
       NICK\(\backslash\)n" RESET, retorno);}
1684 \textcolor{comment}{                        return IRCERR\_NOCONNECT;}
1685 \textcolor{comment}{                \}}
1686 \textcolor{comment}{                IRCInterface\_PlaneRegisterOutMessage(command);}
1687 \textcolor{comment}{                */}
1688 
1689                 \textcolor{comment}{//Enviar pass si existe}
1690                 \textcolor{keywordflow}{if}((password != NULL) && (strlen(password) > 0))\{ \textcolor{comment}{//Comprobar si hay password}
1691                         \textcolor{comment}{//Enviar mensaje al servidor con la pass}
1692                         ret = IRCMsg\_Pass (&command, prefix, password);
1693                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
1694                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: IRCMsg\_Pass devolvio
       IRCERR\_NOPASSWORD: No se ha introducido una clave.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1695                                 \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1696                         \}
1697                         g\_print(\textcolor{stringliteral}{"IRCMsg\_Pass: %s"},command);
1698                         retorno = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(sockfd, command, strlen(command));
1699                         \textcolor{keywordflow}{if}(retorno <= 0)\{
1700                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: enviarDatos() envió %d
       Bytes - PASS\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, retorno);
1701                                 \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1702                         \}
1703                         IRCInterface\_PlaneRegisterOutMessage(command); \textcolor{comment}{//Mandar a registro plano}
1704                         free(command);          
1705 
1706                 \}
1707 
1708                 \textcolor{comment}{//Enviar mensaje con el nick}
1709                 command = NULL;
1710                 ret = IRCMsg\_Nick (&command, prefix, nick, msgNick);
1711                 
1712                 \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
1713                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: IRCMsg\_Nick() devolvio codigo de
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1714                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1715                 \}
1716                 g\_print(\textcolor{stringliteral}{"IRCMsg\_Nick: %s"},command);
1717 
1718                 retorno = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(sockfd, command, strlen(command));
1719                 \textcolor{comment}{//retorno = enviarDatos(sockfd, "NICK test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0", strlen("NICK test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0")+1);}
1720                 \textcolor{keywordflow}{if}(retorno <= 0)\{
1721                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: enviarDatos() envió %d Bytes -
       NICK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, retorno);
1722                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1723                 \}
1724                 IRCInterface\_PlaneRegisterOutMessage(command);
1725                 free(command);
1726                 
1727                 \textcolor{comment}{//mode}
1728                 \textcolor{comment}{//Enviar mensaje con el user}
1729                 strcpy(mode,\textcolor{stringliteral}{"0"});
1730                 command = NULL;
1731 
1732                 ret = IRCMsg\_User (&command, prefix, user, mode , realname);
1733                 \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
1734                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: IRCMsg\_User() devolvio codigo de
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1735                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1736                 \}
1737                 g\_print(\textcolor{stringliteral}{"IRCMsg\_User: %s"},command);
1738 
1739                 retorno = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(sockfd, command, strlen(command));
1740                 \textcolor{comment}{//retorno = enviarDatos(sockfd, "USER test\_ 0 * :test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0", strlen("USER test\_ 0 *
       :test\_\(\backslash\)r\(\backslash\)n\(\backslash\)0")+1);}
1741                 \textcolor{keywordflow}{if}(retorno <= 0)\{
1742                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_Connect: enviarDatos() envió %d Bytes -
       USER\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, retorno);
1743                         \textcolor{keywordflow}{return} IRCERR\_NOCONNECT;
1744                 \}
1745                 IRCInterface\_PlaneRegisterOutMessage(command);
1746                 free(command);
1747                 
1748         \}\textcolor{keywordflow}{else}\{ \textcolor{comment}{//Fin del if de ssl = false}
1749                 \textcolor{keywordflow}{return} IRCERR\_NOSSL;
1750         \}
1751 
1752         \textcolor{keywordflow}{return} IRC\_OK;
1753 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_aed072f4ce0d6e90697d4d6eb0278a2ad_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a3e67ee0cd384b524d57fda14593dce8e}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-Channel\-Key@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Channel\-Key}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-Channel\-Key@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Channel\-Key}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-Channel\-Key}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-Channel\-Key (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a3e67ee0cd384b524d57fda14593dce8e}

\begin{DoxyCode}
1787 \{
1788         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateChannelKey(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1789 
1790         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-k"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1791                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateChannelKey: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1792 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a3e67ee0cd384b524d57fda14593dce8e_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a638b1535f4ecbc9a6affb2df2a6a946e}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-External\-Messages@{I\-R\-C\-Interface\-\_\-\-Deactivate\-External\-Messages}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-External\-Messages@{I\-R\-C\-Interface\-\_\-\-Deactivate\-External\-Messages}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-External\-Messages}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-External\-Messages (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a638b1535f4ecbc9a6affb2df2a6a946e}

\begin{DoxyCode}
1825 \{
1826         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateExternalMessages(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1827 
1828         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-n"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1829                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateExternalMessages: Error en changeMode,
       devolvió ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1830 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a638b1535f4ecbc9a6affb2df2a6a946e_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a9ba4e98a3729737aa63ebec54ba4e894}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-Invite@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Invite}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-Invite@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Invite}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-Invite}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-Invite (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a9ba4e98a3729737aa63ebec54ba4e894}

\begin{DoxyCode}
1863 \{
1864         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateInvite(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1865 
1866         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-i"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1867                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateInvite: Error en changeMode, devolvió ERR
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1868 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a9ba4e98a3729737aa63ebec54ba4e894_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_ab760e8144b38f6c14bd809d157cee5d4}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-Moderated@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Moderated}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-Moderated@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Moderated}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-Moderated}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-Moderated (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ab760e8144b38f6c14bd809d157cee5d4}

\begin{DoxyCode}
1901 \{
1902         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateModerated(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1903 
1904         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-m"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1905                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateModerated: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1906 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_ab760e8144b38f6c14bd809d157cee5d4_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a92c8cfbe2e14e19277e1c97d11719e80}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-Nicks\-Limit@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Nicks\-Limit}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-Nicks\-Limit@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Nicks\-Limit}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-Nicks\-Limit}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-Nicks\-Limit (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a92c8cfbe2e14e19277e1c97d11719e80}

\begin{DoxyCode}
1939 \{
1940         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateNicksLimit(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1941 
1942         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-l"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1943                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateNicksLimit: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1944 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a92c8cfbe2e14e19277e1c97d11719e80_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a8a6141803691ba327f11ba763ad075d4}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-Private@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Private}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-Private@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Private}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-Private}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-Private (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a8a6141803691ba327f11ba763ad075d4}

\begin{DoxyCode}
1979 \{
1980         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivatePrivate(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1981 
1982         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-p"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
1983                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivatePrivate: Error en changeMode, devolvió
       ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1984 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a8a6141803691ba327f11ba763ad075d4_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a5a57541a950f8c2c40b4b44c32b28ed9}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-Protect\-Topic@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Protect\-Topic}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-Protect\-Topic@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Protect\-Topic}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-Protect\-Topic}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-Protect\-Topic (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a5a57541a950f8c2c40b4b44c32b28ed9}

\begin{DoxyCode}
2017 \{
2018         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateProtectTopic(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2019 
2020         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-t"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2021                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateProtectTopic: Error en changeMode,
       devolvió ERR\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2022 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a5a57541a950f8c2c40b4b44c32b28ed9_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a4956427664cabc7d5b2bd1589a207324}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Deactivate\-Secret@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Secret}}
\index{I\-R\-C\-Interface\-\_\-\-Deactivate\-Secret@{I\-R\-C\-Interface\-\_\-\-Deactivate\-Secret}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Deactivate\-Secret}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Deactivate\-Secret (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a4956427664cabc7d5b2bd1589a207324}

\begin{DoxyCode}
2055 \{
2056         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DeactivateSecret(char *channel) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2057 
2058         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, NULL, \textcolor{stringliteral}{"-s"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2059                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_DeactivateSecret: Error en changeMode, devolvió ERR
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2060 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a4956427664cabc7d5b2bd1589a207324_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a8bf0424ef7f845be79a056e9aed56fe2}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Disconnect\-Server@{I\-R\-C\-Interface\-\_\-\-Disconnect\-Server}}
\index{I\-R\-C\-Interface\-\_\-\-Disconnect\-Server@{I\-R\-C\-Interface\-\_\-\-Disconnect\-Server}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Disconnect\-Server}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\-R\-C\-Interface\-\_\-\-Disconnect\-Server (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{server, }
\item[{int}]{port}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a8bf0424ef7f845be79a056e9aed56fe2}

\begin{DoxyCode}
2097 \{
2098         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_DisconnectServer(char *server, int port) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2099 
2100         \hyperlink{user__commands_8h_ad738a7d361fe18d7774bab370a4454a8}{puquit}(NULL);
2101 
2102         \textcolor{keywordflow}{return} TRUE;
2103 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a8bf0424ef7f845be79a056e9aed56fe2_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_ab431412191716f751461f94d613ffdab}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Exit\-Audio\-Chat@{I\-R\-C\-Interface\-\_\-\-Exit\-Audio\-Chat}}
\index{I\-R\-C\-Interface\-\_\-\-Exit\-Audio\-Chat@{I\-R\-C\-Interface\-\_\-\-Exit\-Audio\-Chat}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Exit\-Audio\-Chat}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\-R\-C\-Interface\-\_\-\-Exit\-Audio\-Chat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ab431412191716f751461f94d613ffdab}

\begin{DoxyCode}
2141 \{
2142         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_ExitAudioChat(char *nick) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2143         \textcolor{keywordflow}{return} TRUE;
2144 \}
\end{DoxyCode}
\hypertarget{xchat2_8c_ae075029bb55e8b995f22beb0810674f4}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Give\-Op@{I\-R\-C\-Interface\-\_\-\-Give\-Op}}
\index{I\-R\-C\-Interface\-\_\-\-Give\-Op@{I\-R\-C\-Interface\-\_\-\-Give\-Op}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Give\-Op}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Give\-Op (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ae075029bb55e8b995f22beb0810674f4}

\begin{DoxyCode}
2179 \{
2180         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_GiveOp(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2181 
2182         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, nick, \textcolor{stringliteral}{"+o"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2183                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_GiveOp: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2184 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_ae075029bb55e8b995f22beb0810674f4_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_ae9effb4bdaf4a2cdf2dd9edbeb90b430}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Give\-Voice@{I\-R\-C\-Interface\-\_\-\-Give\-Voice}}
\index{I\-R\-C\-Interface\-\_\-\-Give\-Voice@{I\-R\-C\-Interface\-\_\-\-Give\-Voice}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Give\-Voice}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Give\-Voice (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_ae9effb4bdaf4a2cdf2dd9edbeb90b430}

\begin{DoxyCode}
2219 \{
2220         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_GiveVoice(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2221 
2222         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, nick, \textcolor{stringliteral}{"+v"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2223                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_GiveOp: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2224 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_ae9effb4bdaf4a2cdf2dd9edbeb90b430_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a7adfea400a96160585f86179bafb055f}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Kick\-Nick@{I\-R\-C\-Interface\-\_\-\-Kick\-Nick}}
\index{I\-R\-C\-Interface\-\_\-\-Kick\-Nick@{I\-R\-C\-Interface\-\_\-\-Kick\-Nick}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Kick\-Nick}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Kick\-Nick (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a7adfea400a96160585f86179bafb055f}

\begin{DoxyCode}
2259 \{
2260         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_KickNick(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2261 
2262         \textcolor{keywordtype}{int} ret = -1;
2263         \textcolor{keywordtype}{char} *command=NULL;
2264 
2265         \textcolor{comment}{//long IRCMsg\_Kick (char **command, char *prefix, char * channel, char *user, char *comment)}
2266         ret = IRCMsg\_Kick (&command, NULL, channel, nick, \textcolor{stringliteral}{"Te han echado del canal."});
2267         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
2268                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_KickNick : Error en IRCMsg\_Kick, no devolvio IRC\_OK
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2269                 \textcolor{keywordflow}{return};
2270         \}
2271         ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command, strlen(command));
2272         \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
2273                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_KickNick: enviarDatos devolvio ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2274                 \textcolor{keywordflow}{return};
2275         \}
2276         IRCInterface\_PlaneRegisterOutMessage(command);
2277         free(command);  
2278 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a7adfea400a96160585f86179bafb055f_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a214e10b19c8be028fb35d2a7abf3f798}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-New\-Command\-Text@{I\-R\-C\-Interface\-\_\-\-New\-Command\-Text}}
\index{I\-R\-C\-Interface\-\_\-\-New\-Command\-Text@{I\-R\-C\-Interface\-\_\-\-New\-Command\-Text}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-New\-Command\-Text}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-New\-Command\-Text (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a214e10b19c8be028fb35d2a7abf3f798}

\begin{DoxyCode}
2313 \{
2314         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)n[callback] IRCInterface\_NewCommandText(char *command) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2315 
2316         \textcolor{keywordtype}{int} num\_comando = -1, ret;
2317         \textcolor{keywordtype}{char} *comando = NULL;
2318         \textcolor{keywordtype}{char} *prefix = NULL;
2319         \textcolor{comment}{//pthread\_t tid;}
2320         \textcolor{comment}{//IRCInterface\_PlaneRegisterInMessage(command);}
2321         \textcolor{comment}{//IRCInterface\_WriteSystem(nick\_user, command);}
2322 
2323         \textcolor{keywordflow}{if}(command[0] != \textcolor{charliteral}{'/'})\{\textcolor{comment}{//mensaje a grupo o nick directamente}
2324                 \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel} = IRCInterface\_ActiveChannelName();
2325                 g\_print(\textcolor{stringliteral}{"Active\_channel: %s\(\backslash\)n"}, \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel});
2326 
2327                 \textcolor{comment}{//   long IRCMsg\_Privmsg (char **command, char *prefix, char * msgtarget, char *msg)}
2328                 ret = IRCMsg\_Privmsg (&comando, prefix, \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel}, command);
2329                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
2330                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: IRCMsg\_Privmsg devolvio
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2331                         \textcolor{keywordflow}{return};
2332                 \}
2333                 g\_print(\textcolor{stringliteral}{"\(\backslash\)t Mensaje a enviar IRCMsg\_Privmsg: %s \(\backslash\)n"},comando);
2334 
2335                 ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user},comando, strlen(comando));
2336                 \textcolor{keywordflow}{if}(ret < 0)\{
2337                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: enviarDatos() devolvio
       error (ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2338                         exit(1);
2339                 \}
2340                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout }
2341                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: enviarDatos() mandó 0
       Bytes(ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)t(Timeout de conexión probablemente)\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2342                         exit(1);
2343                 \}
2344                 IRCInterface\_PlaneRegisterOutMessage(comando);
2345                 \textcolor{comment}{//No recibimos nada en este comando, los mensajes de otros usuarios los recibimos por otro
       hilo}
2346                 IRCInterface\_WriteChannel(\hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel}, 
      \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, command);
2347                 \textcolor{keywordflow}{return};
2348         \}
2349 
2350         num\_comando = IRCUser\_CommandQuery (command);   
2351         g\_print(\hyperlink{types_8h_af54a5a977c0c499323d656315f008ee0}{MAG} \textcolor{stringliteral}{"\(\backslash\)n\(\backslash\)t>num\_comando -> array de funciones: %d \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET},num\_comando);
2352         \textcolor{keywordflow}{if} (num\_comando > 56)\{
2353                 g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"\(\backslash\)nWARN - Comando de usuario no reconocido/no tiene asignado una funcion en
       el array.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2354                 \hyperlink{user__commands_8h_a05216fb56a43c8fa44b5bc726692b064}{pdefault}(command);
2355                 \textcolor{keywordflow}{return};
2356         \}
2357         \textcolor{keywordflow}{if} (\hyperlink{xchat2_8h_afe699fe3416e9bf2d3553e35d7a1dea2}{p\_array\_funciones}[num\_comando](command) == -1)\{
2358                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewCommandText: Error en p\_array\_funciones num: %d 
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET},num\_comando);
2359         \}
2360 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a214e10b19c8be028fb35d2a7abf3f798_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a080cf34ff506481737f6d08af60ca92b}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-New\-Topic\-Enter@{I\-R\-C\-Interface\-\_\-\-New\-Topic\-Enter}}
\index{I\-R\-C\-Interface\-\_\-\-New\-Topic\-Enter@{I\-R\-C\-Interface\-\_\-\-New\-Topic\-Enter}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-New\-Topic\-Enter}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-New\-Topic\-Enter (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{topicdata}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a080cf34ff506481737f6d08af60ca92b}

\begin{DoxyCode}
2394 \{
2395         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_NewTopicEnter(char *topicdata) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2396 
2397         \textcolor{keywordtype}{int} ret = -1;
2398         \textcolor{keywordtype}{char} *command=NULL;
2399 
2400         \textcolor{comment}{//long IRCMsg\_Topic (char **command, char *prefix, char * channel, char *topic)}
2401         \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel} = IRCInterface\_ActiveChannelName();
2402         ret = IRCMsg\_Topic (&command, NULL, \hyperlink{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{active\_channel}, topicdata);
2403         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
2404                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewTopicEnter: IRCMsg\_Topic no devolvio IRC\_OK\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2405                 \textcolor{keywordflow}{return};
2406         \}
2407         ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command, strlen(command));
2408         \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
2409                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_NewTopicEnter: enviarDatos devolvio ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2410                 \textcolor{keywordflow}{return};
2411         \}
2412         IRCInterface\_PlaneRegisterOutMessage(command);
2413         free(command);  
2414 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a080cf34ff506481737f6d08af60ca92b_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a100f1c87bb3b399a7284e62dd2e6172a}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Send\-File@{I\-R\-C\-Interface\-\_\-\-Send\-File}}
\index{I\-R\-C\-Interface\-\_\-\-Send\-File@{I\-R\-C\-Interface\-\_\-\-Send\-File}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Send\-File}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\-R\-C\-Interface\-\_\-\-Send\-File (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{char $\ast$}]{nick, }
\item[{char $\ast$}]{data, }
\item[{long unsigned int}]{length}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a100f1c87bb3b399a7284e62dd2e6172a}

\begin{DoxyCode}
2456 \{
2457         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_SendFile(char *filename, char *nick, char *data, long unsigned int
       length) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2458         \textcolor{keywordflow}{return} TRUE;
2459 \}
\end{DoxyCode}
\hypertarget{xchat2_8c_a5dc7a44587e609b416a783cd420a12e3}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Start\-Audio\-Chat@{I\-R\-C\-Interface\-\_\-\-Start\-Audio\-Chat}}
\index{I\-R\-C\-Interface\-\_\-\-Start\-Audio\-Chat@{I\-R\-C\-Interface\-\_\-\-Start\-Audio\-Chat}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Start\-Audio\-Chat}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\-R\-C\-Interface\-\_\-\-Start\-Audio\-Chat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a5dc7a44587e609b416a783cd420a12e3}

\begin{DoxyCode}
2498 \{
2499         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_StartAudioChat(char *nick) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2500         \textcolor{keywordflow}{return} TRUE;
2501 \}
\end{DoxyCode}
\hypertarget{xchat2_8c_a754a3d3dd311194637c07cc701e7d507}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Stop\-Audio\-Chat@{I\-R\-C\-Interface\-\_\-\-Stop\-Audio\-Chat}}
\index{I\-R\-C\-Interface\-\_\-\-Stop\-Audio\-Chat@{I\-R\-C\-Interface\-\_\-\-Stop\-Audio\-Chat}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Stop\-Audio\-Chat}]{\setlength{\rightskip}{0pt plus 5cm}boolean I\-R\-C\-Interface\-\_\-\-Stop\-Audio\-Chat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a754a3d3dd311194637c07cc701e7d507}

\begin{DoxyCode}
2539 \{
2540         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_StopAudioChat(char *nick) call\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2541         \textcolor{keywordflow}{return} TRUE;
2542 \}
\end{DoxyCode}
\hypertarget{xchat2_8c_a4e2a1ea75e59306142030a91a054b7e6}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Take\-Op@{I\-R\-C\-Interface\-\_\-\-Take\-Op}}
\index{I\-R\-C\-Interface\-\_\-\-Take\-Op@{I\-R\-C\-Interface\-\_\-\-Take\-Op}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Take\-Op}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Take\-Op (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a4e2a1ea75e59306142030a91a054b7e6}

\begin{DoxyCode}
2577 \{
2578         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_TakeOp(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2579 
2580         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, nick, \textcolor{stringliteral}{"-o"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2581                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_TakeOp: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2582 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a4e2a1ea75e59306142030a91a054b7e6_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a2ff2e10ed1cb1a399293b6f76ac1e5ae}{\index{xchat2.\-c@{xchat2.\-c}!I\-R\-C\-Interface\-\_\-\-Take\-Voice@{I\-R\-C\-Interface\-\_\-\-Take\-Voice}}
\index{I\-R\-C\-Interface\-\_\-\-Take\-Voice@{I\-R\-C\-Interface\-\_\-\-Take\-Voice}!xchat2.c@{xchat2.\-c}}
\subsubsection[{I\-R\-C\-Interface\-\_\-\-Take\-Voice}]{\setlength{\rightskip}{0pt plus 5cm}void I\-R\-C\-Interface\-\_\-\-Take\-Voice (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{channel, }
\item[{char $\ast$}]{nick}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a2ff2e10ed1cb1a399293b6f76ac1e5ae}

\begin{DoxyCode}
2617 \{
2618         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nIRCInterface\_TakeVoice(char *channel, char *nick) call\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
2619 
2620         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a06340d30a60b297a60b17841767fad85}{changeMode}(channel, nick, \textcolor{stringliteral}{"-v"}) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})
2621                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In IRCInterface\_TakeVoice: Error en changeMode, devolvió ERR\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});    
2622 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a2ff2e10ed1cb1a399293b6f76ac1e5ae_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a0ddf1224851353fc92bfbff6f499fa97}{\index{xchat2.\-c@{xchat2.\-c}!main@{main}}
\index{main@{main}!xchat2.c@{xchat2.\-c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a0ddf1224851353fc92bfbff6f499fa97}
M\-M\-M\-M\-M\-M\-M\-M\-M\-M M\-M\-M\-M\-M A\-A\-A\-A\-A\-A\-A I\-I\-I\-I\-I\-I\-I N\-N\-N\-N\-N\-N\-N\-N\-N\-N N\-N\-N\-N\-N\-N M\-M\-M\-M\-M\-M\-M\-M\-M\-M M\-M\-M\-M\-M A\-A\-A\-A\-A\-A\-A\-A I\-I\-I\-I\-I N\-N\-N\-N\-N\-N\-N\-N\-N\-N N\-N\-N\-N M\-M\-M\-M\-M M\-M\-M\-M M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M\-M\-M M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M\-M\-M M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M\-M\-M M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M\-M\-M M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M\-M\-M M\-M M\-M A\-A\-A\-A\-A\-A\-A\-A\-A\-A\-A\-A\-A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M\-M\-M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M M\-M A\-A\-A\-A\-A A\-A I\-I\-I N\-N\-N\-N\-N N\-N\-N\-N N\-N M\-M\-M\-M\-M\-M\-M M\-M\-M\-M A\-A\-A\-A\-A\-A A\-A\-A\-A I\-I\-I\-I\-I N\-N\-N\-N\-N\-N N\-N\-N\-N\-N\-N\-N M\-M\-M\-M\-M\-M\-M\-M\-M M\-M\-M\-M\-M\-M A\-A\-A\-A\-A\-A\-A\-A A\-A\-A\-A\-A\-A I\-I\-I\-I\-I\-I\-I N\-N\-N\-N\-N\-N\-N N\-N\-N\-N\-N\-N\-N 
\begin{DoxyCode}
2647 \{
2648         FILE* log\_fp = NULL;
2649 
2650         \textcolor{comment}{//init de las funciones de log}
2651         log\_fp = \hyperlink{logger_8h_a1fa2e9d39664def63d53e3d576dc923f}{initLog}();
2652         \textcolor{keywordflow}{if} (log\_fp == NULL)\{
2653                 perror(\textcolor{stringliteral}{"error en initLog()"});
2654                 \textcolor{keywordflow}{return} EXIT\_FAILURE;
2655         \}
2656 
2657         \textcolor{keywordflow}{if} (pthread\_mutex\_init(&\hyperlink{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{loglock}, NULL) != \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
2658                 perror(\textcolor{stringliteral}{"\(\backslash\)n mutex init ha devuelto error\(\backslash\)n"});
2659                 \textcolor{keywordflow}{return} EXIT\_FAILURE;
2660         \}
2661 
2662         \textcolor{comment}{/* La función IRCInterface\_Run debe ser llamada al final      */}
2663         \textcolor{comment}{/* del main y es la que activa el interfaz gráfico quedándose */}
2664         \textcolor{comment}{/* en esta función hasta que se pulsa alguna salida del       */}
2665         \textcolor{comment}{/* interfaz gráfico.                                          */}
2666         IRCInterface\_Run(argc, argv);
2667 
2668         pthread\_mutex\_destroy(&\hyperlink{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{loglock});
2669 
2670         \textcolor{keywordflow}{return} 0;
2671 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=296pt]{xchat2_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}{\index{xchat2.\-c@{xchat2.\-c}!receive\-\_\-messages@{receive\-\_\-messages}}
\index{receive\-\_\-messages@{receive\-\_\-messages}!xchat2.c@{xchat2.\-c}}
\subsubsection[{receive\-\_\-messages}]{\setlength{\rightskip}{0pt plus 5cm}void receive\-\_\-messages (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{no\-\_\-arg}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a7230d43b8458797c679e7180bf1fda90}


Funcion ejecutada por un hilo, que recibe mensajes del servidor y los procesa segun el tipo de respuesta. 


\begin{DoxyParams}{Parameters}
{\em no\-\_\-arg} & estructura de parametros (vacia) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
O\-K si todo es correcto, E\-R\-R si se produce un error 
\end{DoxyReturn}

\begin{DoxyCode}
1134                                    \{
1135 
1136         \textcolor{keywordtype}{char} message[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
1137         \textcolor{keywordtype}{int} ret;
1138         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Hilo Preparado para recibir mensajes\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1139 
1140         \textcolor{keywordtype}{int} oldtype;
1141         \textcolor{comment}{/*No es necesario el pthread\_cancel asíncrono aparentemente}
1142 \textcolor{comment}{        * +INFO: https://www.securecoding.cert.org/confluence/display/c/
      POS44-C.+Do+not+use+signals+to+terminate+threads}
1143 \textcolor{comment}{        *                https://www.securecoding.cert.org/confluence/display/c/
      POS47-C.+Do+not+use+threads+that+can+be+canceled+asynchronously}
1144 \textcolor{comment}{        */}
1145         \textcolor{comment}{//pthread\_setcanceltype(PTHREAD\_CANCEL\_ASYNCHRONOUS, &oldtype);}
1146         
1147         \textcolor{keywordflow}{while}(1)\{
1148                 \textcolor{comment}{//printf(BLU "\(\backslash\)nwhile en receive\_messages\(\backslash\)n" RESET);}
1149                 \textcolor{comment}{//sem\_wait(&recepcionTCP);}
1150                 memset(message, 0, \textcolor{keyword}{sizeof}(message));
1151                 ret = \hyperlink{conexion__tcp_8h_a2ec2b47883bdb05804bec657bfc42516}{recvDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, message, 
      \hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}, \hyperlink{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{host\_name});
1152                 \textcolor{comment}{//sem\_post(&recepcionTCP);}
1153                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1154                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In receive\_messages: recvDatos() devolvio error (ver .log)
      \(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1155                         exit(1);
1156                 \}
1157                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout seguramente}
1158                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In receive\_messages: recvDatos() leyó 0 Bytes(ver .log)\(\backslash\)n\(\backslash\)t
      \(\backslash\)t(Timeout)El cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1159                         exit(1);
1160                 \}
1161                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA})
1162                         \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe}(message, 1);
1163                 \textcolor{keywordflow}{else}
1164                         \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe}(message, 0);
1165         \}
1166 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a7230d43b8458797c679e7180bf1fda90_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{\index{xchat2.\-c@{xchat2.\-c}!unpipe@{unpipe}}
\index{unpipe@{unpipe}!xchat2.c@{xchat2.\-c}}
\subsubsection[{unpipe}]{\setlength{\rightskip}{0pt plus 5cm}void unpipe (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{message, }
\item[{int}]{M\-A\-X\-D\-A\-T\-A\-\_\-flag}
\end{DoxyParamCaption}
)}}\label{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}


Funcion para dividir en comandos la cadena \char`\"{}message\char`\"{}. 


\begin{DoxyParams}{Parameters}
{\em message} & cadena recibida, puede incluir mas de un comando \\
\hline
{\em M\-A\-X\-D\-A\-T\-A\-\_\-flag} & flag que marca que se ha leído el maximo del buffer y han podido cortarse comandos \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
1022                                             \{
1023 
1024         \textcolor{keywordtype}{char} *q = message, *command;
1025         \textcolor{keywordtype}{char} *glued\_command = NULL;
1026         \textcolor{keywordtype}{int} i = 0, test = 0;
1027 
1028         \textcolor{keywordflow}{while} (q != NULL)\{
1029                 q = IRC\_UnPipelineCommands(q, &command);
1030                 test = \hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(command);
1031 
1032                 \textcolor{keywordflow}{if}(MAXDATA\_flag == 1)\{  \textcolor{comment}{//caso 1.)riesgo: se ha llamado a unpipe() con un bloque de tam
       MAXDATA}
1033                         \textcolor{keywordflow}{if}((i == 0) && (\hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} == 1))\{      \textcolor{comment}{//caso 2.1)primera
       iter unpipe, no MAXDATA PERO 'check...' activado}
1034                                 \textcolor{keywordflow}{if}(test == \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                       \textcolor{comment}{//
      caso 2.1.1)además no da error}
1035                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1036                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{  \textcolor{comment}{//caso 2.1.2)o bien es la segunda mitad del comando o bien}
1037                                                                                                                         \textcolor{comment}{
      //           da la casualidad de que es un comando mal formado independiente}
1038                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1039                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{        \textcolor{comment}{//caso 2.1.3)ambos test petan. Concatenar y rezar}
1040                                         glued\_command =  (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
1041                                         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1042                                         strcat(glued\_command, command);
1043 
1044                                         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
1045                                         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(glued\_command) == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
1046                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
1047                                                 free(glued\_command);
1048                                         \}\textcolor{keywordflow}{else}\{
1049                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1050                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1051                                         \}
1052 
1053                                         free(command);
1054                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 2.1.4)ambos comandos están bien formados}
1055                                         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1056                                         free(command);
1057                                 \}
1058                                 \textcolor{comment}{//resetear flags:}
1059                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 0;
1060                                 strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, \textcolor{stringliteral}{"0"});
1061 
1062                         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(q == NULL)\{ \textcolor{comment}{//q es 'resto', comprobar que sea el último comando parseado
       del bloque}
1063                                 \textcolor{keywordflow}{if} (test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                                                    \textcolor{comment}{//
      caso 1.1)error en test con MAXDATA\_f}
1064                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"\(\backslash\)nWARN - In unpipe: testIRC\_CommandQuery(command)
       devolvio ERR con MAXDATA\_flag activada\(\backslash\)n\(\backslash\)tSe almacena el trozo de comando=%s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1065                                         \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} = \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
1066                                         strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, command);
1067                                         free(command);
1068                                         \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 1;
1069                                         \textcolor{keywordflow}{break}; \textcolor{comment}{//(!) en principio no tiene sentido seguir iterando, es el
       último mensaje (trozo) del bloque}
1070                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 1.2)no error en test con MAXDATA\_f, 2 posibilidades:}
1071                                                                                                                         \textcolor{comment}{
      //a)justo ha cogido el comando entero, b)ha cogido parte del comando y lo reconoce como valido}
1072                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"\(\backslash\)nWARN - In unpipe: testIRC\_CommandQuery(command)
       devolvio OK con MAXDATA\_flag activada\(\backslash\)n\(\backslash\)tSe almacena el trozo de comando=%s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1073                                         \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} = \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
1074                                         strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, command);
1075                                         free(command);
1076                                 \}
1077                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 1;
1078                         \}\textcolor{keywordflow}{else}\{          \textcolor{comment}{//si no es el último comando parseado, command\_query normal}
1079                                 \textcolor{keywordflow}{if}(\hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command) == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1080                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: command\_query() devolvio ERR
       (MAXDATA\_flag == 1 pero no es el último comando)\(\backslash\)n\(\backslash\)tcommand = %s"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1081                                         free(command);
1082                                 \}
1083                         \}
1084 
1085                 \}\textcolor{keywordflow}{else}\{                                  \textcolor{comment}{//caso 2)no se ha llamado a unpipe() con un bloque
       de tam MAXDATA}
1086                         \textcolor{keywordflow}{if}((i == 0) && (\hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} == 1))\{      \textcolor{comment}{//caso 2.1)primera
       iter unpipe, no MAXDATA PERO 'check...' activado}
1087                                 \textcolor{keywordflow}{if}(test == \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                       \textcolor{comment}{//
      caso 2.1.1)además no da error}
1088                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1089                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{  \textcolor{comment}{//caso 2.1.2)o bien es la segunda mitad del comando o bien}
1090                                                                                                                         \textcolor{comment}{
      //           da la casualidad de que es un comando mal formado independiente}
1091                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1092                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{        \textcolor{comment}{//caso 2.1.3)ambos test petan. No se puede concatenar}
1093                                         glued\_command =  (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
1094                                         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1095                                         strcat(glued\_command, command);
1096                                         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
1097 
1098                                         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(glued\_command) == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
1099                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
1100                                                 free(glued\_command);
1101                                         \}\textcolor{keywordflow}{else}\{
1102                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1103                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1104                                         \}
1105 
1106                                         free(command);
1107                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 2.1.4)ambos comandos están bien formados}
1108                                         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1109                                         free(command);
1110                                 \}
1111                                 \textcolor{comment}{//resetear flags:}
1112                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 0;
1113                                 strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, \textcolor{stringliteral}{"0"});
1114                         \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{//
      caso 2.2)no MAXDATA, no i=0: command\_query normal}
1115                                 \textcolor{keywordflow}{if}(\hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command) == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1116                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: command\_query() devolvio ERR (i
       != 0, check\_... False, MAXDATA\_flag False)\(\backslash\)n\(\backslash\)tcommand = %s"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1117                                         free(command);
1118                                 \}
1119                         \}
1120                 \}
1121                 i++;
1122         \}
1123 
1124     \textcolor{keywordflow}{if}(command == NULL)\{
1125         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: Se ha solicitado buscar un comando en una cadena vacia\(\backslash\)n\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1126     \}   
1127 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3_cgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}{\index{xchat2.\-c@{xchat2.\-c}!active\-\_\-channel@{active\-\_\-channel}}
\index{active\-\_\-channel@{active\-\_\-channel}!xchat2.c@{xchat2.\-c}}
\subsubsection[{active\-\_\-channel}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ active\-\_\-channel = N\-U\-L\-L}}\label{xchat2_8c_a568595cf14231c912fd7ab15a324bd16}
nombre del ultimo canal activo en la itnerfaz \hypertarget{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{\index{xchat2.\-c@{xchat2.\-c}!check\-\_\-next\-\_\-unpipe@{check\-\_\-next\-\_\-unpipe}}
\index{check\-\_\-next\-\_\-unpipe@{check\-\_\-next\-\_\-unpipe}!xchat2.c@{xchat2.\-c}}
\subsubsection[{check\-\_\-next\-\_\-unpipe}]{\setlength{\rightskip}{0pt plus 5cm}int check\-\_\-next\-\_\-unpipe = 0}}\label{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}
F\-L\-A\-G\-: 0 no check, 1 check \hypertarget{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{\index{xchat2.\-c@{xchat2.\-c}!host\-\_\-name@{host\-\_\-name}}
\index{host\-\_\-name@{host\-\_\-name}!xchat2.c@{xchat2.\-c}}
\subsubsection[{host\-\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}char host\-\_\-name\mbox{[}128\mbox{]}}}\label{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}
aux con el hostname, uso en libreria T\-C\-P \hypertarget{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{\index{xchat2.\-c@{xchat2.\-c}!hostname@{hostname}}
\index{hostname@{hostname}!xchat2.c@{xchat2.\-c}}
\subsubsection[{hostname}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ hostname}}\label{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}
hostname del servidor (uso auxiliar) \hypertarget{xchat2_8c_a4e304440b657a8d3265793203cb12393}{\index{xchat2.\-c@{xchat2.\-c}!last\-\_\-command@{last\-\_\-command}}
\index{last\-\_\-command@{last\-\_\-command}!xchat2.c@{xchat2.\-c}}
\subsubsection[{last\-\_\-command}]{\setlength{\rightskip}{0pt plus 5cm}char last\-\_\-command\mbox{[}256\mbox{]} = \char`\"{}\char`\"{}}}\label{xchat2_8c_a4e304440b657a8d3265793203cb12393}
almacena el ultimo 'message' pasado a \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe()} \hypertarget{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{\index{xchat2.\-c@{xchat2.\-c}!last\-\_\-test@{last\-\_\-test}}
\index{last\-\_\-test@{last\-\_\-test}!xchat2.c@{xchat2.\-c}}
\subsubsection[{last\-\_\-test}]{\setlength{\rightskip}{0pt plus 5cm}int last\-\_\-test = {\bf O\-K}}}\label{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}
F\-L\-A\-G\-: 0 O\-K, -\/1 E\-R\-R \hypertarget{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}{\index{xchat2.\-c@{xchat2.\-c}!loglock@{loglock}}
\index{loglock@{loglock}!xchat2.c@{xchat2.\-c}}
\subsubsection[{loglock}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t loglock}}\label{xchat2_8c_a53497b00bd1ff0270ca7a108d5794dbc}


Declaracion del Mutex para el descriptor de fichero del log. Siempre tiene que ser definida en el source princpal. 

mutex para el descriptor del log de la ejecución actual \hypertarget{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{\index{xchat2.\-c@{xchat2.\-c}!nick\-\_\-user@{nick\-\_\-user}}
\index{nick\-\_\-user@{nick\-\_\-user}!xchat2.c@{xchat2.\-c}}
\subsubsection[{nick\-\_\-user}]{\setlength{\rightskip}{0pt plus 5cm}char nick\-\_\-user\mbox{[}{\bf M\-A\-X\-D\-A\-T\-A}\mbox{]} = \{0\}}}\label{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}
nick del usuario operador del cliente \hypertarget{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}{\index{xchat2.\-c@{xchat2.\-c}!recv\-\_\-tid@{recv\-\_\-tid}}
\index{recv\-\_\-tid@{recv\-\_\-tid}!xchat2.c@{xchat2.\-c}}
\subsubsection[{recv\-\_\-tid}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-t recv\-\_\-tid}}\label{xchat2_8c_ab5efd1efa144e252f4c5312ae57bea2e}
Globales útiles sobre la conexión del cliente con el servidor \hypertarget{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}{\index{xchat2.\-c@{xchat2.\-c}!sendf\-\_\-tid@{sendf\-\_\-tid}}
\index{sendf\-\_\-tid@{sendf\-\_\-tid}!xchat2.c@{xchat2.\-c}}
\subsubsection[{sendf\-\_\-tid}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-t sendf\-\_\-tid}}\label{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}
\hypertarget{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{\index{xchat2.\-c@{xchat2.\-c}!sockfd\-\_\-user@{sockfd\-\_\-user}}
\index{sockfd\-\_\-user@{sockfd\-\_\-user}!xchat2.c@{xchat2.\-c}}
\subsubsection[{sockfd\-\_\-user}]{\setlength{\rightskip}{0pt plus 5cm}int sockfd\-\_\-user = -\/1}}\label{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}
descriptor con el socket abierto con el servidor \hypertarget{xchat2_8c_a98d1a6f1c3b6a02b439ca0b9e8434420}{\index{xchat2.\-c@{xchat2.\-c}!stream@{stream}}
\index{stream@{stream}!xchat2.c@{xchat2.\-c}}
\subsubsection[{stream}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ stream}}\label{xchat2_8c_a98d1a6f1c3b6a02b439ca0b9e8434420}
