\hypertarget{xchat2_8h}{\section{includes/xchat2.h File Reference}
\label{xchat2_8h}\index{includes/xchat2.\-h@{includes/xchat2.\-h}}
}


Declaraciones de funciones, definición de tipos\-: implementación de los callbacks de xchat2.  


{\ttfamily \#include $<$redes2/ircxchat.\-h$>$}\\*
{\ttfamily \#include $<$redes2/irc.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$netinet/in.\-h$>$}\\*
{\ttfamily \#include $<$arpa/inet.\-h$>$}\\*
{\ttfamily \#include $<$sys/ioctl.\-h$>$}\\*
{\ttfamily \#include $<$net/if.\-h$>$}\\*
{\ttfamily \#include \char`\"{}types.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}conexion\-\_\-tcp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}logger.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}user\-\_\-commands.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}aux\-\_\-functions.\-h\char`\"{}}\\*
Include dependency graph for xchat2.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=172pt]{xchat2_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{xchat2_8h_a41f93f364aea303a0c93177289733f92}{command\-\_\-query} (char $\ast$message)
\begin{DoxyCompactList}\small\item\em Parsea los mensajes y respuestas que recibe del servidor. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8h_a63f7dc08db4a2318cb526eee804709b3}{unpipe} (char $\ast$message, int M\-A\-X\-D\-A\-T\-A\-\_\-flag)
\begin{DoxyCompactList}\small\item\em Funcion para dividir en comandos la cadena \char`\"{}message\char`\"{}. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8h_a7230d43b8458797c679e7180bf1fda90}{receive\-\_\-messages} (void $\ast$no\-\_\-arg)
\begin{DoxyCompactList}\small\item\em Funcion ejecutada por un hilo, que recibe mensajes del servidor y los procesa segun el tipo de respuesta. \end{DoxyCompactList}\item 
void \hyperlink{xchat2_8h_a98484e1bbb136d37503aa6c604eff6a2}{glue\-And\-Query} (char $\ast$command, char $\ast$\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\-\_\-command})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{user__commands_8h_aa28997a055736f12ce4f2db646ef7749}{p\-\_\-funcion} \hyperlink{xchat2_8h_afe699fe3416e9bf2d3553e35d7a1dea2}{p\-\_\-array\-\_\-funciones} \mbox{[}57\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Declaraciones de funciones, definición de tipos\-: implementación de los callbacks de xchat2. \begin{DoxyAuthor}{Author}
Alfonso Sebares 

Beatriz de Pablo 

Celia Mateos 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
20/03/17 
\end{DoxyDate}


\subsection{Function Documentation}
\hypertarget{xchat2_8h_a41f93f364aea303a0c93177289733f92}{\index{xchat2.\-h@{xchat2.\-h}!command\-\_\-query@{command\-\_\-query}}
\index{command\-\_\-query@{command\-\_\-query}!xchat2.h@{xchat2.\-h}}
\subsubsection[{command\-\_\-query}]{\setlength{\rightskip}{0pt plus 5cm}int command\-\_\-query (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{message}
\end{DoxyParamCaption}
)}}\label{xchat2_8h_a41f93f364aea303a0c93177289733f92}


Parsea los mensajes y respuestas que recibe del servidor. 


\begin{DoxyParams}{Parameters}
{\em massage} & mensaje recibido para procesar \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
O\-K si todo fue correcto y E\-R\-R si ocurrio un error 
\end{DoxyReturn}
$<$ delimitador para separar mensajes 
\begin{DoxyCode}
40                                 \{
41 
42         \textcolor{keywordtype}{long} ret = -1;
43         \textcolor{keywordtype}{int} retorno = -1;
44         \textcolor{keywordtype}{char} *prefix = NULL;
45         \textcolor{keywordtype}{int} n = -1;
46         \textcolor{keywordtype}{int} counter = 1;
47     \textcolor{keywordtype}{char} mensaje[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
48     \textcolor{keywordtype}{char} mensajeLargo[10*\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}] = \{0\};
49     \textcolor{keywordtype}{char} *msg = NULL;
50     \textcolor{keywordtype}{char} *nick = NULL;
51     \textcolor{keywordtype}{char} *nick2 = NULL;
52     \textcolor{comment}{//002}
53     \textcolor{keywordtype}{char} *servername = NULL;
54         \textcolor{keywordtype}{char} *versionname = NULL;
55         \textcolor{comment}{//003}
56         \textcolor{keywordtype}{char} *timedate = NULL;
57         \textcolor{comment}{//004}
58         \textcolor{keywordtype}{char}* version = NULL;
59         \textcolor{keywordtype}{char}* availableusermodes = NULL;
60         \textcolor{keywordtype}{char}* availablechannelmodes = NULL;
61         \textcolor{keywordtype}{char}* addedg = NULL;    
62         \textcolor{comment}{//251}
63         \textcolor{keywordtype}{int} nusers = 0;
64         \textcolor{keywordtype}{int} ninvisibles = 0;
65         \textcolor{keywordtype}{int} nservers = 0;
66         \textcolor{keywordtype}{char} *type = NULL;
67         \textcolor{comment}{//char **parameters = NULL;}
68         \textcolor{comment}{//int numparameters = 0;}
69 
70         \textcolor{comment}{//265}
71         \textcolor{keywordtype}{char} *substring = NULL;
72         \textcolor{comment}{//322}
73         \textcolor{keywordtype}{char} *visible = NULL;
74         \textcolor{comment}{//332}
75         \textcolor{keywordtype}{char} *topic = NULL;
76         \textcolor{keywordtype}{char} *channel = NULL;
77 
78         \textcolor{keywordtype}{char} inv[200];
79 
80         \textcolor{comment}{//353}
81         \textcolor{comment}{//char* show\_nick;}
82 
83         \textcolor{comment}{//JOIN}
84         \textcolor{keywordtype}{char}* key = NULL;       
85         \textcolor{keywordtype}{char} command[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
86 
87         \textcolor{comment}{//PRIVMSG}
88         \textcolor{keywordtype}{char}* msgtarget = NULL;
89         \textcolor{keywordtype}{char}* origin\_nick = NULL;
90         \textcolor{keywordtype}{char} nick\_privmsg[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
91         \textcolor{keywordtype}{char} *filename = NULL, *hostname\_destino = NULL;
92         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} length, port;
93 
94         \textcolor{comment}{//PART}
95         \textcolor{keywordtype}{char}* nick\_part;
96         \textcolor{keywordtype}{char}* username\_part;
97         \textcolor{keywordtype}{char}* host\_part;
98         \textcolor{keywordtype}{char}* server\_part;
99 
100         \textcolor{comment}{//PING}
101         \textcolor{keywordtype}{char}* server, *server2;
102         \textcolor{keywordtype}{char}* command\_pong;
103 
104         \textcolor{comment}{//Strtok}
105         \textcolor{keyword}{const} \textcolor{keywordtype}{char} s[2] = \textcolor{stringliteral}{":"}; 
106         \textcolor{keywordtype}{char} *token = NULL;
107 
108         \textcolor{comment}{//472}
109         \textcolor{keywordtype}{char} *modechar = NULL;
110 
111         \textcolor{comment}{//MODE}
112         \textcolor{keywordtype}{char} *channeluser = NULL;
113         \textcolor{keywordtype}{char} *mode = NULL;
114         \textcolor{keywordtype}{char} *user = NULL;
115 
116         \textcolor{comment}{//KICK}
117         \textcolor{keywordtype}{char} *comment = NULL;
118 
119         \textcolor{comment}{//QUIT}
120         \textcolor{keywordtype}{char} **channelsQuit;
121         \textcolor{keywordtype}{int} numChannelsQuit;
122         \textcolor{keywordtype}{int} i;
123         \textcolor{comment}{//char* realname, *host;}
124 
125         \textcolor{comment}{//GENERAL}
126         \textcolor{keywordtype}{char} **params;
127         \textcolor{keywordtype}{int} n\_params;
128         \textcolor{keywordtype}{int} unknw\_type;
129         \textcolor{keyword}{const} \textcolor{keywordtype}{char} space\_delim[2] = \textcolor{stringliteral}{" "};
130         \textcolor{keywordtype}{char} *message\_cp = NULL;
131 
132         \textcolor{comment}{//g\_print("Mesaje recibido en command\_query: %s", message);}
133 
134         \textcolor{comment}{/*}
135 \textcolor{comment}{        if(message == NULL) \{}
136 \textcolor{comment}{                g\_print(RED "ERROR - In command\_query: message == NULL al principio\(\backslash\)n\(\backslash\)n" RESET);}
137 \textcolor{comment}{                return ERR;}
138 \textcolor{comment}{        \}}
139 \textcolor{comment}{        */}
140 
141         IRCInterface\_PlaneRegisterInMessage(message);
142 
143         \textcolor{keywordflow}{switch}(IRC\_CommandQuery(message))\{
144                 \textcolor{keywordflow}{case} RPL\_WELCOME: \textcolor{comment}{//001}
145                         ret = IRCParse\_RplWelcome(message, &prefix, &nick2, &msg);
146                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
147                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_WELCOME -
       IRCParse\_RplWelcome != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
148                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
149                         \}
150                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplWelcome: \(\backslash\)n"});
151                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
152                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
153                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
154                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
155                         \textcolor{comment}{//obtenemos el hostname, util para el envio de ficheros}
156                         \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(msg, \textcolor{stringliteral}{" "});
157                         \textcolor{keywordflow}{while} (((\hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(NULL, \textcolor{stringliteral}{" "})) != NULL) && (counter < 5))\{
158                                 counter++;
159                         \}
160                         \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname} = strtok(NULL, \textcolor{stringliteral}{" "});
161                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t hostname: %s \(\backslash\)n\(\backslash\)n"}, \hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname});
162                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"}, msg
      );
163                         \textcolor{keywordflow}{break};
164 
165                 \textcolor{keywordflow}{case} RPL\_YOURHOST:      \textcolor{comment}{//002}
166                         \textcolor{comment}{//long IRCParse\_RplYourHost (char *strin, char **prefix, char **nick, char **msg,
       char **servername, char **versionname)}
167                         ret = IRCParse\_RplYourHost(message, &prefix, &nick2, &msg, &servername, &
      versionname);
168                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
169                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_YOURHOST -
       IRCParse\_RplYourHost != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
170                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
171                         \}
172                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplYourHost: \(\backslash\)n"});
173                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
174                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
175                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
176                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t servername: %s \(\backslash\)n"},servername);
177                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t versionname: %s \(\backslash\)n"},versionname);           
178                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
179                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
180                         \textcolor{keywordflow}{break};
181 
182                 \textcolor{keywordflow}{case} RPL\_CREATED:\textcolor{comment}{//003                  }
183                         \textcolor{comment}{//long IRCParse\_RplCreated (char *strin, char **prefix, char **nick,char
       **timedate, char **msg)}
184                         ret = IRCParse\_RplCreated(message, &prefix, &nick2, &timedate, &msg);
185                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
186                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_CREATED -
       IRCParse\_RplCreated != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
187                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
188                         \}
189                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplCreated: \(\backslash\)n"});
190                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
191                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
192                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
193                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t timedate: %s \(\backslash\)n"},timedate); 
194                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
195                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
196                         \textcolor{keywordflow}{break};
197 
198                 \textcolor{keywordflow}{case} RPL\_MYINFO: \textcolor{comment}{//004}
199                         \textcolor{comment}{//long IRCParse\_RplMyInfo (char *strin, char **prefix, char **nick, char
       **servername, char **version, char **availableusermodes, char **availablechannelmodes, char **addedg)}
200                         ret = IRCParse\_RplMyInfo(message, &prefix, &nick2, &servername, &version, &
      availableusermodes, &availablechannelmodes, &addedg);
201                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
202                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_MYINFO -
       IRCParse\_RplMyInfo != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
203                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
204                         \}
205                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplMyInfo: \(\backslash\)n"});
206                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
207                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
208                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
209                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t servername: %s \(\backslash\)n"},servername);
210                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t version: %s \(\backslash\)n"},version);
211                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t availableusermodes: %s \(\backslash\)n"},availableusermodes);     
212                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t availablechannelmodes: %s \(\backslash\)n"},availablechannelmodes);
213                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t addedg: %s \(\backslash\)n\(\backslash\)n"},addedg);
214                         n = snprintf(mensaje, \textcolor{keyword}{sizeof} mensaje,\textcolor{stringliteral}{"%s %s %s %s %s "},servername,version,
      availableusermodes,availablechannelmodes,addedg);
215 
216                         \textcolor{keywordflow}{if} ( n < 0 || n >= \textcolor{keyword}{sizeof} mensaje )\{
217                                 g\_print(\textcolor{stringliteral}{"Error en sprintf \(\backslash\)n"});
218                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};    \textcolor{comment}{// or other error handling}
219                         \}
220                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);            
221                         \textcolor{keywordflow}{break};
222 
223                 \textcolor{keywordflow}{case} RPL\_BOUNCE: \textcolor{comment}{//005}
224                         \textcolor{comment}{//   long IRCParse\_RplISupport (char *strin, char **prefix, char **nick, char
       **msg)                                                }
225                         ret = IRCParse\_RplISupport(message, &prefix, &nick2, &msg);
226                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
227                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_BOUNCE
       -IRCParse\_RplISupport != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
228                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
229                         \}
230                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplISupport: \(\backslash\)n"});
231                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
232                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
233                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
234                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
235                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;                
236                         \textcolor{keywordflow}{break};
237 
238                 \textcolor{keywordflow}{case} RPL\_LUSERCLIENT: \textcolor{comment}{//251}
239                         \textcolor{comment}{//long IRCParse\_RplLuserClient (char *strin, char **prefix, char **nick, char
       **msg, int *nusers, int *ninvisibles, int *nservers)}
240                         
241                         ret = IRCParse\_RplLuserClient(message, &prefix, &nick2, &msg, &nusers, &ninvisibles
      , &nservers);
242                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
243                                 \textcolor{comment}{//g\_print(RED "\(\backslash\)nERROR - In command\_query: case RPL\_LUSERCLIENT
       -IRCParse\_RplLuserClient != IRC\_OK" RESET);}
244                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
245                         \}
246                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
247                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
248                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
249                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg);
250                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nusers: %d \(\backslash\)n"},nusers);
251                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t ninvisibles: %d \(\backslash\)n"},ninvisibles);
252                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nservers: %d \(\backslash\)n\(\backslash\)n"},nservers); 
253 
254                         \textcolor{comment}{/*ret\_strstr = strstr(mensaje,"nicknick");}
255 \textcolor{comment}{                        IRCInterface\_WriteSystem("*",ret\_strstr);*/} 
256 
257                         sprintf(mensaje,\textcolor{stringliteral}{"There are %d users and %d invisibles on %d servers "},nusers,
      ninvisibles,nservers);
258                         \textcolor{comment}{//sprintf(mensaje,"There are 13 users and 0 services on 1 servers");}
259 
260                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);                                                                                                    
261                         \textcolor{keywordflow}{break};
262                         
263                 \textcolor{keywordflow}{case} RPL\_LUSERCHANNELS: \textcolor{comment}{//254}
264                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
265                         \textcolor{comment}{/*Coger el primer token*/}
266                         token = strtok(message,s);
267                         \textcolor{comment}{/*Ir por el resto*/}
268                         \textcolor{keywordflow}{if}(token != NULL)\{
269                                 token = strtok(NULL,s); 
270                         \}
271                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
272 
273                         token = NULL;
274                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
275                         \textcolor{keywordflow}{break};
276 
277                 \textcolor{keywordflow}{case} RPL\_LUSERME : \textcolor{comment}{//255}
278                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
279                         \textcolor{comment}{/*Coger el primer token*/}
280                         token = strtok(message,s);
281                         \textcolor{comment}{/*Ir por el resto*/}
282                         \textcolor{keywordflow}{if}(token != NULL)\{
283                                 token = strtok(NULL,s); 
284                         \}
285                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
286 
287                         token = NULL;
288                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
289                         \textcolor{keywordflow}{break};
290 
291                 \textcolor{keywordflow}{case} RPL\_LOCALUSERS: \textcolor{comment}{//265}
292                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
293                         \textcolor{keywordflow}{if} (substring)\{
294                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
295                         \}
296                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      substring);
297 
298                         substring = NULL;
299                         \textcolor{keywordflow}{break};
300 
301                 \textcolor{keywordflow}{case} RPL\_GLOBALUSERS: \textcolor{comment}{//266}
302                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_GLOBALUSERS - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
303                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
304                         \textcolor{keywordflow}{if} (substring)\{
305                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
306                         \}
307                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      substring);
308 
309                         substring = NULL;               
310                         \textcolor{keywordflow}{break};
311 
312                 \textcolor{keywordflow}{case} RPL\_LISTSTART: \textcolor{comment}{//321}
313                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LISTSTART - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
314                         token = strtok(message,s);
315                         \textcolor{keywordflow}{if}(token != NULL)\{
316                                 token = strtok(NULL,s); 
317                         \}
318                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
319 
320                         \textcolor{keywordflow}{break};
321 
322                 \textcolor{keywordflow}{case} RPL\_LIST: \textcolor{comment}{//322}
323                         \textcolor{comment}{//   long IRCParse\_RplList (char *strin, char **prefix, char **nick, char
       **channel, char **visible, char **topic)}
324                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LIST - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
325                         ret = IRCParse\_RplList(message, &prefix, &nick2, &channel, &visible, &topic);
326                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
327                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_LIST -
       IRCParse\_RplList != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
328                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
329                         \}
330                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_RplList: \(\backslash\)n"});
331                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
332                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
333                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick2: %s \(\backslash\)n"},nick2);
334                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
335                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t visible: %s \(\backslash\)n"},visible);
336                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
337 
338                         sprintf(mensajeLargo,\textcolor{stringliteral}{"%s \(\backslash\)t %s \(\backslash\)t %s"},channel,visible,topic);
339                         g\_print(\textcolor{stringliteral}{"Mensaje creado: %s \(\backslash\)n\(\backslash\)n"},mensajeLargo);
340 
341                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensajeLargo);
342                         \hyperlink{aux__functions_8h_a2480cc4793bf25a16cc731dc9d033582}{mfree}(5,prefix,nick2,channel,visible,topic);       
343                         \textcolor{keywordflow}{break};
344 
345                 \textcolor{keywordflow}{case} RPL\_LISTEND: \textcolor{comment}{//323}
346                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_LISTEND - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
347                         \textcolor{comment}{/*Coger el primer token*/}
348                         token = strtok(message,s);
349                         \textcolor{comment}{/*Ir por el resto*/}
350                         \textcolor{keywordflow}{if}(token != NULL)\{
351                                 token = strtok(NULL,s); 
352                         \}
353                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
354 
355                         token = NULL;
356                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                        }
357                         \textcolor{keywordflow}{break};
358 
359                 \textcolor{keywordflow}{case} RPL\_INVITING:
360                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_INVITING - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
361 
362                         ret = IRCParse\_RplInviting (message, &prefix , &nick, &channel, &msg);
363                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
364                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case RPL\_INVITING -
       IRCParse\_RplInviting != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
365                                 \textcolor{keywordflow}{break};
366                         \}
367                         \textcolor{comment}{//strcpy("")}
368                         \textcolor{keywordflow}{if}(strcmp(nick,\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}) == 0)\{
369                                 strcpy(inv,\textcolor{stringliteral}{"You invited "});
370                                 strcat(inv, channel);
371                                 strcat(inv, \textcolor{stringliteral}{" to join "});
372                                 strcat(inv, msg);
373                                 \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{
      "*"},inv);
374                         \}
375                         \textcolor{keywordflow}{break};
376 
377                 \textcolor{keywordflow}{case} RPL\_WHOREPLY: \textcolor{comment}{//352}
378                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_WHOREPLY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
379                         \textcolor{keywordflow}{break};
380 
381                 \textcolor{keywordflow}{case} RPL\_MOTDSTART: \textcolor{comment}{//375}
382                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
383                         \textcolor{comment}{/*Coger el primer token*/}
384                         token = strtok(message,s);
385                         \textcolor{comment}{/*Ir por el resto*/}
386                         \textcolor{keywordflow}{if}(token != NULL)\{
387                                 token = strtok(NULL,s); 
388                         \}
389                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
390 
391                         token = NULL;
392                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                        }
393                         \textcolor{keywordflow}{break};
394 
395                 \textcolor{keywordflow}{case} RPL\_MOTD: \textcolor{comment}{//372}
396                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
397                         \textcolor{comment}{/*Coger el primer token*/}
398                         token = strtok(message,s);
399                         \textcolor{comment}{/*Ir por el resto*/}
400                         \textcolor{keywordflow}{if}(token != NULL)\{
401                                 token = strtok(NULL,s); 
402                         \}
403                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
404 
405                         token = NULL;
406                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);                }
407                         \textcolor{keywordflow}{break};
408 
409                 \textcolor{keywordflow}{case} RPL\_ENDOFMOTD: \textcolor{comment}{//376}
410                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
411                         \textcolor{comment}{/*Coger el primer token*/}
412                         token = strtok(message,s);
413                         \textcolor{comment}{/*Ir por el resto*/}
414                         \textcolor{keywordflow}{if}(token != NULL)\{
415                                 token = strtok(NULL,s); 
416                         \}
417                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      token);
418 
419                         token = NULL;
420                         \textcolor{comment}{//IRCInterface\_WriteSystem("*",message);        }
421                         \textcolor{keywordflow}{return} 19;\textcolor{comment}{//cambiar por un define}
422                         \textcolor{keywordflow}{break};
423 
424                 \textcolor{keywordflow}{case} RPL\_TOPIC: \textcolor{comment}{//332}
425                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_TOPIC - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
426                         \textcolor{comment}{//g\_print("\(\backslash\)n=======CASE RPL\_TOPIC=======\(\backslash\)n");}
427                         \textcolor{comment}{//IRCParse\_RplTopic (char *strin, char **prefix, char **nick, char **nick2, char
       **channel, char **msg)}
428                         ret = IRCParse\_RplTopic(message, &prefix, &nick, &channel, &topic);
429                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
430                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_TOPIC -
       IRCParse\_RplTopic devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
431                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
432                         \}
433                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
434                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
435                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
436                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
437                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
438                         sprintf(mensaje,\textcolor{stringliteral}{"El topic para %s es %s "},channel,topic);
439                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
440                         g\_print(\textcolor{stringliteral}{"Existe canal: %d \(\backslash\)n"}, IRCInterface\_QueryChannelExistThread(channel));
441 
442                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);  
443                         \textcolor{keywordflow}{break};
444 
445                 \textcolor{keywordflow}{case} RPL\_UNAWAY: \textcolor{comment}{//305}
446                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_UNAWAY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
447                         IRCParse\_RplUnaway (message, &prefix, &nick, &msg);
448                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
449                         \textcolor{keywordflow}{break};
450 
451                 \textcolor{keywordflow}{case} RPL\_AWAY: \textcolor{comment}{//306}
452                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_AWAY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
453                         IRCParse\_RplAway (message, &prefix, &nick, &nick2, &msg);
454                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},msg)
      ;
455                         \textcolor{keywordflow}{break};
456 
457                 \textcolor{keywordflow}{case} TOPIC: \textcolor{comment}{//332}
458                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] TOPIC - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
459                         \textcolor{comment}{//   long IRCParse\_Topic (char *strin, char **prefix, char **channel, char **topic)}
460                         ret = IRCParse\_Topic (message, &prefix, &channel, &topic);
461                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
462                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case TOPIC - IRCParse\_Topic
       devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
463                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
464                         \}
465 
466                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
467                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
468                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
469                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t topic: %s \(\backslash\)n\(\backslash\)n"},topic);
470                         sprintf(mensaje,\textcolor{stringliteral}{"El topic para %s es %s \(\backslash\)n"},channel,topic);
471                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
472                         g\_print(\textcolor{stringliteral}{"Existe canal: %d \(\backslash\)n"}, IRCInterface\_QueryChannelExistThread(channel));
473 
474                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
475                         \textcolor{keywordflow}{break};
476 
477                 \textcolor{keywordflow}{case} RPL\_NOTOPIC:
478                         \textcolor{keywordflow}{break};
479 
480                 \textcolor{keywordflow}{case} RPL\_TOPICWHOTIME: \textcolor{comment}{//333}
481                         \textcolor{keywordflow}{break};  
482 
483                 \textcolor{keywordflow}{case} RPL\_NAMREPLY: \textcolor{comment}{//353 - reply del servidor de de punames()}
484                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_NAMREPLY - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
485                         \textcolor{comment}{//long IRCParse\_RplNamReply (char *strin, char **prefix, char **nick, char **type,
       char **channel, char **msg)}
486                         ret = IRCParse\_RplNamReply(message, &prefix, &nick, &type, &channel, &msg);
487                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
488                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_NAMREPLY -
       IRCParse\_RplNamReply devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
489                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
490                         \}
491                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
492                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
493                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
494                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t type: %s \(\backslash\)n"},type);                                                         
495                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
496                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
497 
498                         \textcolor{comment}{//Ojo, que pasa si es names?? sin join}
499                         \textcolor{comment}{//Añadir los nicks a la ventana de lad erecha. Pillarlos del WHO que se envía }
500                         \textcolor{comment}{//despues del join.}
501                         \textcolor{comment}{//OJO es una prueba del funcionamineto de IRCInterface\_AddNickChannel,}
502                         \textcolor{comment}{//los nicks deberían de ser partidos mediante uso strtok o algo parecido}
503                         \textcolor{comment}{//IRCInterface\_AddNickChannel (channel, msg, msg, msg, msg, VOICE);}
504                         \textcolor{comment}{//sprintf(mensaje,"Usuarios en %s: %s",channel,msg);}
505                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(channel,"*",mensaje);}
506                         \hyperlink{aux__functions_8h_a09c2fcb81e148a2f23080a1671869f96}{interface\_mostrar\_nicks}(channel,msg);    
507                         \textcolor{keywordflow}{break};
508 
509                 \textcolor{keywordflow}{case} RPL\_ENDOFNAMES: \textcolor{comment}{//366}
510                         g\_print(\textcolor{stringliteral}{"Mensaje recibido en RPL\_ENDOFNAMES: \(\backslash\)n"});
511                         \textcolor{comment}{//long IRCParse\_RplEndOfNames (char *strin, char **prefix, char **nick, char
       **channel, char **msg)}
512                         ret = IRCParse\_RplEndOfNames(message, &prefix, &nick2, &channel, &msg);
513                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
514                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case RPL\_ENDOFNAMES -
       IRCParse\_RplEndOfNames devolvio != IRC\_OK\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
515                                 \textcolor{comment}{//return IRCERR\_NOCONNECT;}
516                         \}
517                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
518                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
519                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);                                                 
520                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
521                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
522 
523                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(channel,"*",msg);}
524                         \textcolor{keywordflow}{break};
525 
526                 \textcolor{keywordflow}{case} JOIN:
527                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] JOIN - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
528                         \textcolor{comment}{//g\_print(MAG "\(\backslash\)nJOIN es %ld con IRC\_CommandQuery\(\backslash\)n" RESET,
       IRC\_CommandQuery(message));}
529                         \textcolor{comment}{//g\_print(MAG "\(\backslash\)nJOIN es %ld con IRCUser\_CommandQuery\(\backslash\)n" RESET,
       IRCUser\_CommandQuery(message));}
530 
531                         ret = IRCParse\_Join (message, &prefix, &channel, &key, &msg);
532                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
533                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: JOIN - IRCParse\_Join devolvio
       error\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
534                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
535                         \}
536                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_Join: \(\backslash\)n"});
537                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
538                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
539                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
540                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t key: %s \(\backslash\)n"},key);
541                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
542 
543                         IRCInterface\_AddNewChannelThread(msg, 0);
544                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
545                         sprintf(mensaje, \textcolor{stringliteral}{"%s (%s) se ha unido al canal"}, nick\_part, prefix);
546                         \textcolor{keywordflow}{if}(!strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, nick\_part))\{
547                                 IRCInterface\_WriteChannelThread(msg,\textcolor{stringliteral}{"*"}, \textcolor{stringliteral}{"Bienvenido al canal"});
548                         \} \textcolor{keywordflow}{else} \{
549                                 IRCInterface\_WriteChannelThread(msg,\textcolor{stringliteral}{"*"}, mensaje);
550                         \}
551                         \textcolor{comment}{//Actualizar al lista de usuarios}
552                         sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},msg);
553                         retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
554                         \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
555                                 g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
556                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
557                         \}
558                         \textcolor{keywordflow}{break};
559 
560                 \textcolor{keywordflow}{case} NAMES:
561                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NAMES - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
562                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)nNo hay nada aquí, revisar (?)"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
563                         \textcolor{keywordflow}{break};
564 
565                 \textcolor{keywordflow}{case} PRIVMSG:
566                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PRIVMSG - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
567                         ret = IRCParse\_Privmsg(message, &prefix, &msgtarget, &msg);
568                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
569                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: IRCParse\_Privmsg devolvio !=
       IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
570                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
571                         \}
572 
573                         \textcolor{keywordflow}{if} ((origin\_nick = strtok(prefix, \textcolor{stringliteral}{"!"})) != NULL)\{
574                                 strcpy(nick\_privmsg, origin\_nick);
575                         \}
576                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick\_privmsg: %s \(\backslash\)n"},nick\_privmsg);
577                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
578                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msgtarget: %s \(\backslash\)n"},msgtarget);
579                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
580 
581                         \textcolor{keywordflow}{if}(msg[0] == 1 || (msg[0] == \textcolor{charliteral}{':'} || msg[1] == 1)) \{ \textcolor{comment}{//envio de ficheros}
582                                 g\_print(\textcolor{stringliteral}{"alguien quiere enviarme un fichero\(\backslash\)n"});
583                                 
584                                 filename = strtok(msg, \textcolor{stringliteral}{" "});
585                                 filename = strtok(NULL, \textcolor{stringliteral}{" "});
586                                 hostname\_destino = strtok(NULL, \textcolor{stringliteral}{" "});
587                                 port = (\textcolor{keywordtype}{unsigned} long) atol(strtok(NULL, \textcolor{stringliteral}{" "}));
588                                 length = (\textcolor{keywordtype}{unsigned} long) atol(strtok(NULL, \textcolor{stringliteral}{" "}));
589                                 g\_print(\textcolor{stringliteral}{"filename: %s \(\backslash\)n"},filename);
590                                 g\_print(\textcolor{stringliteral}{"hostname\_destino: %s \(\backslash\)n"},hostname\_destino);
591                                 g\_print(\textcolor{stringliteral}{"length: %ld \(\backslash\)n"},length);
592                                 g\_print(\textcolor{stringliteral}{"port: %ld \(\backslash\)n"},port);
593 
594                                 \textcolor{keywordflow}{if}(IRCInterface\_ReceiveDialogThread(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, filename) == TRUE)\{
595                                         g\_print(\textcolor{stringliteral}{"Lanzamos el hilo que guarda el archivo\(\backslash\)n"});
596                                         \textcolor{comment}{//pthread\_t tid;}
597 
598                                         \hyperlink{struct_file__args}{File\_args} args;
599                                         args.\hyperlink{struct_file__args_a9aa177aea3a099397a09131a92f30115}{hostname} = hostname\_destino;
600                                         args.\hyperlink{struct_file__args_ad24dfcb255f29ee677793a0051c7336b}{filename} = filename;
601                                         args.\hyperlink{struct_file__args_a83e78eb2ebacdc7e63eca61d1340fa61}{port} = port;
602                                         args.\hyperlink{struct_file__args_a3168e8734e7ad263d88a6da49b4aff20}{length} = length;
603 
604                                         \textcolor{keywordflow}{if}(pthread\_create( &\hyperlink{xchat2_8c_a808d33eb5e54db312802ea4b22189ef3}{sendf\_tid}, NULL, (\textcolor{keywordtype}{void}*) 
      \hyperlink{aux__functions_8h_a9a7f9a514711f5954007dc83533d9362}{save\_file}, (\textcolor{keywordtype}{void}*) &args) < 0)\{
605                                         g\_print(\textcolor{stringliteral}{"Error en la llamada a save\_file\(\backslash\)n"});
606                                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
607                                         \}
608                                         \textcolor{keywordflow}{break};
609                                 \}
610                                 \textcolor{comment}{/*}
611 \textcolor{comment}{                                if (sscanf(msg, "\(\backslash\)001AUDIOCHAT %ms %li", &hostname\_destino, &port) > 0) \{}
612 \textcolor{comment}{                                        g\_print("host=%s, port=%li\(\backslash\)n", hostname\_destino, port);}
613 \textcolor{comment}{                                \} else\{}
614 \textcolor{comment}{                                        g\_print("Formato incorrecto en envio de fichero\(\backslash\)n");}
615 \textcolor{comment}{                                \}*/}
616                                 ret = \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command, strlen(
      command));
617                                 \textcolor{keywordflow}{if}(ret < 0)\{
618                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case PRIVMSG -
       enviarDatos() devolvio error (ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
619                                         exit(1);
620                                 \}
621                                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout }
622                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In command\_query: case PRIVMSG -
       enviarDatos() mandó 0 Bytes(ver secuencia en .log)\(\backslash\)n\(\backslash\)t\(\backslash\)t(Timeout de conexión probablemente)\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
623                                         exit(1);
624                                 \}
625                         \}
626 
627                         \textcolor{keywordflow}{if}(msgtarget[0] != \textcolor{charliteral}{'#'})\{\textcolor{comment}{//no grupo}
628                                 IRCInterface\_AddNewChannelThread(nick\_privmsg, 0);                              
629                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (nick\_privmsg, nick\_privmsg, msg);
630                                 \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
631                         \}
632 
633                         \textcolor{comment}{//IRCInterface\_WriteChannelThread(msgtarget, nick\_privmsg, msg);}
634                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      msgtarget, nick\_privmsg, msg);
635                         \textcolor{keywordflow}{break};
636 
637                 \textcolor{keywordflow}{case} PART:
638                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PART - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
639                         ret = IRCParse\_Part (message, &prefix, &channel, &msg);
640                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
641                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case PART - IRCParse\_Part
       devolvio != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
642                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
643                         \}
644                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_PART: \(\backslash\)n"});
645                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
646                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
647                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
648                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
649 
650                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
651                         IRCInterface\_DeleteNickChannelThread(channel, nick\_part);
652                         sprintf(mensaje, \textcolor{stringliteral}{"El usuario %s ha salido del grupo (%s)"},nick\_part, msg);
653                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
654                         \textcolor{keywordflow}{if}(strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}, nick\_part) == 0)\{
655                                 IRCInterface\_RemoveChannelThread(channel);
656                         \} \textcolor{keywordflow}{else} \{
657                                 sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channel);
658                                 retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
659                                 \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
660                                         g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
661                                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
662                                 \}
663                         \}
664 
665                         \textcolor{keywordflow}{break};
666 
667                 \textcolor{keywordflow}{case} NOTICE:
668                         \textcolor{comment}{//g\_print("\(\backslash\)n=======CASE NOTICE=======\(\backslash\)n");}
669                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NOTICE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
670 
671                         IRCParse\_Notice(message, &prefix, &msgtarget, &msg);
672 
673                         g\_print(\textcolor{stringliteral}{"prefix = %s\(\backslash\)n"}, prefix);
674                         g\_print(\textcolor{stringliteral}{"msgtarget = %s\(\backslash\)n"}, msgtarget);
675                         g\_print(\textcolor{stringliteral}{"msg = %s\(\backslash\)n"}, msg);
676                         
677 
678                         \textcolor{comment}{//break;}
679                         \textcolor{comment}{//caso: NOTICE !(generado por el server) (triggeado por /HELP, p.ej.)}
680                         \textcolor{comment}{//caso: !(:irc.eps.net NOTICE testame2 :example "HELP quit" or "HELP privmsg".)}
681 
682                         \textcolor{keywordflow}{if}(msg == NULL || msgtarget == NULL || prefix == NULL)\{
683                                 \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{
      "*"},\textcolor{stringliteral}{""});
684                                 \textcolor{keywordflow}{break};
685                         \}
686 
687                         \textcolor{keywordflow}{if}((!strcmp(msgtarget, \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user})) && (strcmp(prefix,\textcolor{stringliteral}{"irc.eps.net"}) != 0))
       \{
688                                 IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &
      server\_part);                         
689                                 sprintf(mensaje, \textcolor{stringliteral}{">%s<"}, nick\_part);
690                                 IRCInterface\_AddNewChannelThread(nick\_part, 0);
691                                 IRCInterface\_WriteChannelThread (nick\_part,mensaje,msg);
692                         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(msgtarget[0] == \textcolor{charliteral}{'#'})\{
693                                 IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &
      server\_part);
694                                 sprintf(mensaje, \textcolor{stringliteral}{">%s/%s<"}, nick\_part, msgtarget);
695                                 IRCInterface\_AddNewChannelThread(msgtarget, 0);
696                                 IRCInterface\_WriteChannelThread (msgtarget,mensaje,msg);
697                         \} \textcolor{keywordflow}{else} \{\textcolor{comment}{//AUTH, /HELP}
698                                 \textcolor{comment}{//g\_print(RED "\(\backslash\)n>>>>>>>>>> NO BOI\(\backslash\)n" RESET);}
699                                 \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{
      "*"},msg);
700                         \}
701                         \textcolor{comment}{//IRCInterface\_WriteSystemThread("*",msg);}
702                         \textcolor{keywordflow}{break};
703 
704                 \textcolor{keywordflow}{case} PING:
705                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] PING - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
706                         \textcolor{comment}{//:irc.eps.net PONG irc.eps.net :LAG1460877705692323}
707                         IRCParse\_Ping (message, &prefix, &server, &server2, &msg);
708                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
709                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server: %s \(\backslash\)n"},server);
710                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t server2: %s \(\backslash\)n"},server2);
711                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);
712                         IRCMsg\_Pong(&command\_pong, prefix?prefix:\hyperlink{xchat2_8c_af203df082d5c6dcaa0c88b07cf86466d}{hostname}, server?server:\textcolor{stringliteral}{""}, 
      server2?server2:\textcolor{stringliteral}{""}, msg?msg:\textcolor{stringliteral}{""});
713                         \hyperlink{conexion__tcp_8h_ab9468ce1338cfca5736ab407ba155f55}{enviarDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, command\_pong, strlen(command\_pong));
714                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Pong enviado\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
715                         IRCInterface\_PlaneRegisterOutMessageThread(command\_pong);
716                         \textcolor{keywordflow}{break};
717 
718                 \textcolor{keywordflow}{case} KICK:
719                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] KICK - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
720                         \textcolor{comment}{//long IRCParse\_Kick (char *strin, char **prefix, char **channel, char **user, char
       **comment)}
721 
722                         ret = IRCParse\_Kick(message, &prefix, &channel, &user, &comment);
723                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
724                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case KICK - IRCParse\_Kick
       devolvio != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
725                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
726                         \}
727                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
728                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
729                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
730                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n"},user);
731                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t comment: %s \(\backslash\)n\(\backslash\)n"},comment);
732 
733                         sprintf(mensaje,\textcolor{stringliteral}{"%s Ha sido echado de %s con mensaje/motivo(%s)"},user, channel, 
      comment);
734                         
735                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
736                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
737 
738                         \textcolor{comment}{//Actualizar al lista de usuarios}
739                         IRCInterface\_DeleteNickChannelThread (channel, user);
740                         \textcolor{keywordflow}{if}(!strcmp(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},user))\{
741                                 IRCInterface\_RemoveChannelThread(channel);
742                         \}
743                         \textcolor{comment}{/*memset(mensaje,0,MAXDATA);}
744 \textcolor{comment}{                        sprintf(mensaje,"/names %s",channel);}
745 \textcolor{comment}{                        retorno = punames(mensaje);}
746 \textcolor{comment}{                        if(retorno == ERR)\{}
747 \textcolor{comment}{                                g\_print("ERROR - MODE - punames");}
748 \textcolor{comment}{                                return ERR;                             }
749 \textcolor{comment}{                        \} */}
750                         \textcolor{keywordflow}{break};
751 
752                 \textcolor{keywordflow}{case} ERR\_UNKNOWNMODE: \textcolor{comment}{//472}
753                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_UNKNOWNMODE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
754                         \textcolor{comment}{//      long IRCParse\_ErrUnknownMode (char *strin, char **prefix, char **nick, char
       **modechar, char **channel, char **msg)}
755                         ret = IRCParse\_ErrUnknownMode(message, &prefix, &nick, &modechar, &channel, &msg);
756                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
757                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case ERR\_UNKNOWNMODE -
       IRCParse\_ErrUnknownMode != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
758                                 \textcolor{comment}{//return -1;}
759                         \}
760                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_ErrUnknownMode: \(\backslash\)n"});
761                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
762                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
763                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);
764                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t modechar: %s \(\backslash\)n"},nick);                                             
765                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
766                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);         
767 
768                         sprintf(mensaje,\textcolor{stringliteral}{"%s %s\(\backslash\)n"},channel,msg);
769                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
770                         \textcolor{keywordflow}{break};
771 
772                 \textcolor{keywordflow}{case} MODE: \textcolor{comment}{//}
773                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] MODE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
774                         \textcolor{comment}{//    long IRCParse\_Mode (char *strin, char **prefix, char **channeluser, char
       **mode, char **user)}
775                         ret = IRCParse\_Mode(message, &prefix, &channeluser, &mode, &user);
776                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
777                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case MODE - IRCParse\_Mode !=
       IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
778                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
779                         \}
780                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
781                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
782                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channeluser: %s \(\backslash\)n"},channeluser);
783                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t mode: %s \(\backslash\)n"},mode);
784                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t user: %s \(\backslash\)n\(\backslash\)n"},user);
785 
786                         nick = strtok(prefix,\textcolor{stringliteral}{"!"}); \textcolor{comment}{//Coger el usuario que ha mandando el mode}
787                         \textcolor{keywordflow}{if}(user != NULL)\{ \textcolor{comment}{//Modo usuario}
788                                 \textcolor{comment}{//Comprobar si es k o l }
789                                 \textcolor{keywordflow}{if}(strcasecmp(mode,\textcolor{stringliteral}{"+k"}) == 0)\{
790                                         sprintf(mensaje,\textcolor{stringliteral}{"%s establece contraseña del canal %s como: %s "},
      nick, channeluser, user);
791                                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
792                                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
793                                         \textcolor{keywordflow}{break};          
794                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(strcasecmp(mode,\textcolor{stringliteral}{"+l"}) == 0)\{
795                                         sprintf(mensaje,\textcolor{stringliteral}{"%s establece límite del canal %s a %s usuarios"},
      nick, channeluser, user);
796                                         g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
797                                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
798                                         \textcolor{keywordflow}{break};                                          
799                                 \}
800 
801                                 sprintf(mensaje,\textcolor{stringliteral}{"%s establece el modo %s al usuario %s en el canal %s "},
      nick, mode, user, channeluser);
802                                 g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
803                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
804 
805                                 \textcolor{comment}{/* No funciona IRCInterface\_ChangeNickStateChannel :(}
806 \textcolor{comment}{                                if(strcasecmp(mode,"+o") == 0)\{}
807 \textcolor{comment}{                                        g\_print("modo op\(\backslash\)n");}
808 \textcolor{comment}{                                        IRCInterface\_ChangeNickStateChannel (channeluser, nick, OPERATOR);}
809 \textcolor{comment}{                                \}else if(strcasecmp(mode,"+v") == 0)\{}
810 \textcolor{comment}{                                        g\_print("modo voice\(\backslash\)n");}
811 \textcolor{comment}{                                        IRCInterface\_ChangeNickStateChannel (channeluser, nick, VOICE);}
812 \textcolor{comment}{                                \}else\{}
813 \textcolor{comment}{                                        g\_print("else otro modo\(\backslash\)n");*/}
814                                         \textcolor{comment}{//Actualizar al lista de usuarios}
815                                         
816                                         memset(mensaje,0,\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA});
817                                         sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channeluser);
818                                         retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
819                                         \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
820                                                 g\_print(\textcolor{stringliteral}{"ERROR - MODE - punames"});
821                                                 \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
822                                         \}                                       
823                                 \textcolor{comment}{//\}                             }
824                         \}\textcolor{keywordflow}{else}\{
825                                 sprintf(mensaje,\textcolor{stringliteral}{"%s establece modo %s %s "}, nick, channeluser, mode);
826                                 g\_print(\textcolor{stringliteral}{"Mensaje: %s \(\backslash\)n"},mensaje);
827                                 \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}
      (channeluser,\textcolor{stringliteral}{"*"},mensaje);
828                         \}                       
829                         \textcolor{keywordflow}{break};
830 
831                 \textcolor{keywordflow}{case} INVITE:                    
832                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] INVITE - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
833                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      message);
834                         \textcolor{keywordflow}{break};
835 
836                 \textcolor{keywordflow}{case} NICK:
837                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] NICK - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
838 
839                         IRCParse\_Nick (message, &prefix, &nick, &msg);
840                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
841                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
842                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
843                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick); \textcolor{comment}{//esta a null}
844                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg); \textcolor{comment}{//el nick viene aqui}
845                         IRCInterface\_ChangeNickThread(nick\_part, msg);
846                         sprintf(mensaje, \textcolor{stringliteral}{"%s ahora es conocido como %s"}, nick\_part, msg);
847                         \textcolor{keywordflow}{if}(!strcmp(nick\_part, \hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user}))\{
848                                 strcpy(\hyperlink{xchat2_8c_a7e2f32e47f3780a66e19651d8e79bced}{nick\_user},msg);                 
849                         \}
850                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      mensaje);    
851                         g\_print(\textcolor{stringliteral}{"new nick: %s\(\backslash\)n"}, msg);
852 
853                         \textcolor{keywordflow}{break};
854 
855                 \textcolor{keywordflow}{case} QUIT:
856                         \textcolor{comment}{/*}
857 \textcolor{comment}{                        * Enfoque 1: Cuando alguien sale (QUIT del servidor)}
858 \textcolor{comment}{                        *       Obtener la lista de canales abiertos -> '/names' en cada canal -> Capturar
       reply del servidor:}
859 \textcolor{comment}{                        *       353 -> interface\_mostrar\_nicks(channel,msg); (se actualizan todas las
       listas de chats abiertos)}
860 \textcolor{comment}{                        *}
861 \textcolor{comment}{                        */}
862                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] QUIT - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
863                         
864                         IRCParse\_Quit (message, &prefix, &msg);
865                         IRCParse\_ComplexUser(prefix, &nick\_part, &username\_part, &host\_part, &server\_part);
866                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
867                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
868                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n"},msg);
869                         sprintf(mensaje, \textcolor{stringliteral}{"%s se ha desconectado (%s)"}, nick\_part, msg);
870                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},mensaje);
871 
872                         IRCInterface\_ListAllChannelsThread(&channelsQuit, &numChannelsQuit);
873 
874                         \textcolor{keywordflow}{for}(i=0; i<numChannelsQuit; i++)\{
875                                 sprintf(mensaje,\textcolor{stringliteral}{"/names %s"},channelsQuit[i]);
876                                 retorno = \hyperlink{user__commands_8h_abaae116595df34db33e65e3d9d225103}{punames}(mensaje);
877                                 \textcolor{keywordflow}{if}(retorno == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
878                                         g\_print(\textcolor{stringliteral}{"ERROR - JOIN - punames"});
879                                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};                          
880                                 \}
881                         \}
882                         \textcolor{keywordflow}{break};
883 
884                 \textcolor{keywordflow}{case} RPL\_CHANNELMODEIS: \textcolor{comment}{//324   }
885                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] RPL\_CHANNELMODEIS - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
886                         \textcolor{comment}{//long IRCParse\_RplChannelModeIs(char *strin, char **prefix, char **nick, char
       **channel, char **modetxt)}
887                         \textcolor{comment}{/*ret = IRCParse\_RplChannelModeIs(message, &prefix, &channeluser, &mode, &user);}
888 \textcolor{comment}{                        if(ret != IRC\_OK)\{}
889 \textcolor{comment}{                                g\_print("ERROR: IRCInterface\_Connect - IRCParse\_RplTopic\(\backslash\)n");}
890 \textcolor{comment}{                                return ERR;}
891 \textcolor{comment}{                        \}}
892 \textcolor{comment}{                        g\_print("\(\backslash\)t message: %s \(\backslash\)n",message);}
893 \textcolor{comment}{                        g\_print("\(\backslash\)t prefix: %s \(\backslash\)n",prefix);}
894 \textcolor{comment}{                        g\_print("\(\backslash\)t channeluser: %s \(\backslash\)n",channeluser);}
895 \textcolor{comment}{                        g\_print("\(\backslash\)t mode: %s \(\backslash\)n",mode);}
896 \textcolor{comment}{                        g\_print("\(\backslash\)t user: %s \(\backslash\)n\(\backslash\)n",user);}
897 \textcolor{comment}{}
898 \textcolor{comment}{                        sprintf(mensaje,"%s establece modo %s %s ", user, channeluser, mode);}
899 \textcolor{comment}{                        }
900 \textcolor{comment}{                        g\_print("Mensaje: %s \(\backslash\)n",mensaje);}
901 \textcolor{comment}{                        IRCInterface\_WriteChannelThread(channeluser,"*",mensaje);*/}
902 
903                         \textcolor{comment}{//Actualizar al lista de usuarios}
904                         \textcolor{keywordflow}{break};  
905 
906                 \textcolor{keywordflow}{case} ERR\_CHANOPRIVSNEEDED: \textcolor{comment}{//482}
907                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_CHANOPRIVSNEEDED - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
908                         \textcolor{comment}{//   long IRCParse\_ErrChanOPrivsNeeded (char *strin, char **prefix, char **nick,
       char **channel, char **msg)}
909                         ret = IRCParse\_ErrChanOPrivsNeeded(message, &prefix, &nick, &channel, &msg);
910                         \textcolor{keywordflow}{if}(ret != IRC\_OK)\{
911                                 g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: case ERR\_CHANOPRIVSNEEDED -
       IRCParse\_ErrChanOPrivsNeeded != IRC\_OK"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
912                                 \textcolor{comment}{//return ERR;}
913                         \}
914                         g\_print(\textcolor{stringliteral}{"Comandos recibidos en el IRCParse\_ErrChanOPrivsNeeded: \(\backslash\)n"});
915                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t message: %s \(\backslash\)n"},message);
916                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t prefix: %s \(\backslash\)n"},prefix);
917                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t nick: %s \(\backslash\)n"},nick);                 
918                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t channel: %s \(\backslash\)n"},channel);
919                         g\_print(\textcolor{stringliteral}{"\(\backslash\)t msg: %s \(\backslash\)n\(\backslash\)n"},msg);         
920 
921                         sprintf(mensaje,\textcolor{stringliteral}{"%s %s\(\backslash\)n"},channel,msg);
922                         \hyperlink{aux__functions_8h_a6400bb2b7979a2393f0e84b6646a24fe}{IRCInterface\_WriteChannelThread\_Pretty}(
      channel,\textcolor{stringliteral}{"*"},mensaje);
923                         \textcolor{keywordflow}{break};
924 
925                 \textcolor{keywordflow}{case} ERR\_NOSUCHSERVER:
926                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] ERR\_NOSUCHSERVER - message = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
927                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      message);
928                         \textcolor{keywordflow}{break};
929 
930                 \textcolor{comment}{/*TRATAMIENTO DE ERRORES*/}
931                 \textcolor{keywordflow}{case} IRCERR\_NOCOMMAND:
932                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: Mensaje de error recibido en switch():
      \(\backslash\)n\(\backslash\)tIRCERR\_NOCOMMAND -  no hay ningún comando en la cadena de caracteres\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
933                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},
      message);
934                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
935 
936                 \textcolor{keywordflow}{case} IRCERR\_NOPARAMS:
937                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"\(\backslash\)nERROR - In command\_query: Mensaje de error recibido en switch():
      \(\backslash\)n\(\backslash\)tIRCERR\_NOPARAMS -  se ha introducido una cadena de caracteres nula\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
938                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
939                         \textcolor{keywordflow}{return} \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
940 
941                 \textcolor{keywordflow}{case} IRCERR\_UNKNOWNCOMMAND:
942                         \textcolor{comment}{//g\_print(MAG"\(\backslash\)n>>>>>>>>>>>>>>>>>>>>>>>>>>\(\backslash\)n"RESET);}
943                         \textcolor{comment}{//ret =  IRCParse\_GeneralCommand (message, &prefix, &type, &params, &n\_params,
       &msg);}
944                         \textcolor{comment}{/*Intenta hacer un parseo apra un type no soportado por IRC\_CommandQuery()*/}
945                         unknw\_type = \hyperlink{aux__functions_8h_a90798d5fe15fdd743f8802b0f154b854}{parse\_type}(message);
946                         \textcolor{keywordflow}{if}(unknw\_type != \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
947                                 \textcolor{keywordflow}{switch}(unknw\_type)\{ \textcolor{comment}{//Intentar tratar un mensaje no reconocido por
       IRC\_CommandQuery() }
948                                         \textcolor{keywordflow}{case} 250:
949                                                 g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] unknw\_type = 250 -
       message = %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
950                                                 substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'});
951                                                 \textcolor{keywordflow}{if} (substring)\{
952                                                         substring = \hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(substring, \textcolor{charliteral}{':'});
953                                                 \}
954                                                 
      \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}(\textcolor{stringliteral}{"*"},substring);
955 
956                                                 substring = NULL;
957                                         \textcolor{keywordflow}{break};
958 
959                                         \textcolor{keywordflow}{default}:
960                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: case
       IRCERR\_UNKNOWNCOMMAND:\(\backslash\)n\(\backslash\)tNo se ha definido un tratamiento para un mensaje desconocido con type = %d\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, unknw\_type);
961                                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
962                                         \textcolor{keywordflow}{break};
963                                 \}
964                                 \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
965                         \}
966 
967                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: Mensaje de error recibido en switch():\(\backslash\)n\(\backslash\)t
      IRCERR\_UNKNOWNCOMMAND -  l comando que contiene no es reconocido por esta función.\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
968                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
969                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
970 
971                 \textcolor{keywordflow}{default}:
972                         \textcolor{keywordflow}{switch}(\hyperlink{aux__functions_8h_a1738b19e427c47733b310cbe08431a56}{parse\_type2}(message))\{
973                                 \textcolor{keywordflow}{case} 306: \textcolor{comment}{//parche porque no devuelve 306 para AWAY}
974                                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] 306 (RPL\_AWAY) - message = %s
      \(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
975                                         \textcolor{comment}{//IRCParse\_RplAway (message, &prefix, &nick, &nick2, &msg);}
976                                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}
      (\textcolor{stringliteral}{"*"},\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'}), \textcolor{charliteral}{':'}));
977                                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
978                                 \textcolor{keywordflow}{case} 311: \textcolor{comment}{//WHOIS}
979                                 \textcolor{keywordflow}{case} 312:
980                                 \textcolor{keywordflow}{case} 319:
981                                 \textcolor{keywordflow}{case} 317:
982                                 \textcolor{keywordflow}{case} 318:
983                                         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"\(\backslash\)n>> [server command] 311-318 (RPL\_WHOIS...) -
       message = %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
984                                         \hyperlink{aux__functions_8h_a043ae6695458ae3a85dc9da43cf9b751}{IRCInterface\_WriteSystemThread\_Pretty}
      (\textcolor{stringliteral}{"*"},\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(\hyperlink{aux__functions_8h_a20f32d171da437faef7716e4b6e667dd}{strnext}(message, \textcolor{charliteral}{':'}), \textcolor{charliteral}{':'}));
985                                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
986                                 \textcolor{keywordflow}{default}:
987                                         \textcolor{keywordflow}{break};
988                         \}
989                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"WARN - In command\_query: Alcanzado default del switch()(TO\_DO):\(\backslash\)n\(\backslash\)t
       %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, message);
990                         \textcolor{comment}{//sprintf(aux,"[%s] %s",gmtime(time(NULL)), nick)}
991                         IRCInterface\_WriteSystemThread(\textcolor{stringliteral}{"*"},message);
992                         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
993         \}
994 
995         \textcolor{comment}{//Liberamos memoria}
996         \textcolor{comment}{//
      mfree(33,msg,nick,nick2,servername,versionname,timedate,version,availableusermodes,availablechannelmodes,addedg,type,visible,topic,channel,key,}
997         \textcolor{comment}{//
      msgtarget,origin\_nick,filename,hostname\_destino,nick\_part,username\_part,host\_part,server\_part,server,server2,command\_pong,token,modechar,channeluser,}
998         \textcolor{comment}{//mode,user,comment,realname,host);}
999         \textcolor{keywordflow}{return} \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
1000 
1001 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8h_a41f93f364aea303a0c93177289733f92_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8h_a98484e1bbb136d37503aa6c604eff6a2}{\index{xchat2.\-h@{xchat2.\-h}!glue\-And\-Query@{glue\-And\-Query}}
\index{glue\-And\-Query@{glue\-And\-Query}!xchat2.h@{xchat2.\-h}}
\subsubsection[{glue\-And\-Query}]{\setlength{\rightskip}{0pt plus 5cm}void glue\-And\-Query (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command, }
\item[{char $\ast$}]{last\-\_\-command}
\end{DoxyParamCaption}
)}}\label{xchat2_8h_a98484e1bbb136d37503aa6c604eff6a2}

\begin{DoxyCode}
1003                                                     \{
1004         \textcolor{keywordtype}{char}* glued\_command = (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
1005         
1006         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1007         strcat(glued\_command, command);
1008 
1009         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
1010         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
1011 
1012         free(command);
1013         free(glued\_command);
1014 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8h_a98484e1bbb136d37503aa6c604eff6a2_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8h_a7230d43b8458797c679e7180bf1fda90}{\index{xchat2.\-h@{xchat2.\-h}!receive\-\_\-messages@{receive\-\_\-messages}}
\index{receive\-\_\-messages@{receive\-\_\-messages}!xchat2.h@{xchat2.\-h}}
\subsubsection[{receive\-\_\-messages}]{\setlength{\rightskip}{0pt plus 5cm}void receive\-\_\-messages (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{no\-\_\-arg}
\end{DoxyParamCaption}
)}}\label{xchat2_8h_a7230d43b8458797c679e7180bf1fda90}


Funcion ejecutada por un hilo, que recibe mensajes del servidor y los procesa segun el tipo de respuesta. 


\begin{DoxyParams}{Parameters}
{\em no\-\_\-arg} & estructura de parametros (vacia) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
O\-K si todo es correcto, E\-R\-R si se produce un error 
\end{DoxyReturn}

\begin{DoxyCode}
1134                                    \{
1135 
1136         \textcolor{keywordtype}{char} message[\hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}];
1137         \textcolor{keywordtype}{int} ret;
1138         g\_print(\hyperlink{types_8h_aea69ffbacdcdf16c21b8c9961df84448}{GRN} \textcolor{stringliteral}{"Hilo Preparado para recibir mensajes\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1139 
1140         \textcolor{keywordtype}{int} oldtype;
1141         \textcolor{comment}{/*No es necesario el pthread\_cancel asíncrono aparentemente}
1142 \textcolor{comment}{        * +INFO: https://www.securecoding.cert.org/confluence/display/c/
      POS44-C.+Do+not+use+signals+to+terminate+threads}
1143 \textcolor{comment}{        *                https://www.securecoding.cert.org/confluence/display/c/
      POS47-C.+Do+not+use+threads+that+can+be+canceled+asynchronously}
1144 \textcolor{comment}{        */}
1145         \textcolor{comment}{//pthread\_setcanceltype(PTHREAD\_CANCEL\_ASYNCHRONOUS, &oldtype);}
1146         
1147         \textcolor{keywordflow}{while}(1)\{
1148                 \textcolor{comment}{//printf(BLU "\(\backslash\)nwhile en receive\_messages\(\backslash\)n" RESET);}
1149                 \textcolor{comment}{//sem\_wait(&recepcionTCP);}
1150                 memset(message, 0, \textcolor{keyword}{sizeof}(message));
1151                 ret = \hyperlink{conexion__tcp_8h_a2ec2b47883bdb05804bec657bfc42516}{recvDatos}(\hyperlink{xchat2_8c_acd63fb8dbd9439219e2db08dfc173aa0}{sockfd\_user}, message, 
      \hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA}, \hyperlink{xchat2_8c_a738cdcabc13fa13e8263986fe5d0fc28}{host\_name});
1152                 \textcolor{comment}{//sem\_post(&recepcionTCP);}
1153                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1154                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In receive\_messages: recvDatos() devolvio error (ver .log)
      \(\backslash\)n\(\backslash\)t\(\backslash\)tEl cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1155                         exit(1);
1156                 \}
1157                 \textcolor{keywordflow}{if}(ret == 0)\{ \textcolor{comment}{//timeout seguramente}
1158                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In receive\_messages: recvDatos() leyó 0 Bytes(ver .log)\(\backslash\)n\(\backslash\)t
      \(\backslash\)t(Timeout)El cliente se cerrará.\(\backslash\)n"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1159                         exit(1);
1160                 \}
1161                 \textcolor{keywordflow}{if}(ret == \hyperlink{types_8h_ae7e715c270481406658bbd2bafa2897f}{MAXDATA})
1162                         \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe}(message, 1);
1163                 \textcolor{keywordflow}{else}
1164                         \hyperlink{xchat2_8c_a63f7dc08db4a2318cb526eee804709b3}{unpipe}(message, 0);
1165         \}
1166 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8h_a7230d43b8458797c679e7180bf1fda90_cgraph}
\end{center}
\end{figure}


\hypertarget{xchat2_8h_a63f7dc08db4a2318cb526eee804709b3}{\index{xchat2.\-h@{xchat2.\-h}!unpipe@{unpipe}}
\index{unpipe@{unpipe}!xchat2.h@{xchat2.\-h}}
\subsubsection[{unpipe}]{\setlength{\rightskip}{0pt plus 5cm}void unpipe (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{message, }
\item[{int}]{M\-A\-X\-D\-A\-T\-A\-\_\-flag}
\end{DoxyParamCaption}
)}}\label{xchat2_8h_a63f7dc08db4a2318cb526eee804709b3}


Funcion para dividir en comandos la cadena \char`\"{}message\char`\"{}. 


\begin{DoxyParams}{Parameters}
{\em message} & cadena recibida, puede incluir mas de un comando \\
\hline
{\em M\-A\-X\-D\-A\-T\-A\-\_\-flag} & flag que marca que se ha leído el maximo del buffer y han podido cortarse comandos \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}

\begin{DoxyCode}
1022                                             \{
1023 
1024         \textcolor{keywordtype}{char} *q = message, *command;
1025         \textcolor{keywordtype}{char} *glued\_command = NULL;
1026         \textcolor{keywordtype}{int} i = 0, test = 0;
1027 
1028         \textcolor{keywordflow}{while} (q != NULL)\{
1029                 q = IRC\_UnPipelineCommands(q, &command);
1030                 test = \hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(command);
1031 
1032                 \textcolor{keywordflow}{if}(MAXDATA\_flag == 1)\{  \textcolor{comment}{//caso 1.)riesgo: se ha llamado a unpipe() con un bloque de tam
       MAXDATA}
1033                         \textcolor{keywordflow}{if}((i == 0) && (\hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} == 1))\{      \textcolor{comment}{//caso 2.1)primera
       iter unpipe, no MAXDATA PERO 'check...' activado}
1034                                 \textcolor{keywordflow}{if}(test == \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                       \textcolor{comment}{//
      caso 2.1.1)además no da error}
1035                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1036                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{  \textcolor{comment}{//caso 2.1.2)o bien es la segunda mitad del comando o bien}
1037                                                                                                                         \textcolor{comment}{
      //           da la casualidad de que es un comando mal formado independiente}
1038                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1039                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{        \textcolor{comment}{//caso 2.1.3)ambos test petan. Concatenar y rezar}
1040                                         glued\_command =  (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
1041                                         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1042                                         strcat(glued\_command, command);
1043 
1044                                         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
1045                                         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(glued\_command) == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
1046                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
1047                                                 free(glued\_command);
1048                                         \}\textcolor{keywordflow}{else}\{
1049                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1050                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1051                                         \}
1052 
1053                                         free(command);
1054                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 2.1.4)ambos comandos están bien formados}
1055                                         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1056                                         free(command);
1057                                 \}
1058                                 \textcolor{comment}{//resetear flags:}
1059                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 0;
1060                                 strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, \textcolor{stringliteral}{"0"});
1061 
1062                         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(q == NULL)\{ \textcolor{comment}{//q es 'resto', comprobar que sea el último comando parseado
       del bloque}
1063                                 \textcolor{keywordflow}{if} (test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                                                    \textcolor{comment}{//
      caso 1.1)error en test con MAXDATA\_f}
1064                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"\(\backslash\)nWARN - In unpipe: testIRC\_CommandQuery(command)
       devolvio ERR con MAXDATA\_flag activada\(\backslash\)n\(\backslash\)tSe almacena el trozo de comando=%s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1065                                         \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} = \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR};
1066                                         strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, command);
1067                                         free(command);
1068                                         \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 1;
1069                                         \textcolor{keywordflow}{break}; \textcolor{comment}{//(!) en principio no tiene sentido seguir iterando, es el
       último mensaje (trozo) del bloque}
1070                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 1.2)no error en test con MAXDATA\_f, 2 posibilidades:}
1071                                                                                                                         \textcolor{comment}{
      //a)justo ha cogido el comando entero, b)ha cogido parte del comando y lo reconoce como valido}
1072                                         g\_print(\hyperlink{types_8h_a96fac03c4ab3363f06a0328e0e53a40c}{YEL} \textcolor{stringliteral}{"\(\backslash\)nWARN - In unpipe: testIRC\_CommandQuery(command)
       devolvio OK con MAXDATA\_flag activada\(\backslash\)n\(\backslash\)tSe almacena el trozo de comando=%s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1073                                         \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} = \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK};
1074                                         strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, command);
1075                                         free(command);
1076                                 \}
1077                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 1;
1078                         \}\textcolor{keywordflow}{else}\{          \textcolor{comment}{//si no es el último comando parseado, command\_query normal}
1079                                 \textcolor{keywordflow}{if}(\hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command) == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1080                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: command\_query() devolvio ERR
       (MAXDATA\_flag == 1 pero no es el último comando)\(\backslash\)n\(\backslash\)tcommand = %s"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1081                                         free(command);
1082                                 \}
1083                         \}
1084 
1085                 \}\textcolor{keywordflow}{else}\{                                  \textcolor{comment}{//caso 2)no se ha llamado a unpipe() con un bloque
       de tam MAXDATA}
1086                         \textcolor{keywordflow}{if}((i == 0) && (\hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} == 1))\{      \textcolor{comment}{//caso 2.1)primera
       iter unpipe, no MAXDATA PERO 'check...' activado}
1087                                 \textcolor{keywordflow}{if}(test == \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{                       \textcolor{comment}{//
      caso 2.1.1)además no da error}
1088                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1089                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{  \textcolor{comment}{//caso 2.1.2)o bien es la segunda mitad del comando o bien}
1090                                                                                                                         \textcolor{comment}{
      //           da la casualidad de que es un comando mal formado independiente}
1091                                         \hyperlink{xchat2_8c_a98484e1bbb136d37503aa6c604eff6a2}{glueAndQuery}(command, 
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1092                                 \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(test == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR} && \hyperlink{xchat2_8c_a7872bff8c54fa63dccefb6916f983928}{last\_test} == 
      \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{        \textcolor{comment}{//caso 2.1.3)ambos test petan. No se puede concatenar}
1093                                         glued\_command =  (\textcolor{keywordtype}{char}*) malloc((2 + strlen(command) + strlen(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command})) * \textcolor{keyword}{sizeof}(char));
1094                                         strcpy(glued\_command, \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1095                                         strcat(glued\_command, command);
1096                                         g\_print(\hyperlink{types_8h_add9307de87f38e77d336751e305886f6}{BLU} \textcolor{stringliteral}{"\(\backslash\)nglued\_command = %s\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, glued\_command);
1097 
1098                                         \textcolor{keywordflow}{if} (\hyperlink{aux__functions_8h_a8d3c58618c3bb95d81a542251062d19e}{testIRC\_CommandQuery}(glued\_command) == 
      \hyperlink{daemon_8h_aba51915c87d64af47fb1cc59348961c9}{OK})\{
1099                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(glued\_command);
1100                                                 free(glued\_command);
1101                                         \}\textcolor{keywordflow}{else}\{
1102                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(
      \hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command});
1103                                                 \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1104                                         \}
1105 
1106                                         free(command);
1107                                 \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{
      //caso 2.1.4)ambos comandos están bien formados}
1108                                         \hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command);
1109                                         free(command);
1110                                 \}
1111                                 \textcolor{comment}{//resetear flags:}
1112                                 \hyperlink{xchat2_8c_ad1d1f3c86702bf2ea990065ad3293d10}{check\_next\_unpipe} = 0;
1113                                 strcpy(\hyperlink{xchat2_8c_a4e304440b657a8d3265793203cb12393}{last\_command}, \textcolor{stringliteral}{"0"});
1114                         \}\textcolor{keywordflow}{else}\{                                                                          \textcolor{comment}{//
      caso 2.2)no MAXDATA, no i=0: command\_query normal}
1115                                 \textcolor{keywordflow}{if}(\hyperlink{xchat2_8c_a41f93f364aea303a0c93177289733f92}{command\_query}(command) == \hyperlink{types_8h_a735563036dced0b7d6cc98f97ea4978b}{ERR})\{
1116                                         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: command\_query() devolvio ERR (i
       != 0, check\_... False, MAXDATA\_flag False)\(\backslash\)n\(\backslash\)tcommand = %s"} \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET}, command);
1117                                         free(command);
1118                                 \}
1119                         \}
1120                 \}
1121                 i++;
1122         \}
1123 
1124     \textcolor{keywordflow}{if}(command == NULL)\{
1125         g\_print(\hyperlink{types_8h_a8d23feea868a983c8c2b661e1e16972f}{RED} \textcolor{stringliteral}{"ERROR - In unpipe: Se ha solicitado buscar un comando en una cadena vacia\(\backslash\)n\(\backslash\)n"} 
      \hyperlink{types_8h_ab702106cf3b3e96750b6845ded4e0299}{RESET});
1126     \}   
1127 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{xchat2_8h_a63f7dc08db4a2318cb526eee804709b3_cgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{xchat2_8h_afe699fe3416e9bf2d3553e35d7a1dea2}{\index{xchat2.\-h@{xchat2.\-h}!p\-\_\-array\-\_\-funciones@{p\-\_\-array\-\_\-funciones}}
\index{p\-\_\-array\-\_\-funciones@{p\-\_\-array\-\_\-funciones}!xchat2.h@{xchat2.\-h}}
\subsubsection[{p\-\_\-array\-\_\-funciones}]{\setlength{\rightskip}{0pt plus 5cm}{\bf p\-\_\-funcion} p\-\_\-array\-\_\-funciones\mbox{[}57\mbox{]}}}\label{xchat2_8h_afe699fe3416e9bf2d3553e35d7a1dea2}
Array de funciones de usuario definido en \hyperlink{user__commands_8c}{user\-\_\-commands.\-c} 